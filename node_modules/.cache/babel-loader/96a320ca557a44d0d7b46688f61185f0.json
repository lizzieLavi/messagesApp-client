{"ast":null,"code":"import _objectSpread from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../css/chat.css';import'../css/sidebar.css';import React from'react';import{useState,useEffect}from'react';import{useConversations}from'../contexts/conversationsprovider';import{useUser}from'../contexts/userprovider';import{Avatar,IconButton,makeStyles,Modal}from'@material-ui/core';import ChatBody from'./chatbody';import SendImageBody from'./sendimagebody';import CloseIcon from'@material-ui/icons/Close';import EditIcon from'@material-ui/icons/Edit';import CheckIcon from'@material-ui/icons/Check';import InsertEmoticonIcon from'@material-ui/icons/InsertEmoticon';import Picker from'emoji-picker-react';import PersonAdd from'@material-ui/icons/PersonAdd';import ExitToAppIcon from'@material-ui/icons/ExitToApp';import AddGroupMember from'./addgroupmember';import Dialog from'@material-ui/core/Dialog';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var useStyles=makeStyles({root:{\"&:hover\":{backgroundColor:\"transparent\"}}});export default function Chat(){var _useConversations=useConversations(),selectedConversation=_useConversations.selectedConversation,currentConversationIsConnected=_useConversations.currentConversationIsConnected,typingFlag=_useConversations.typingFlag,setTypingFlag=_useConversations.setTypingFlag,showDetails=_useConversations.showDetails,setShowDetails=_useConversations.setShowDetails,UpdateConversation=_useConversations.UpdateConversation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),imageFlag=_useState2[0],setImageFlag=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),imageURL=_useState4[0],setImageURL=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),EditGroupNameGlag=_useState6[0],setEditGroupNameGlag=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),EditGroupDescriptionGlag=_useState8[0],setEditGroupDescriptionGlag=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),emojiFlag=_useState10[0],setEmojiFlag=_useState10[1];var _useState11=useState(selectedConversation.Name),_useState12=_slicedToArray(_useState11,2),Text=_useState12[0],setText=_useState12[1];var _useState13=useState(selectedConversation.description),_useState14=_slicedToArray(_useState13,2),Description=_useState14[0],setDescription=_useState14[1];var _useUser=useUser(),info=_useUser.info;var classes=useStyles();var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),modalOpen=_useState16[0],setModalOpen=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),dialogOpen=_useState18[0],setDialogOpen=_useState18[1];useEffect(function(){setEditGroupNameGlag(false);setEditGroupDescriptionGlag(false);setEmojiFlag(false);},[selectedConversation]);var _onEmojiClick=function onEmojiClick(event,emojiObject){setText(Text+emojiObject.emoji);};var onDescriptionEmojiClick=function onDescriptionEmojiClick(event,emojiObject){setDescription(Description+emojiObject.emoji);};var groupheader=function groupheader(){var returnValue='';if(typingFlag!==''){returnValue=/*#__PURE__*/_jsxs(\"div\",{className:\"lastSeen\",children:[\" \",typingFlag,\" is typing...\"]});setTimeout(function(){return setTypingFlag('');},1000);}else{var UsersInGroup='';selectedConversation.Participants.forEach(function(participant,index){if(index===selectedConversation.Participants.length-1)UsersInGroup=UsersInGroup+participant.name;else UsersInGroup=UsersInGroup+participant.name+', ';});returnValue=/*#__PURE__*/_jsxs(\"div\",{className:\"lastSeen\",children:[UsersInGroup,\" \"]});}return returnValue;};function chatBodyCallback(image){setImageURL(image);setImageFlag(true);}function backToChatCallback(){setImageURL(null);setImageFlag(false);}var privateConversationHeader=function privateConversationHeader(){var returnValue='';if(currentConversationIsConnected===''){if(typingFlag!==''){returnValue=/*#__PURE__*/_jsx(\"div\",{className:\"lastSeen\",children:\" typing...\"});setTimeout(function(){return setTypingFlag('');},1000);}else returnValue=/*#__PURE__*/_jsxs(\"div\",{className:\"connected\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"circle\"}),\" online \"]});}else returnValue=/*#__PURE__*/_jsx(\"div\",{className:\"lastSeen\",children:currentConversationIsConnected});return returnValue;};function changeGroupName(){var message={name:\"manager\",message:sessionStorage['name']+\" changed group name to \"+Text,timeSent:'',containsImage:false,containsRecord:false,recordURL:null};var messages=selectedConversation.Messages;messages.push(message);var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{Name:Text,Messages:messages,LastMasage:message});UpdateConversation(updatedConversation);setEditGroupNameGlag(false);}function changeGroupDescription(){var message={name:\"manager\",message:sessionStorage['name']+\" changed group Description\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null};var messages=selectedConversation.Messages;messages.push(message);var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{description:Description,Messages:messages,LastMessage:message});UpdateConversation(updatedConversation);setEditGroupDescriptionGlag(false);}function removeFromGroup(){var message={name:\"manager\",message:sessionStorage['name']+\" left the group\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null};var messages=selectedConversation.Messages;messages.push(message);var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{Messages:messages,LastMessage:message});UpdateConversation(updatedConversation);setDialogOpen(false);}function closeModal(){setModalOpen(false);}var chatSide=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat_header\",onClick:function onClick(){return setShowDetails(true);},children:[/*#__PURE__*/_jsx(Avatar,{src:selectedConversation.ConversationImage}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat_header_info\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",selectedConversation.Name,\" \"]}),selectedConversation.isGroup?groupheader():privateConversationHeader()]})]}),imageFlag?/*#__PURE__*/_jsx(SendImageBody,{imageURL:imageURL,backToChat:backToChatCallback}):/*#__PURE__*/_jsx(ChatBody,{imageCallback:chatBodyCallback})]});return showDetails?/*#__PURE__*/_jsxs(\"div\",{className:\"chat_with_details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat narrow_chat\",children:chatSide}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat_details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat_details_top\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setShowDetails(false);},children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"h2\",{style:{paddingLeft:'10px'},children:selectedConversation.isGroup?'Group Details:':'Contact Details:'})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"chat_details_body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_info\",children:[/*#__PURE__*/_jsx(Avatar,{src:selectedConversation.ConversationImage,style:{margin:'20px',height:'140px',width:'140px'}}),/*#__PURE__*/_jsxs(\"span\",{className:\"name_and_lastSeen\",children:[selectedConversation.isGroup&&EditGroupNameGlag?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[emojiFlag?/*#__PURE__*/_jsx(Picker,{onEmojiClick:function onEmojiClick(e,emojiObject){return _onEmojiClick(e,emojiObject);},pickerStyle:{width:'100%',height:'200px'}}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"edit_group_name\",children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return changeGroupName();},children:/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return setEmojiFlag(!emojiFlag);},children:/*#__PURE__*/_jsx(InsertEmoticonIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"input\",{defaultValue:Text,onChange:function onChange(e){return setText(e.target.value);},style:{border:'none',outline:'none',width:'100%',backgroundColor:'transparent',padding:'5px'}})]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"group_title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedConversation.Name}),!selectedConversation.isGroup?'':/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setEditGroupNameGlag(true);},children:/*#__PURE__*/_jsx(EditIcon,{style:{fontSize:'large',marginLeft:'10px'}})})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"lastSeen\",style:{padding:'10px',paddingLeft:'0px'},children:[\" \",!selectedConversation.isGroup?privateConversationHeader():/*#__PURE__*/_jsxs(\"span\",{children:[\" created at:  \",selectedConversation.createdDate,\" \"]})]})]})]}),selectedConversation.isGroup?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"group_details_container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"group_title\",style:{padding:'5px'},children:\" Description \"}),EditGroupDescriptionGlag?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[emojiFlag?/*#__PURE__*/_jsx(Picker,{onEmojiClick:function onEmojiClick(e,emojiObject){return onDescriptionEmojiClick(e,emojiObject);},pickerStyle:{width:'100%',height:'200px'}}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"edit_group_name\",style:{padding:'5px'},children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return changeGroupDescription();},children:/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return setEmojiFlag(!emojiFlag);},children:/*#__PURE__*/_jsx(InsertEmoticonIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"input\",{defaultValue:Description,onChange:function onChange(e){return setDescription(e.target.value);},style:{border:'none',outline:'none',width:'100%',backgroundColor:'transparent',padding:'5px'}})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"group_description_edit\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'15px',marginRight:'5px'},children:selectedConversation.description}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setEditGroupDescriptionGlag(true);},children:/*#__PURE__*/_jsx(EditIcon,{style:{fontSize:'large'}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group_details_container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"group_title\",style:{padding:'10px',borderBottom:'1px solid #B0B0B0'},children:[selectedConversation.Participants.length+1,\" participants\"]}),/*#__PURE__*/_jsx(Modal,{className:\"Modal\",open:modalOpen,onClose:closeModal,children:/*#__PURE__*/_jsx(AddGroupMember,{closeModal:closeModal})}),selectedConversation.creatorId===sessionStorage['id']?/*#__PURE__*/_jsxs(\"div\",{className:\"participant\",style:{cursor:'pointer',fontSize:'15px'},onClick:function onClick(){return setModalOpen(true);},children:[/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},children:/*#__PURE__*/_jsx(PersonAdd,{fontSize:\"large\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",children:\"Add Member\"})]}):'',selectedConversation.Participants.map(function(participant,index){return/*#__PURE__*/_jsx(\"div\",{className:\"participant\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{src:participant.imageName}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",children:participant.name}),participant.id===selectedConversation.creatorId?/*#__PURE__*/_jsx(\"div\",{className:\"group_admin\",children:/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'13px'},children:\"Group Manager\"})}):'']})]})},index);}),/*#__PURE__*/_jsx(\"div\",{className:\"participant\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{src:info.imageName}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",children:info.name}),sessionStorage['id']===selectedConversation.creatorId?/*#__PURE__*/_jsx(\"div\",{className:\"group_admin\",children:/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'13px'},children:\"Group Manager\"})}):'']})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"group_details_container leave\",onClick:function onClick(){return setDialogOpen(true);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"leaveGroup\",children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},children:/*#__PURE__*/_jsx(ExitToAppIcon,{style:{color:'darkred'},fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",style:{color:'darkRed',fontSize:'17px'},children:\"leave Group\"})]})})]}):'']})]}),/*#__PURE__*/_jsx(Dialog,{className:\"exit_group_dialog\",onClose:function onClose(){return setDialogOpen(false);},open:dialogOpen,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dialog_title\",children:\" are you sure you want to leave this group?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog_options_buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dialog_button\",onClick:function onClick(){return removeFromGroup();},children:\"yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dialog_button\",onClick:function onClick(){return setDialogOpen(false);},children:\"no\"})]})]})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"chat\",children:chatSide});}","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/components/chat.js"],"names":["React","useState","useEffect","useConversations","useUser","Avatar","IconButton","makeStyles","Modal","ChatBody","SendImageBody","CloseIcon","EditIcon","CheckIcon","InsertEmoticonIcon","Picker","PersonAdd","ExitToAppIcon","AddGroupMember","Dialog","useStyles","root","backgroundColor","Chat","selectedConversation","currentConversationIsConnected","typingFlag","setTypingFlag","showDetails","setShowDetails","UpdateConversation","imageFlag","setImageFlag","imageURL","setImageURL","EditGroupNameGlag","setEditGroupNameGlag","EditGroupDescriptionGlag","setEditGroupDescriptionGlag","emojiFlag","setEmojiFlag","Name","Text","setText","description","Description","setDescription","info","classes","modalOpen","setModalOpen","dialogOpen","setDialogOpen","onEmojiClick","event","emojiObject","emoji","onDescriptionEmojiClick","groupheader","returnValue","setTimeout","UsersInGroup","Participants","forEach","participant","index","length","name","chatBodyCallback","image","backToChatCallback","privateConversationHeader","changeGroupName","message","sessionStorage","timeSent","containsImage","containsRecord","recordURL","messages","Messages","push","updatedConversation","LastMasage","changeGroupDescription","LastMessage","removeFromGroup","closeModal","chatSide","ConversationImage","isGroup","paddingLeft","margin","height","width","display","flexDirection","e","padding","target","value","border","outline","fontSize","marginLeft","createdDate","marginRight","borderBottom","creatorId","cursor","map","flexGrow","alignItems","imageName","id","color"],"mappings":"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","sourcesContent":["import '../css/chat.css'\r\nimport '../css/sidebar.css'\r\nimport React from 'react'\r\nimport { useState,useEffect} from 'react'\r\nimport { useConversations } from '../contexts/conversationsprovider';\r\nimport { useUser } from '../contexts/userprovider';\r\nimport { Avatar ,IconButton,makeStyles,Modal} from '@material-ui/core'\r\nimport ChatBody from './chatbody';\r\nimport SendImageBody from './sendimagebody';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport Picker from 'emoji-picker-react';\r\nimport PersonAdd from '@material-ui/icons/PersonAdd';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AddGroupMember from './addgroupmember';\r\nimport Dialog from '@material-ui/core/Dialog';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\"\r\n    }\r\n  }\r\n});\r\n\r\n\r\nexport default function Chat() {\r\n\r\n    const {selectedConversation,currentConversationIsConnected,typingFlag,\r\n      setTypingFlag,showDetails,setShowDetails,UpdateConversation} = useConversations()\r\n    const [imageFlag,setImageFlag] =useState(false)\r\n    const [imageURL,setImageURL] =useState(false)\r\n    const [EditGroupNameGlag,setEditGroupNameGlag]=useState(false)\r\n    const [EditGroupDescriptionGlag,setEditGroupDescriptionGlag]=useState(false)\r\n    const [emojiFlag,setEmojiFlag]=useState(false)\r\n    const [Text,setText] = useState(selectedConversation.Name)\r\n    const [Description,setDescription] = useState(selectedConversation.description)\r\n    const {info} = useUser()\r\n    const classes = useStyles();\r\n    const [modalOpen, setModalOpen] = useState(false)\r\n    const [dialogOpen, setDialogOpen] = useState(false)\r\n\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n      setEditGroupNameGlag(false)\r\n      setEditGroupDescriptionGlag(false)\r\n      setEmojiFlag(false)\r\n\r\n    },[selectedConversation])\r\n\r\n\r\n    const onEmojiClick = (event, emojiObject) => {\r\n      setText(Text + emojiObject.emoji)\r\n    };\r\n\r\n    const onDescriptionEmojiClick = (event, emojiObject) => {\r\n      setDescription(Description + emojiObject.emoji)\r\n    };\r\n\r\n    \r\n\r\n    const groupheader = () =>\r\n    {\r\n      let returnValue = ''\r\n      if(typingFlag !== '')\r\n      {\r\n        returnValue = <div className='lastSeen'> {typingFlag} is typing...</div>\r\n        setTimeout(()=> setTypingFlag(''),1000)\r\n      }\r\n\r\n      else\r\n      {\r\n        let UsersInGroup = ''\r\n        selectedConversation.Participants.forEach((participant,index)=> \r\n        {\r\n            if(index ===  selectedConversation.Participants.length-1 )\r\n                UsersInGroup = UsersInGroup + participant.name\r\n            else\r\n                UsersInGroup= UsersInGroup + participant.name + ', '\r\n        })\r\n            \r\n        returnValue=  <div className='lastSeen'>{UsersInGroup} </div>\r\n\r\n      }\r\n\r\n      return returnValue\r\n    }\r\n\r\n    function chatBodyCallback(image)\r\n    {\r\n      setImageURL(image)\r\n      setImageFlag(true)\r\n    }\r\n\r\n    function backToChatCallback()\r\n    {\r\n      setImageURL(null)\r\n      setImageFlag(false)\r\n    }\r\n\r\n    const privateConversationHeader = () =>\r\n    {\r\n       let returnValue = ''\r\n       if(currentConversationIsConnected === '')\r\n       {\r\n        if(typingFlag !== '')\r\n        {\r\n            returnValue = <div className='lastSeen'> typing...</div>\r\n            setTimeout(()=> setTypingFlag(''),1000)\r\n\r\n        }\r\n\r\n        else returnValue = <div className='connected'><div className='circle'></div> online </div>\r\n            \r\n       }\r\n       else returnValue = <div className='lastSeen'>{currentConversationIsConnected}</div>\r\n\r\n\r\n      return returnValue\r\n\r\n    }\r\n\r\n    function changeGroupName()\r\n    {\r\n      let message={name:\"manager\",message: sessionStorage['name'] +\" changed group name to \" + Text,timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n      let messages=selectedConversation.Messages\r\n      messages.push(message)\r\n      let updatedConversation={...selectedConversation,Name:Text,Messages:messages,LastMasage:message}\r\n      UpdateConversation(updatedConversation)\r\n      setEditGroupNameGlag(false)\r\n\r\n    }\r\n\r\n    function changeGroupDescription()\r\n    {\r\n      let message={name:\"manager\",message: sessionStorage['name'] +\" changed group Description\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n      let messages=selectedConversation.Messages\r\n      messages.push(message)\r\n      let updatedConversation={...selectedConversation,description:Description,Messages:messages,LastMessage:message}\r\n      UpdateConversation(updatedConversation)\r\n      setEditGroupDescriptionGlag(false)\r\n\r\n    }\r\n\r\n  function removeFromGroup()\r\n  {\r\n    let message={name:\"manager\",message: sessionStorage['name'] +\" left the group\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n    let messages=selectedConversation.Messages\r\n    messages.push(message)\r\n    let updatedConversation={...selectedConversation,Messages:messages,LastMessage:message}\r\n    UpdateConversation(updatedConversation)\r\n    setDialogOpen(false)\r\n  }\r\n\r\n    function closeModal() {\r\n      setModalOpen(false)\r\n    }\r\n\r\n    const chatSide=\r\n    <div>\r\n       <div className='chat_header' onClick={()=>setShowDetails(true)}>\r\n         <Avatar src={selectedConversation.ConversationImage}/>\r\n         <div className='chat_header_info'>\r\n            <h2> {selectedConversation.Name} </h2> \r\n            {selectedConversation.isGroup?  groupheader() : privateConversationHeader()}\r\n\r\n         </div>\r\n       </div>\r\n\r\n       {imageFlag?   <SendImageBody imageURL={imageURL} backToChat={backToChatCallback}/>:<ChatBody imageCallback={chatBodyCallback}/>} \r\n   </div>\r\n\r\n    return (\r\n       \r\n          showDetails?\r\n           <div className='chat_with_details'>\r\n            <div className='chat narrow_chat'>\r\n            {chatSide}\r\n            </div>\r\n\r\n            <div className='chat_details'>\r\n            <div className='chat_details_top'>\r\n              <IconButton onClick={()=>setShowDetails(false)}>\r\n                 <CloseIcon fontSize='large'  />\r\n              </IconButton>\r\n              <h2 style={{paddingLeft:'10px'}}>{selectedConversation.isGroup? 'Group Details:' : 'Contact Details:' }</h2>\r\n            </div>\r\n\r\n\r\n            <span className='chat_details_body'>\r\n\r\n            <div className='user_info'>\r\n              <Avatar src={selectedConversation.ConversationImage} style={{margin:'20px',height:'140px',width:'140px'}}/>\r\n           \r\n              <span className='name_and_lastSeen'>\r\n                {selectedConversation.isGroup && EditGroupNameGlag?\r\n                   <div style={{display:'flex',flexDirection:'column'}}>\r\n                      {emojiFlag?  <Picker onEmojiClick={(e,emojiObject)=>onEmojiClick(e,emojiObject)} pickerStyle={{ width: '100%' ,height:'200px'}}/> : ''}\r\n                     <div className='edit_group_name'>\r\n                \r\n                     <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>changeGroupName()}><CheckIcon fontSize='large'/></IconButton>\r\n                     <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>setEmojiFlag(!emojiFlag)}><InsertEmoticonIcon fontSize='large'/></IconButton>\r\n                    \r\n                     <input defaultValue={Text} onChange={(e)=>setText(e.target.value)} style={{border:'none',outline:'none',width:'100%',backgroundColor:'transparent',padding:'5px'}}></input>\r\n                  </div>\r\n                  </div>:\r\n                <span className='group_title'>\r\n                   <h3>{selectedConversation.Name}</h3>\r\n                   {!selectedConversation.isGroup? '':<IconButton onClick={()=>setEditGroupNameGlag(true)}><EditIcon style={{fontSize:'large',marginLeft:'10px'}}/></IconButton>}\r\n                </span>\r\n           }\r\n                \r\n                 <span className='lastSeen' style={{padding:'10px',paddingLeft:'0px'}}> {!selectedConversation.isGroup? privateConversationHeader() :<span> created at:  {selectedConversation.createdDate} </span>}</span>\r\n              </span>\r\n             \r\n            </div>\r\n\r\n            \r\n\r\n            {selectedConversation.isGroup ?\r\n             <div>\r\n            <div className='group_details_container'>\r\n               <h2 className='group_title' style={{padding:'5px'}}> Description </h2>\r\n              {EditGroupDescriptionGlag?\r\n                \r\n                 <div style={{display:'flex',flexDirection:'column'}}>\r\n                 {emojiFlag?  <Picker onEmojiClick={(e,emojiObject)=>onDescriptionEmojiClick(e,emojiObject)} pickerStyle={{ width: '100%' ,height:'200px'}}/> : ''}\r\n                <div className='edit_group_name' style={{padding:'5px'}}>\r\n            \r\n                <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>changeGroupDescription()}><CheckIcon fontSize='large'/></IconButton>\r\n                <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>setEmojiFlag(!emojiFlag)}><InsertEmoticonIcon fontSize='large'/></IconButton>\r\n               \r\n                <input defaultValue={Description} onChange={(e)=>setDescription(e.target.value)} style={{border:'none',outline:'none',width:'100%',backgroundColor:'transparent',padding:'5px'}}></input>\r\n                </div>\r\n                </div>:\r\n              <div className='group_description_edit'>\r\n                \r\n                <span style={{fontSize:'15px',marginRight:'5px'}}>{selectedConversation.description}</span><IconButton onClick={()=>setEditGroupDescriptionGlag(true)}><EditIcon style={{fontSize:'large'}}/></IconButton>\r\n                </div>}\r\n             \r\n            </div>\r\n            \r\n            <div className='group_details_container'>\r\n            <h2 className='group_title' style={{ padding:'10px' ,borderBottom:'1px solid #B0B0B0'}}>{selectedConversation.Participants.length +1} participants</h2>\r\n            <Modal className='Modal' open={modalOpen} onClose={closeModal} >\r\n               <AddGroupMember closeModal={closeModal}  /> \r\n            </Modal>\r\n\r\n            {selectedConversation.creatorId===sessionStorage['id']?\r\n            <div className='participant' style={{cursor:'pointer',fontSize:'15px'}} onClick={()=>setModalOpen(true)} >\r\n\r\n              <Avatar>\r\n              <IconButton className={classes.root} style={{padding:'3px'}}><PersonAdd fontSize='large'/></IconButton>\r\n              </Avatar>\r\n              <h3 className='group_participant_name'>Add Member</h3>\r\n            </div>:''}\r\n            {selectedConversation.Participants.map((participant,index)=>\r\n            {\r\n              return(\r\n                 <div key={index} className='participant'>\r\n                   <div style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                 \r\n                   <Avatar src={participant.imageName}/>\r\n                   <div style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                   <h3 className='group_participant_name'>{participant.name}</h3>\r\n                   \r\n                   {participant.id===selectedConversation.creatorId?\r\n                    <div className='group_admin'>\r\n                      <h3 style={{fontSize:'13px'}}>Group Manager</h3>\r\n                   </div>:''}\r\n                   </div >\r\n                   </div>\r\n                 </div>)\r\n            })}\r\n\r\n                 <div  className='participant'>\r\n                   <div style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                 \r\n                   <Avatar src={info.imageName}/>\r\n                   <div style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                   <h3 className='group_participant_name'>{info.name}</h3>\r\n                   \r\n                   {sessionStorage['id']===selectedConversation.creatorId?\r\n                    <div className='group_admin'>\r\n                      <h3 style={{fontSize:'13px'}}>Group Manager</h3>\r\n                   </div>:''}\r\n                   </div >\r\n                   </div>\r\n                 </div>\r\n                </div>\r\n\r\n                <div className='group_details_container leave' onClick={()=>setDialogOpen(true)} >\r\n                  <div className='leaveGroup'>\r\n                     <IconButton className={classes.root} style={{padding:'3px'}} >\r\n                       <ExitToAppIcon style={{color:'darkred'}}fontSize='large'/>\r\n                     </IconButton>\r\n                     <h3 className='group_participant_name' style={{color:'darkRed',fontSize:'17px'}}>leave Group</h3>\r\n                  </div>\r\n                </div>\r\n           \r\n            </div>:''}\r\n\r\n        \r\n           \r\n            </span>\r\n            </div>\r\n             <Dialog className='exit_group_dialog' onClose={()=> setDialogOpen(false)}  open={dialogOpen}>\r\n               <div style={{padding:'10px'}}>\r\n                 <h2 className='dialog_title'> are you sure you want to leave this group?</h2>\r\n                 <div className='dialog_options_buttons'>\r\n                   <button className='dialog_button' onClick={()=>removeFromGroup()} >yes</button>\r\n                   <button className='dialog_button' onClick={()=>setDialogOpen(false)}>no</button>\r\n                 </div>\r\n                </div>\r\n            </Dialog>\r\n            </div>:\r\n          <div className='chat'>\r\n              {chatSide}\r\n          </div>\r\n\r\n          \r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}