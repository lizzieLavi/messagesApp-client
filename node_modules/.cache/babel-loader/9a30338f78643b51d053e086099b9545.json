{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\whatsapp\\\\myclient\\\\src\\\\components\\\\register.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport \"../css/login.css\";\nimport axios from \"axios\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport \"font-awesome/css/font-awesome.min.css\";\nimport { Avatar } from \"@material-ui/core\";\nimport AddAPhotoIcon from \"@material-ui/icons/AddAPhoto\";\nimport PeopleAltIcon from \"@material-ui/icons/PeopleAlt\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Register(props) {\n  _s();\n\n  const [phone, setPhone] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [Picture, setPicture] = useState(null);\n  const history = useHistory();\n  const [error, setError] = useState(\"\");\n  const [previewImage, setPreviewImage] = useState();\n\n  function getColor() {\n    return \"#\" + (Math.random() * 0xffffff << 0).toString(16);\n  } //get user information and token from DB\n\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    let picturePath = \"\";\n\n    if (Picture) {\n      const data = new FormData();\n      data.append(\"file\", Picture);\n      data.append(\"upload_preset\", \"whatsApp_clone\");\n      data.append(\"cloud_name\", \"dsrgpqnyv\");\n\n      try {\n        let response = await axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\", data);\n        picturePath = response.data.url;\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n    let randomColor = getColor();\n    let contacts = [];\n    let lizzie = await axios.get(\"https://messagesapp1.herokuapp.com/api/logIn/6155906ec8c1c80016e856e7\");\n    contacts = [...contacts, lizzie];\n    let obj = {\n      name: name,\n      phone: phone,\n      imageName: picturePath,\n      contacts: contacts,\n      LastSeen: \"last seen at...\",\n      Status: \"hello,i'm using Message-App!\",\n      color: randomColor\n    };\n\n    try {\n      const response = await axios.post(\"https://messagesapp1.herokuapp.com/api/logIn/Register\", obj);\n\n      if (response.data.status === \"error\") {\n        setError(response.data.message);\n      } else {\n        sessionStorage[\"config\"] = response.data.token;\n        sessionStorage[\"id\"] = response.data.User._id;\n        sessionStorage[\"name\"] = response.data.User.name;\n        props.CanLogIn(response.data.User._id);\n        history.push(\"/App\");\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  function handleFileUpload(e) {\n    setPicture(e.target.files[0]);\n    setPreviewImage(window.URL.createObjectURL(e.target.files[0]));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login_form\",\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"con\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"head-form\",\n          style: {\n            marginBottom: \"0px\",\n            paddingBottom: \"0px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"welcome to my whatsApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field-set\",\n          children: [previewImage ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"change_group_image\",\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              src: previewImage,\n              style: {\n                height: \"140px\",\n                width: \"140px\",\n                backgroundColor: \"gray\",\n                margin: \"15px\",\n                marginTop: \"30px\"\n              },\n              children: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"change_image_on_hover\",\n              style: {\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                position: \"absolute\",\n                zIndex: \"1\",\n                color: \"white\",\n                curser: \"pointer\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(AddAPhotoIcon, {\n                style: {\n                  height: \"30px\",\n                  width: \"30px\",\n                  color: \"white\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                accept: \"image/*\",\n                id: \"file\",\n                type: \"file\",\n                name: \"file\",\n                onChange: handleFileUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"10px\"\n                },\n                children: \"Change Picture \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"add_Profile_Picture\",\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                height: \"140px\",\n                width: \"140px\",\n                backgroundColor: \"gray\",\n                margin: \"15px\",\n                marginTop: \"30px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(PeopleAltIcon, {\n                style: {\n                  position: \"absolute\",\n                  zIndex: \"0\",\n                  opacity: \"0.1\",\n                  height: \"80px\",\n                  width: \"80px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\",\n                  position: \"absolute\",\n                  zIndex: \"1\",\n                  color: \"white\",\n                  curser: \"pointer\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(AddAPhotoIcon, {\n                  style: {\n                    height: \"30px\",\n                    width: \"30px\",\n                    color: \"white\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  accept: \"image/*\",\n                  id: \"file\",\n                  type: \"file\",\n                  name: \"file\",\n                  onChange: handleFileUpload\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: \"10px\"\n                  },\n                  children: \"Add Profile Picture\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"input-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa fa-user-circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-input\",\n              id: \"txt-input\",\n              type: \"text\",\n              placeholder: \"@UserName\",\n              onChange: e => setName(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"input-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa fa-key\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-input\",\n              type: \"password\",\n              placeholder: \"Password\",\n              id: \"pwd\",\n              name: \"password\",\n              onChange: e => setPhone(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"log-in\",\n            type: \"submit\",\n            children: [\" \", \"Register\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"submits sign-up defaultLink\",\n            to: `/`,\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              style: {\n                margin: \"7px\"\n              },\n              class: \"fa fa-user-plus\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), \"back to Log In\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: \"15px\"\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Register, \"5wetmPfbp9mFlRVjJBJot9ZfP0k=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/components/register.js"],"names":["useState","axios","Link","useHistory","Avatar","AddAPhotoIcon","PeopleAltIcon","Register","props","phone","setPhone","name","setName","Picture","setPicture","history","error","setError","previewImage","setPreviewImage","getColor","Math","random","toString","handleSubmit","e","preventDefault","picturePath","data","FormData","append","response","post","url","err","console","log","randomColor","contacts","lizzie","get","obj","imageName","LastSeen","Status","color","status","message","sessionStorage","token","User","_id","CanLogIn","push","handleFileUpload","target","files","window","URL","createObjectURL","marginBottom","paddingBottom","height","width","backgroundColor","margin","marginTop","display","flexDirection","alignItems","position","zIndex","curser","fontSize","opacity","value"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport \"../css/login.css\";\r\nimport axios from \"axios\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport AddAPhotoIcon from \"@material-ui/icons/AddAPhoto\";\r\nimport PeopleAltIcon from \"@material-ui/icons/PeopleAlt\";\r\n\r\nfunction Register(props) {\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [Picture, setPicture] = useState(null);\r\n  const history = useHistory();\r\n  const [error, setError] = useState(\"\");\r\n  const [previewImage, setPreviewImage] = useState();\r\n\r\n  function getColor() {\r\n    return \"#\" + ((Math.random() * 0xffffff) << 0).toString(16);\r\n  }\r\n\r\n  //get user information and token from DB\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    let picturePath = \"\";\r\n\r\n    if (Picture) {\r\n      const data = new FormData();\r\n      data.append(\"file\", Picture);\r\n      data.append(\"upload_preset\", \"whatsApp_clone\");\r\n      data.append(\"cloud_name\", \"dsrgpqnyv\");\r\n\r\n      try {\r\n        let response = await axios.post(\r\n          \"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",\r\n          data\r\n        );\r\n        picturePath = response.data.url;\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n\r\n    let randomColor = getColor();\r\n\r\n    let contacts = [];\r\n    let lizzie = await axios.get(\r\n      \"https://messagesapp1.herokuapp.com/api/logIn/6155906ec8c1c80016e856e7\"\r\n    );\r\n    contacts = [...contacts, lizzie];\r\n\r\n    let obj = {\r\n      name: name,\r\n      phone: phone,\r\n      imageName: picturePath,\r\n      contacts: contacts,\r\n      LastSeen: \"last seen at...\",\r\n      Status: \"hello,i'm using Message-App!\",\r\n      color: randomColor,\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://messagesapp1.herokuapp.com/api/logIn/Register\",\r\n        obj\r\n      );\r\n      if (response.data.status === \"error\") {\r\n        setError(response.data.message);\r\n      } else {\r\n        sessionStorage[\"config\"] = response.data.token;\r\n        sessionStorage[\"id\"] = response.data.User._id;\r\n        sessionStorage[\"name\"] = response.data.User.name;\r\n\r\n        props.CanLogIn(response.data.User._id);\r\n\r\n        history.push(\"/App\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  function handleFileUpload(e) {\r\n    setPicture(e.target.files[0]);\r\n    setPreviewImage(window.URL.createObjectURL(e.target.files[0]));\r\n  }\r\n\r\n  return (\r\n    <div className=\"overlay\">\r\n      <form className=\"login_form\" onSubmit={handleSubmit}>\r\n        <div className=\"con\">\r\n          <header\r\n            className=\"head-form\"\r\n            style={{ marginBottom: \"0px\", paddingBottom: \"0px\" }}\r\n          >\r\n            <h2>Register</h2>\r\n            <p>welcome to my whatsApp</p>\r\n          </header>\r\n          <div className=\"field-set\">\r\n            {previewImage ? (\r\n              <div className=\"change_group_image\">\r\n                <Avatar\r\n                  src={previewImage}\r\n                  style={{\r\n                    height: \"140px\",\r\n                    width: \"140px\",\r\n                    backgroundColor: \"gray\",\r\n                    margin: \"15px\",\r\n                    marginTop: \"30px\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                </Avatar>\r\n                <div\r\n                  className=\"change_image_on_hover\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\",\r\n                    alignItems: \"center\",\r\n                    position: \"absolute\",\r\n                    zIndex: \"1\",\r\n                    color: \"white\",\r\n                    curser: \"pointer\",\r\n                  }}\r\n                >\r\n                  <AddAPhotoIcon\r\n                    style={{ height: \"30px\", width: \"30px\", color: \"white\" }}\r\n                  />\r\n                  <input\r\n                    accept=\"image/*\"\r\n                    id=\"file\"\r\n                    type=\"file\"\r\n                    name=\"file\"\r\n                    onChange={handleFileUpload}\r\n                  />\r\n                  <span style={{ fontSize: \"10px\" }}>Change Picture </span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"add_Profile_Picture\">\r\n                <Avatar\r\n                  style={{\r\n                    height: \"140px\",\r\n                    width: \"140px\",\r\n                    backgroundColor: \"gray\",\r\n                    margin: \"15px\",\r\n                    marginTop: \"30px\",\r\n                  }}\r\n                >\r\n                  <PeopleAltIcon\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      zIndex: \"0\",\r\n                      opacity: \"0.1\",\r\n                      height: \"80px\",\r\n                      width: \"80px\",\r\n                    }}\r\n                  />\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      alignItems: \"center\",\r\n                      position: \"absolute\",\r\n                      zIndex: \"1\",\r\n                      color: \"white\",\r\n                      curser: \"pointer\",\r\n                    }}\r\n                  >\r\n                    <AddAPhotoIcon\r\n                      style={{ height: \"30px\", width: \"30px\", color: \"white\" }}\r\n                    />\r\n                    <input\r\n                      accept=\"image/*\"\r\n                      id=\"file\"\r\n                      type=\"file\"\r\n                      name=\"file\"\r\n                      onChange={handleFileUpload}\r\n                    />\r\n                    <span style={{ fontSize: \"10px\" }}>\r\n                      Add Profile Picture\r\n                    </span>\r\n                  </div>\r\n                </Avatar>\r\n              </div>\r\n            )}\r\n            <span className=\"input-item\">\r\n              <i class=\"fa fa-user-circle\"></i>\r\n              <input\r\n                className=\"form-input\"\r\n                id=\"txt-input\"\r\n                type=\"text\"\r\n                placeholder=\"@UserName\"\r\n                onChange={(e) => setName(e.target.value)}\r\n                required\r\n              />\r\n            </span>\r\n            <span className=\"input-item\">\r\n              <i class=\"fa fa-key\"></i>\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                id=\"pwd\"\r\n                name=\"password\"\r\n                onChange={(e) => setPhone(e.target.value)}\r\n                required\r\n              />\r\n            </span>\r\n            <button className=\"log-in\" type=\"submit\">\r\n              {\" \"}\r\n              Register{\" \"}\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <Link className=\"submits sign-up defaultLink\" to={`/`}>\r\n              {\" \"}\r\n              <i\r\n                style={{ margin: \"7px\" }}\r\n                class=\"fa fa-user-plus\"\r\n                aria-hidden=\"true\"\r\n              />\r\n              back to Log In\r\n            </Link>\r\n          </div>\r\n          <span style={{ fontSize: \"15px\" }}>{error}</span>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}