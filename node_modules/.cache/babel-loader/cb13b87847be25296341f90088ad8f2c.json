{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'../css/profiledetails.css';import axios from'axios';import{useUser}from'../contexts/userprovider';import{Avatar,IconButton,makeStyles}from'@material-ui/core';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import AddAPhotoIcon from'@material-ui/icons/AddAPhoto';import EditIcon from'@material-ui/icons/Edit';import CheckIcon from'@material-ui/icons/Check';import InsertEmoticonIcon from'@material-ui/icons/InsertEmoticon';import Picker from'emoji-picker-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({root:{\"&:hover\":{backgroundColor:\"transparent\"}}});function ProfileDetails(_ref){var backToConversations=_ref.backToConversations;var _useUser=useUser(),info=_useUser.info,contacts=_useUser.contacts,setInfo=_useUser.setInfo,config=_useUser.config;var _useState=useState(info.imageName),_useState2=_slicedToArray(_useState,2),previewImage=_useState2[0],setPreviewImage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editNameFlag=_useState4[0],setEditNameFlag=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editStatusFlag=_useState6[0],setEditStatusFlag=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),emojiFlag=_useState8[0],setEmojiFlag=_useState8[1];var _useState9=useState(info.name),_useState10=_slicedToArray(_useState9,2),Text=_useState10[0],setText=_useState10[1];var _useState11=useState(info.status),_useState12=_slicedToArray(_useState11,2),Status=_useState12[0],setStatus=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),statusEmojiFlag=_useState14[0],setStatusEmojiFlag=_useState14[1];var classes=useStyles();//add emoji to name\nvar _onEmojiClick=function onEmojiClick(event,emojiObject){setText(function(prevText){return prevText+emojiObject.emoji;});};//add emoji to status\nvar onStatusEmojiClick=function onStatusEmojiClick(event,emojiObject){setStatus(function(prevStatus){return prevStatus+emojiObject.emoji;});};//change profile picture  \nfunction handleFileUpload(_x){return _handleFileUpload.apply(this,arguments);}function _handleFileUpload(){_handleFileUpload=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var picturePath,data,response,obj,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:picturePath='';data=new FormData();data.append('file',e.target.files[0]);data.append(\"upload_preset\",\"whatsApp_clone\");data.append(\"cloud_name\",\"dsrgpqnyv\");_context.prev=5;_context.next=8;return axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",data);case 8:response=_context.sent;picturePath=response.data.url;_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 15:obj={name:info.name,phone:info.phone,imageName:picturePath,contacts:contacts,LastSeen:info.lastSeen,Status:info.Status};_context.prev=16;_context.next=19;return axios.put(\"https://messagesapp1.herokuapp.com/api/logIn/\"+sessionStorage['id'],obj,config);case 19:_response=_context.sent;if(_response.data==='Updated')setInfo(obj);_context.next=26;break;case 23:_context.prev=23;_context.t1=_context[\"catch\"](16);console.log(_context.t1);case 26:setPreviewImage(window.URL.createObjectURL(e.target.files[0]));case 27:case\"end\":return _context.stop();}}},_callee,null,[[5,12],[16,23]]);}));return _handleFileUpload.apply(this,arguments);}function changeProfileName(){return _changeProfileName.apply(this,arguments);}function _changeProfileName(){_changeProfileName=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var obj,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:obj={name:Text,phone:info.phone,imageName:info.imageName,contacts:contacts,LastSeen:info.LastSeen,Status:info.Status};_context2.prev=1;_context2.next=4;return axios.put(\"https://messagesapp1.herokuapp.com/api/logIn/\"+sessionStorage['id'],obj,config);case 4:response=_context2.sent;if(response.data==='Updated')setInfo(obj);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:setEmojiFlag(false);setEditNameFlag(false);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _changeProfileName.apply(this,arguments);}function changeProfileStatus(){return _changeProfileStatus.apply(this,arguments);}function _changeProfileStatus(){_changeProfileStatus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var obj,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:obj={name:info.name,phone:info.phone,imageName:info.imageName,contacts:contacts,LastSeen:info.LastSeen,Status:Status};_context3.prev=1;_context3.next=4;return axios.put(\"https://messagesapp1.herokuapp.com/api/logIn/\"+sessionStorage['id'],obj,config);case 4:response=_context3.sent;if(response.data==='Updated')setInfo(obj);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 11:setStatusEmojiFlag(false);setEditStatusFlag(false);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return _changeProfileStatus.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"show_details\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"profile_title\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"title_and_back_to_conversations\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return backToConversations();},children:/*#__PURE__*/_jsx(ArrowBackIcon,{style:{height:'30px',width:'30px'}})}),/*#__PURE__*/_jsx(\"h2\",{className:\"title_h2\",children:\" Profile \"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_details_body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_pic\",children:[/*#__PURE__*/_jsx(Avatar,{src:previewImage,style:{height:'170px',width:'170px',backgroundColor:'gray',margin:'15px',marginTop:'30px'},children:\" \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"change_image_on_hover\",style:{display:'flex',flexDirection:'column',alignItems:'center',position:'absolute',zIndex:'1',color:'white',curser:'pointer'},children:[/*#__PURE__*/_jsx(AddAPhotoIcon,{style:{height:'30px',width:'30px',color:'white'}}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",id:\"file\",type:\"file\",name:\"file\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px'},children:\"Change Picture \"})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"profile_details\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"edit_title\",children:\"your name:\"}),editNameFlag?/*#__PURE__*/_jsxs(\"div\",{children:[emojiFlag?/*#__PURE__*/_jsx(Picker,{onEmojiClick:function onEmojiClick(e,emojiObject){return _onEmojiClick(e,emojiObject);},pickerStyle:{width:'100%',height:'200px'}}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"edit_group_name\",style:{margin:'10px',padding:'5px'},children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return changeProfileName();},children:/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return setEmojiFlag(!emojiFlag);},children:/*#__PURE__*/_jsx(InsertEmoticonIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input_text\",defaultValue:Text,onChange:function onChange(e){return setText(e.target.value);}})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"edit_details\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setEditNameFlag(true);},children:/*#__PURE__*/_jsx(EditIcon,{style:{fontSize:'large'}})}),/*#__PURE__*/_jsx(\"h3\",{children:info.name})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"profile_details\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"edit_title\",children:\"status:\"}),editStatusFlag?/*#__PURE__*/_jsxs(\"div\",{children:[emojiFlag?/*#__PURE__*/_jsx(Picker,{onEmojiClick:function onEmojiClick(e,emojiObject){return onStatusEmojiClick(e,emojiObject);},pickerStyle:{width:'100%',height:'200px'}}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"edit_group_name\",style:{margin:'10px',padding:'5px'},children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return changeProfileStatus();},children:/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return setStatusEmojiFlag(!statusEmojiFlag);},children:/*#__PURE__*/_jsx(InsertEmoticonIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input_text\",defaultValue:Status,onChange:function onChange(e){return setStatus(e.target.value);}})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"edit_details\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setEditStatusFlag(true);},children:/*#__PURE__*/_jsx(EditIcon,{style:{fontSize:'large'}})}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'15px'},children:info.Status})]})]})]})]});}export default ProfileDetails;","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/components/profiledetails.js"],"names":["React","useState","axios","useUser","Avatar","IconButton","makeStyles","ArrowBackIcon","AddAPhotoIcon","EditIcon","CheckIcon","InsertEmoticonIcon","Picker","useStyles","root","backgroundColor","ProfileDetails","backToConversations","info","contacts","setInfo","config","imageName","previewImage","setPreviewImage","editNameFlag","setEditNameFlag","editStatusFlag","setEditStatusFlag","emojiFlag","setEmojiFlag","name","Text","setText","status","Status","setStatus","statusEmojiFlag","setStatusEmojiFlag","classes","onEmojiClick","event","emojiObject","prevText","emoji","onStatusEmojiClick","prevStatus","handleFileUpload","e","picturePath","data","FormData","append","target","files","post","response","url","console","log","obj","phone","LastSeen","lastSeen","put","sessionStorage","window","URL","createObjectURL","changeProfileName","changeProfileStatus","height","width","margin","marginTop","display","flexDirection","alignItems","position","zIndex","color","curser","fontSize","padding","value"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport '../css/profiledetails.css'\r\nimport axios from 'axios';\r\nimport {useUser } from '../contexts/userprovider';\r\nimport {Avatar, IconButton,makeStyles } from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport Picker from 'emoji-picker-react';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n      \"&:hover\": {\r\n        backgroundColor: \"transparent\"\r\n  \r\n      }}\r\n    });\r\n\r\nfunction ProfileDetails({backToConversations}) \r\n{\r\n  const {info,contacts,setInfo,config} = useUser()\r\n  const [previewImage,setPreviewImage]=useState(info.imageName)\r\n  const [editNameFlag,setEditNameFlag] = useState(false)\r\n  const [editStatusFlag,setEditStatusFlag] = useState(false)\r\n  const [emojiFlag,setEmojiFlag]=useState(false)\r\n  const [Text,setText] = useState(info.name)\r\n  const [Status,setStatus] = useState(info.status)\r\n  const [statusEmojiFlag,setStatusEmojiFlag]=useState(false)\r\n  const classes = useStyles();\r\n\r\n\r\n  //add emoji to name\r\n  const onEmojiClick = (event, emojiObject) => \r\n  {\r\n    setText(prevText => prevText + emojiObject.emoji)\r\n  };\r\n\r\n\r\n  //add emoji to status\r\n  const onStatusEmojiClick = (event, emojiObject) => \r\n  {\r\n    setStatus(prevStatus => prevStatus + emojiObject.emoji)\r\n  };\r\n\r\n  //change profile picture  \r\n  async function handleFileUpload(e)\r\n  {\r\n\r\n    let picturePath=''\r\n    \r\n    const data = new FormData()\r\n    data.append('file',e.target.files[0])\r\n    data.append(\"upload_preset\",\"whatsApp_clone\")\r\n    data.append(\"cloud_name\",\"dsrgpqnyv\")\r\n       \r\n    try\r\n    {\r\n      let response = await axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",data)\r\n      picturePath =response.data.url\r\n\r\n    }catch(err){console.log(err)}\r\n\r\n    let obj = {name: info.name,phone: info.phone,imageName:picturePath,contacts:contacts,LastSeen:info.lastSeen,Status:info.Status}\r\n\r\n    try\r\n    {\r\n      let response = await axios.put(\"https://messagesapp1.herokuapp.com/api/logIn/\" + sessionStorage['id'],obj,config)\r\n\r\n      if(response.data==='Updated')\r\n        setInfo(obj)\r\n\r\n    }catch(err){console.log(err)}\r\n\r\n      setPreviewImage(window.URL.createObjectURL(e.target.files[0]))\r\n\r\n  }\r\n\r\n  async function changeProfileName()\r\n  {\r\n    let obj = {name: Text,phone: info.phone,imageName:info.imageName,contacts:contacts,LastSeen:info.LastSeen,Status:info.Status}\r\n    try\r\n    {\r\n      let response = await axios.put(\"https://messagesapp1.herokuapp.com/api/logIn/\" + sessionStorage['id'],obj,config)\r\n      if(response.data==='Updated')\r\n        setInfo(obj)\r\n\r\n    }catch(err){console.log(err)}\r\n\r\n      setEmojiFlag(false)\r\n      setEditNameFlag(false)\r\n\r\n  }\r\n\r\n  async function changeProfileStatus()\r\n  {\r\n    let obj = {name:info.name,phone: info.phone,imageName:info.imageName,contacts:contacts,LastSeen:info.LastSeen,Status:Status}\r\n    try\r\n    {\r\n      let response = await axios.put(\"https://messagesapp1.herokuapp.com/api/logIn/\" + sessionStorage['id'],obj,config)\r\n\r\n      if(response.data==='Updated')\r\n        setInfo(obj)\r\n\r\n    }catch(err){console.log(err)}\r\n\r\n    setStatusEmojiFlag(false)\r\n    setEditStatusFlag(false)\r\n\r\n  }\r\n\r\n    return (\r\n        <div className='show_details'>\r\n            <header className='profile_title'>\r\n              <div className='title_and_back_to_conversations'>\r\n                <IconButton onClick={()=>backToConversations()}>\r\n                   <ArrowBackIcon style={{height:'30px',width:'30px'}}  />\r\n                </IconButton>\r\n                <h2 className='title_h2'> Profile </h2>\r\n              </div>\r\n\r\n            </header>\r\n\r\n            <div className='profile_details_body'>\r\n\r\n              <div className='profile_pic'>\r\n                 <Avatar  src={previewImage} style={{height: '170px', width: '170px' ,backgroundColor:'gray' ,margin:'15px',marginTop:'30px'}}> </Avatar>\r\n                 <div className='change_image_on_hover' style={{display:'flex',flexDirection:'column',alignItems:'center',position:'absolute',zIndex:'1',color:'white',curser:'pointer'}}>\r\n                     <AddAPhotoIcon  style={{height: '30px', width: '30px' ,color:'white'}}/>\r\n                     <input accept=\"image/*\" id=\"file\" type=\"file\" name=\"file\" onChange={handleFileUpload}/>\r\n                     <span style={{fontSize:'10px'}}>Change Picture </span>\r\n                 </div>\r\n              </div>\r\n\r\n              <span className='profile_details'>\r\n                <h3 className='edit_title'>your name:</h3>\r\n                {editNameFlag?\r\n                   <div>\r\n                      {emojiFlag?  <Picker onEmojiClick={(e,emojiObject)=>onEmojiClick(e,emojiObject)} pickerStyle={{ width: '100%' ,height:'200px'}}/> : ''}\r\n                      <div className='edit_group_name' style={{margin:'10px',padding:'5px'}}>\r\n                        <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>changeProfileName()}>\r\n                          <CheckIcon fontSize='large'/>\r\n                        </IconButton>\r\n                        <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>setEmojiFlag(!emojiFlag)}>\r\n                          <InsertEmoticonIcon fontSize='large'/>\r\n                        </IconButton>\r\n                        <input className='input_text' defaultValue={Text} onChange={(e)=>setText(e.target.value)} ></input>\r\n                      </div>\r\n                    </div>\r\n                    :\r\n                    <div className='edit_details'>\r\n                      <IconButton onClick={()=>setEditNameFlag(true)}>\r\n                        <EditIcon style={{fontSize:'large'}}/>\r\n                      </IconButton>\r\n                      <h3>{info.name}</h3>\r\n                    </div>}\r\n                  </span>\r\n\r\n              <span className='profile_details'>\r\n\r\n              <h3 className='edit_title'>status:</h3>\r\n              {editStatusFlag?\r\n                <div>\r\n                  {emojiFlag?  <Picker onEmojiClick={(e,emojiObject)=>onStatusEmojiClick(e,emojiObject)} pickerStyle={{ width: '100%' ,height:'200px'}}/> : ''}\r\n                  <div className='edit_group_name' style={{margin:'10px',padding:'5px'}}>\r\n                    <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>changeProfileStatus()}>\r\n                      <CheckIcon fontSize='large'/>\r\n                    </IconButton>\r\n                    <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>setStatusEmojiFlag(!statusEmojiFlag)}>\r\n                      <InsertEmoticonIcon fontSize='large'/>\r\n                    </IconButton>\r\n                    <input className='input_text' defaultValue={Status} onChange={(e)=>setStatus(e.target.value)} ></input>\r\n                  </div>\r\n                </div>:\r\n                <div className='edit_details'>\r\n                  <IconButton onClick={()=>setEditStatusFlag(true)}>\r\n                    <EditIcon style={{fontSize:'large'}}/>\r\n                  </IconButton>\r\n                  <h3 style={{fontSize:'15px'}}>{info.Status}</h3>\r\n                </div>}\r\n              </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileDetails\r\n"]},"metadata":{},"sourceType":"module"}