{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import'../css/sidebar.css';import axios from'axios';import{useState,useEffect}from'react';import{useConversations}from'../contexts/conversationsprovider';import{useUser}from'../contexts/userprovider';import{Avatar,IconButton,makeStyles,Modal}from'@material-ui/core';import CloseIcon from'@material-ui/icons/Close';import EditIcon from'@material-ui/icons/Edit';import CheckIcon from'@material-ui/icons/Check';import InsertEmoticonIcon from'@material-ui/icons/InsertEmoticon';import Picker from'emoji-picker-react';import PersonAdd from'@material-ui/icons/PersonAdd';import ExitToAppIcon from'@material-ui/icons/ExitToApp';import AddGroupMember from'./addgroupmember';import Dialog from'@material-ui/core/Dialog';import AddAPhotoIcon from'@material-ui/icons/AddAPhoto';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({root:{\"&:hover\":{backgroundColor:\"transparent\"}}});function ShowGroupDetails(){var _useConversations=useConversations(),selectedConversation=_useConversations.selectedConversation,createConversation=_useConversations.createConversation,conversations=_useConversations.conversations,setSelectedConversation=_useConversations.setSelectedConversation,UpdateConversation=_useConversations.UpdateConversation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),EditGroupNameGlag=_useState2[0],setEditGroupNameGlag=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),EditGroupDescriptionGlag=_useState4[0],setEditGroupDescriptionGlag=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),emojiFlag=_useState6[0],setEmojiFlag=_useState6[1];var _useState7=useState(selectedConversation.Name),_useState8=_slicedToArray(_useState7,2),Text=_useState8[0],setText=_useState8[1];var _useState9=useState(selectedConversation.description),_useState10=_slicedToArray(_useState9,2),Description=_useState10[0],setDescription=_useState10[1];var _useUser=useUser(),info=_useUser.info;var classes=useStyles();var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),modalOpen=_useState12[0],setModalOpen=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),dialogOpen=_useState14[0],setDialogOpen=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),deleteUserDialog=_useState16[0],setDeleteUserDialog=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),userToDelete=_useState18[0],setUserToDelete=_useState18[1];var _useState19=useState(selectedConversation.ConversationImage),_useState20=_slicedToArray(_useState19,2),previewImage=_useState20[0],setPreviewImage=_useState20[1];useEffect(function(){setEditGroupNameGlag(false);setEditGroupDescriptionGlag(false);setEmojiFlag(false);},[selectedConversation]);var _onEmojiClick=function onEmojiClick(event,emojiObject){setText(Text+emojiObject.emoji);};var onDescriptionEmojiClick=function onDescriptionEmojiClick(event,emojiObject){setDescription(Description+emojiObject.emoji);};function changeGroupName(){var message={name:\"manager\",message:info.name+\" changed group name to \"+Text,timeSent:'',containsImage:false,containsRecord:false,recordURL:null};var messages=selectedConversation.Messages;messages.push(message);var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{Name:Text,Messages:messages,LastMasage:message});UpdateConversation(updatedConversation);setEditGroupNameGlag(false);}function openConversation(participant){var existsFlag=false;conversations.forEach(function(conversation){if(conversation.isGroup===false&&conversation.Participants[0].id===participant.id){existsFlag=true;setSelectedConversation(conversation);}});if(!existsFlag){var participantId=[];participantId.push(participant.id);createConversation(participantId,participant.name,participant.imageName,false);}}function changeGroupDescription(){var message={name:\"manager\",message:info.name+\" changed group Description\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null};var messages=selectedConversation.Messages;messages.push(message);var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{description:Description,Messages:messages,LastMessage:message});UpdateConversation(updatedConversation);setEditGroupDescriptionGlag(false);}function removeFromGroup(){var message={name:\"manager\",message:info.name+\" left the group\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null};var messages=selectedConversation.Messages;messages.push(message);var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{Messages:messages,LastMessage:message});UpdateConversation(updatedConversation);setDialogOpen(false);}function beforeDeleteUser(participant){setUserToDelete(participant);setDeleteUserDialog(true);}function removeUserFromGroup(){var messages=selectedConversation.Messages;var message={name:\"manager\",message:info.name+\" removed \"+userToDelete.name+\" from the group \",timeSent:'',containsImage:false,containsRecord:false,recordURL:null};messages.push(message);var participants=selectedConversation.Participants.filter(function(participant){return participant.id!==userToDelete.id;});var updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{Participants:participants,Messages:messages,LastMessage:message});UpdateConversation(updatedConversation);setUserToDelete();setDeleteUserDialog(false);}function closeModal(){setModalOpen(false);}function handleFileUpload(_x){return _handleFileUpload.apply(this,arguments);}function _handleFileUpload(){_handleFileUpload=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var picturePath,data,response,messages,message,updatedConversation;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPreviewImage(window.URL.createObjectURL(e.target.files[0]));picturePath='';data=new FormData();data.append('file',e.target.files[0]);data.append(\"upload_preset\",\"whatsApp_clone\");data.append(\"cloud_name\",\"dsrgpqnyv\");_context.prev=6;_context.next=9;return axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",data);case 9:response=_context.sent;picturePath=response.data.url;_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);console.log(_context.t0);case 16:messages=selectedConversation.Messages;message={name:\"manager\",message:info.name+\" changed group picture\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null};messages.push(message);updatedConversation=_objectSpread(_objectSpread({},selectedConversation),{},{ConversationImage:picturePath,Messages:messages,LastMessage:message});UpdateConversation(updatedConversation);case 21:case\"end\":return _context.stop();}}},_callee,null,[[6,13]]);}));return _handleFileUpload.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user_info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"change_group_image\",children:[/*#__PURE__*/_jsx(Avatar,{src:previewImage,style:{height:'150px',width:'150px',backgroundColor:'gray',margin:'15px',marginTop:'30px'},children:\" \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"change_image_on_hover\",style:{display:'flex',flexDirection:'column',alignItems:'center',position:'absolute',zIndex:'1',color:'white',curser:'pointer'},children:[/*#__PURE__*/_jsx(AddAPhotoIcon,{style:{height:'30px',width:'30px',color:'white'}}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",id:\"file\",type:\"file\",name:\"file\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px'},children:\"Change Picture \"})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"name_and_lastSeen\",children:[EditGroupNameGlag?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[emojiFlag?/*#__PURE__*/_jsx(Picker,{onEmojiClick:function onEmojiClick(e,emojiObject){return _onEmojiClick(e,emojiObject);},pickerStyle:{width:'100%',height:'200px'}}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"edit_group_name\",children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return changeGroupName();},children:/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return setEmojiFlag(!emojiFlag);},children:/*#__PURE__*/_jsx(InsertEmoticonIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input_text\",defaultValue:Text,onChange:function onChange(e){return setText(e.target.value);}})]})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"group_title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedConversation.Name}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setEditGroupNameGlag(true);},children:/*#__PURE__*/_jsx(EditIcon,{style:{fontSize:'large',marginLeft:'10px'}})})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"lastSeen\",style:{padding:'10px',paddingLeft:'0px'},children:[\" created at:  \",selectedConversation.createdDate,\" \"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group_details_container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"group_title\",style:{padding:'5px'},children:\" Description \"}),EditGroupDescriptionGlag?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column'},children:[emojiFlag?/*#__PURE__*/_jsx(Picker,{onEmojiClick:function onEmojiClick(e,emojiObject){return onDescriptionEmojiClick(e,emojiObject);},pickerStyle:{width:'100%',height:'200px'}}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"edit_group_name\",style:{padding:'5px'},children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return changeGroupDescription();},children:/*#__PURE__*/_jsx(CheckIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},onClick:function onClick(){return setEmojiFlag(!emojiFlag);},children:/*#__PURE__*/_jsx(InsertEmoticonIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"input_text\",defaultValue:Description,onChange:function onChange(e){return setDescription(e.target.value);}})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"group_description_edit\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'15px',marginRight:'5px'},children:selectedConversation.description}),/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setEditGroupDescriptionGlag(true);},children:/*#__PURE__*/_jsx(EditIcon,{style:{fontSize:'large'}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group_details_container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"group_title\",style:{padding:'10px',borderBottom:'1px solid #B0B0B0'},children:[selectedConversation.Participants.length+1,\" participants\"]}),/*#__PURE__*/_jsx(Modal,{className:\"Modal\",open:modalOpen,onClose:closeModal,children:/*#__PURE__*/_jsx(AddGroupMember,{closeModal:closeModal})}),selectedConversation.creatorId===sessionStorage['id']?/*#__PURE__*/_jsxs(\"div\",{className:\"participant\",style:{cursor:'pointer',fontSize:'15px'},onClick:function onClick(){return setModalOpen(true);},children:[/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},children:/*#__PURE__*/_jsx(PersonAdd,{fontSize:\"large\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",children:\"Add Member\"})]}):'',selectedConversation.Participants.map(function(participant,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"participant\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return openConversation(participant);},style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center',cursor:'pointer'},children:[/*#__PURE__*/_jsx(Avatar,{src:participant.imageName}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",children:participant.name}),participant.id===selectedConversation.creatorId?/*#__PURE__*/_jsx(\"div\",{className:\"group_admin\",children:/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'13px'},children:\"Group Manager\"})}):'']})]}),sessionStorage['id']===selectedConversation.creatorId?/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return beforeDeleteUser(participant);},style:{padding:'3px'},children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"medium\"})}):'']},index);}),/*#__PURE__*/_jsx(\"div\",{className:\"participant\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{src:info.imageName}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",children:info.name}),sessionStorage['id']===selectedConversation.creatorId?/*#__PURE__*/_jsx(\"div\",{className:\"group_admin\",children:/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'13px'},children:\"Group Manager\"})}):'']})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"group_details_container leave\",onClick:function onClick(){return setDialogOpen(true);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"leaveGroup\",children:[/*#__PURE__*/_jsx(IconButton,{className:classes.root,style:{padding:'3px'},children:/*#__PURE__*/_jsx(ExitToAppIcon,{style:{color:'darkred'},fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"group_participant_name\",style:{color:'darkRed',fontSize:'17px'},children:\"leave Group\"})]})}),/*#__PURE__*/_jsx(Dialog,{className:\"exit_group_dialog\",onClose:function onClose(){return setDialogOpen(false);},open:dialogOpen,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dialog_title\",children:\" are you sure you want to leave this group?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog_options_buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dialog_button\",onClick:function onClick(){return removeFromGroup();},children:\"yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dialog_button\",onClick:function onClick(){return setDialogOpen(false);},children:\"no\"})]})]})}),/*#__PURE__*/_jsx(Dialog,{className:\"exit_group_dialog\",onClose:function onClose(){return setDeleteUserDialog(false);},open:deleteUserDialog,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"dialog_title\",children:\" are you sure you want to delete this user?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog_options_buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dialog_button\",onClick:function onClick(){return removeUserFromGroup();},children:\"yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dialog_button\",onClick:function onClick(){return setDeleteUserDialog(false);},children:\"no\"})]})]})})]});}export default ShowGroupDetails;","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/components/showgroupdetails.js"],"names":["React","axios","useState","useEffect","useConversations","useUser","Avatar","IconButton","makeStyles","Modal","CloseIcon","EditIcon","CheckIcon","InsertEmoticonIcon","Picker","PersonAdd","ExitToAppIcon","AddGroupMember","Dialog","AddAPhotoIcon","useStyles","root","backgroundColor","ShowGroupDetails","selectedConversation","createConversation","conversations","setSelectedConversation","UpdateConversation","EditGroupNameGlag","setEditGroupNameGlag","EditGroupDescriptionGlag","setEditGroupDescriptionGlag","emojiFlag","setEmojiFlag","Name","Text","setText","description","Description","setDescription","info","classes","modalOpen","setModalOpen","dialogOpen","setDialogOpen","deleteUserDialog","setDeleteUserDialog","userToDelete","setUserToDelete","ConversationImage","previewImage","setPreviewImage","onEmojiClick","event","emojiObject","emoji","onDescriptionEmojiClick","changeGroupName","message","name","timeSent","containsImage","containsRecord","recordURL","messages","Messages","push","updatedConversation","LastMasage","openConversation","participant","existsFlag","forEach","conversation","isGroup","Participants","id","participantId","imageName","changeGroupDescription","LastMessage","removeFromGroup","beforeDeleteUser","removeUserFromGroup","participants","filter","closeModal","handleFileUpload","e","window","URL","createObjectURL","target","files","picturePath","data","FormData","append","post","response","url","console","log","height","width","margin","marginTop","display","flexDirection","alignItems","position","zIndex","color","curser","fontSize","padding","value","marginLeft","paddingLeft","createdDate","marginRight","borderBottom","length","creatorId","sessionStorage","cursor","map","index","flexGrow"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport '../css/sidebar.css'\r\nimport axios from 'axios';\r\nimport { useState,useEffect} from 'react'\r\nimport { useConversations } from '../contexts/conversationsprovider';\r\nimport { useUser } from '../contexts/userprovider';\r\nimport { Avatar ,IconButton,makeStyles,Modal} from '@material-ui/core'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport Picker from 'emoji-picker-react';\r\nimport PersonAdd from '@material-ui/icons/PersonAdd';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport AddGroupMember from './addgroupmember';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n      \"&:hover\": {\r\n        backgroundColor: \"transparent\"\r\n  \r\n      }}\r\n    });\r\n  \r\n\r\nfunction ShowGroupDetails() {\r\n\r\n    const {selectedConversation,createConversation,conversations,setSelectedConversation,UpdateConversation} = useConversations()\r\n    const [EditGroupNameGlag,setEditGroupNameGlag]=useState(false)\r\n    const [EditGroupDescriptionGlag,setEditGroupDescriptionGlag]=useState(false)\r\n    const [emojiFlag,setEmojiFlag]=useState(false)\r\n    const [Text,setText] = useState(selectedConversation.Name)\r\n    const [Description,setDescription] = useState(selectedConversation.description)\r\n    const {info} = useUser()\r\n    const classes = useStyles();\r\n    const [modalOpen, setModalOpen] = useState(false)\r\n    const [dialogOpen, setDialogOpen] = useState(false)\r\n    const [deleteUserDialog,setDeleteUserDialog]= useState(false)\r\n    const [userToDelete,setUserToDelete] = useState()\r\n    const [previewImage,setPreviewImage]=useState(selectedConversation.ConversationImage)\r\n\r\n\r\n       \r\n    useEffect(()=>\r\n    {\r\n        setEditGroupNameGlag(false)\r\n        setEditGroupDescriptionGlag(false)\r\n        setEmojiFlag(false)\r\n\r\n    },[selectedConversation])\r\n  \r\n  \r\n    const onEmojiClick = (event, emojiObject) =>\r\n    {\r\n        setText(Text + emojiObject.emoji)\r\n    };\r\n  \r\n    const onDescriptionEmojiClick = (event, emojiObject) =>\r\n    {\r\n        setDescription(Description + emojiObject.emoji)\r\n    };\r\n  \r\n    function changeGroupName()\r\n    {\r\n        let message={name:\"manager\",message: info.name +\" changed group name to \" + Text,timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n        let messages=selectedConversation.Messages\r\n        messages.push(message)\r\n        let updatedConversation={...selectedConversation,Name:Text,Messages:messages,LastMasage:message}\r\n        UpdateConversation(updatedConversation)\r\n        setEditGroupNameGlag(false)\r\n    }\r\n  \r\n    function openConversation(participant)\r\n    {\r\n        let existsFlag=false\r\n\r\n        conversations.forEach(conversation=>\r\n        {\r\n            if(conversation.isGroup === false && conversation.Participants[0].id === participant.id)\r\n            {\r\n              existsFlag=true\r\n              setSelectedConversation(conversation)\r\n            }\r\n              \r\n        })\r\n\r\n        if(!existsFlag)\r\n        {\r\n            let participantId=[]\r\n            participantId.push(participant.id)\r\n            createConversation(participantId, participant.name, participant.imageName,false)\r\n        }\r\n        \r\n    }\r\n  \r\n    function changeGroupDescription()\r\n    {\r\n         let message={name:\"manager\",message: info.name +\" changed group Description\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n         let messages=selectedConversation.Messages\r\n         messages.push(message)\r\n         let updatedConversation={...selectedConversation,description:Description,Messages:messages,LastMessage:message}\r\n         UpdateConversation(updatedConversation)\r\n         setEditGroupDescriptionGlag(false)\r\n    }\r\n  \r\n    function removeFromGroup()\r\n    {\r\n       let message={name:\"manager\",message: info.name +\" left the group\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n       let messages=selectedConversation.Messages\r\n       messages.push(message)\r\n       let updatedConversation={...selectedConversation,Messages:messages,LastMessage:message}\r\n       UpdateConversation(updatedConversation)\r\n       setDialogOpen(false)\r\n    }\r\n  \r\n    function beforeDeleteUser(participant)\r\n    {\r\n       setUserToDelete(participant)\r\n       setDeleteUserDialog(true)\r\n    }\r\n  \r\n    function removeUserFromGroup()\r\n    {\r\n       let messages=selectedConversation.Messages\r\n       let message={name:\"manager\",message: info.name +\" removed \" + userToDelete.name + \" from the group \",timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n       messages.push(message)\r\n       let participants= selectedConversation.Participants.filter(participant=> participant.id !== userToDelete.id)\r\n       let updatedConversation={...selectedConversation,Participants:participants,Messages:messages,LastMessage:message}\r\n       UpdateConversation(updatedConversation)\r\n       setUserToDelete()\r\n       setDeleteUserDialog(false)\r\n    }\r\n  \r\n    function closeModal()\r\n    {\r\n       setModalOpen(false)\r\n    }\r\n\r\n    async function handleFileUpload(e)\r\n    {\r\n       setPreviewImage(window.URL.createObjectURL(e.target.files[0]))\r\n        let picturePath=''\r\n    \r\n        const data = new FormData()\r\n        data.append('file',e.target.files[0])\r\n        data.append(\"upload_preset\",\"whatsApp_clone\")\r\n        data.append(\"cloud_name\",\"dsrgpqnyv\")\r\n       \r\n        try\r\n        {\r\n          let response = await axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",data)\r\n          picturePath =response.data.url\r\n\r\n        }catch(err){console.log(err)}\r\n\r\n\r\n        let messages=selectedConversation.Messages\r\n        let message={name:\"manager\",message: info.name +\" changed group picture\",timeSent:'',containsImage:false,containsRecord:false,recordURL:null}\r\n        messages.push(message)\r\n        let updatedConversation={...selectedConversation,ConversationImage:picturePath,Messages:messages,LastMessage:message}    \r\n        UpdateConversation(updatedConversation)\r\n\r\n\r\n        \r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n           <div className='user_info'>\r\n              <div className='change_group_image'> \r\n                 <Avatar  src={previewImage} style={{height: '150px', width: '150px' ,backgroundColor:'gray' ,margin:'15px',marginTop:'30px'}}> </Avatar>\r\n                 <div className='change_image_on_hover' style={{display:'flex',flexDirection:'column',alignItems:'center',position:'absolute',zIndex:'1',color:'white',curser:'pointer'}}>\r\n                    <AddAPhotoIcon  style={{height: '30px', width: '30px' ,color:'white'}}/>\r\n                    <input accept=\"image/*\" id=\"file\" type=\"file\" name=\"file\" onChange={handleFileUpload}/>\r\n                    <span style={{fontSize:'10px'}}>Change Picture </span>\r\n                 </div>\r\n              </div>\r\n              <span className='name_and_lastSeen'>\r\n                {EditGroupNameGlag?\r\n                   <div style={{display:'flex',flexDirection:'column'}}>\r\n                     {emojiFlag?  <Picker onEmojiClick={(e,emojiObject)=>onEmojiClick(e,emojiObject)} pickerStyle={{ width: '100%' ,height:'200px'}}/> : ''}\r\n                     <div className='edit_group_name'>\r\n                        <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>changeGroupName()}>\r\n                           <CheckIcon fontSize='large'/>\r\n                        </IconButton>\r\n                        <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>setEmojiFlag(!emojiFlag)}>\r\n                            <InsertEmoticonIcon fontSize='large'/>\r\n                        </IconButton>\r\n                       <input className='input_text' defaultValue={Text} onChange={(e)=>setText(e.target.value)}></input>\r\n                     </div>\r\n                  </div>:\r\n                  <span className='group_title'>\r\n                     <h3>{selectedConversation.Name}</h3>\r\n                     <IconButton onClick={()=>setEditGroupNameGlag(true)}>\r\n                         <EditIcon style={{fontSize:'large',marginLeft:'10px'}}/>\r\n                     </IconButton>\r\n                  </span>}\r\n                \r\n                 <span className='lastSeen' style={{padding:'10px',paddingLeft:'0px'}}> created at:  {selectedConversation.createdDate} </span>\r\n              </span>\r\n            </div>\r\n\r\n            <div className='group_details_container'>\r\n               <h2 className='group_title' style={{padding:'5px'}}> Description </h2>\r\n              {EditGroupDescriptionGlag?\r\n                <div style={{display:'flex',flexDirection:'column'}}>\r\n                  {emojiFlag?  <Picker onEmojiClick={(e,emojiObject)=>onDescriptionEmojiClick(e,emojiObject)} pickerStyle={{ width: '100%' ,height:'200px'}}/> : ''}\r\n                  <div className='edit_group_name' style={{padding:'5px'}}>\r\n                    <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>changeGroupDescription()}>\r\n                        <CheckIcon fontSize='large'/>\r\n                     </IconButton>\r\n                    <IconButton className={classes.root} style={{padding:'3px'}} onClick={()=>setEmojiFlag(!emojiFlag)}><InsertEmoticonIcon fontSize='large'/></IconButton>\r\n                    <input className='input_text' defaultValue={Description} onChange={(e)=>setDescription(e.target.value)} ></input>\r\n                  </div>\r\n                </div>:\r\n                <div className='group_description_edit'>\r\n                  <span style={{fontSize:'15px',marginRight:'5px'}}>\r\n                      {selectedConversation.description}\r\n                  </span>\r\n                  <IconButton onClick={()=>setEditGroupDescriptionGlag(true)}>\r\n                      <EditIcon style={{fontSize:'large'}}/>\r\n                  </IconButton>\r\n                </div>}\r\n             \r\n            </div>\r\n\r\n            <div className='group_details_container'>\r\n               <h2 className='group_title' style={{ padding:'10px' ,borderBottom:'1px solid #B0B0B0'}}>\r\n                   {selectedConversation.Participants.length +1} participants\r\n               </h2>\r\n               <Modal className='Modal' open={modalOpen} onClose={closeModal} >\r\n                  <AddGroupMember closeModal={closeModal}  /> \r\n               </Modal>\r\n\r\n               {selectedConversation.creatorId===sessionStorage['id']?\r\n                   <div className='participant' style={{cursor:'pointer',fontSize:'15px'}} onClick={()=>setModalOpen(true)} >\r\n                      <Avatar>\r\n                         <IconButton className={classes.root} style={{padding:'3px'}}>\r\n                            <PersonAdd fontSize='large'/>\r\n                         </IconButton>\r\n                      </Avatar>\r\n                      <h3 className='group_participant_name'>Add Member</h3>\r\n                   </div>:''}\r\n\r\n               {selectedConversation.Participants.map((participant,index)=>\r\n               {\r\n                  return(\r\n                   <div  key={index} className='participant' >\r\n                     <div onClick={()=>openConversation(participant)} style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center',cursor:'pointer'}}>\r\n                         <Avatar src={participant.imageName}/>\r\n                         <div  style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                           <h3 className='group_participant_name'>{participant.name}</h3>\r\n                           {participant.id===selectedConversation.creatorId?\r\n                             <div className='group_admin'>\r\n                                <h3 style={{fontSize:'13px'}}>Group Manager</h3>\r\n                             </div>\r\n                           :''}\r\n                         </div >\r\n                     </div>\r\n                     {sessionStorage['id'] === selectedConversation.creatorId?\r\n                        <IconButton  onClick={()=>beforeDeleteUser(participant)} style={{padding:'3px'}}>\r\n                          <CloseIcon fontSize='medium'/>\r\n                        </IconButton>\r\n                     :''}\r\n                   </div>)\r\n                })}\r\n\r\n                <div  className='participant'>\r\n                   <div style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                     <Avatar src={info.imageName}/>\r\n                     <div style={{display:'flex',flexGrow:'1',flexDirection:'row',alignItems:'center'}}>\r\n                         <h3 className='group_participant_name'>{info.name}</h3>\r\n                         {sessionStorage['id']===selectedConversation.creatorId?\r\n                           <div className='group_admin'>\r\n                               <h3 style={{fontSize:'13px'}}>Group Manager</h3>\r\n                           </div>\r\n                          :''}\r\n                     </div >\r\n                   </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='group_details_container leave' onClick={()=>setDialogOpen(true)} >\r\n                <div className='leaveGroup'>\r\n                    <IconButton className={classes.root} style={{padding:'3px'}} >\r\n                      <ExitToAppIcon style={{color:'darkred'}}fontSize='large'/>\r\n                    </IconButton>\r\n                     <h3 className='group_participant_name' style={{color:'darkRed',fontSize:'17px'}}>leave Group</h3>\r\n                </div>\r\n            </div>\r\n\r\n            <Dialog className='exit_group_dialog' onClose={()=> setDialogOpen(false)}  open={dialogOpen}>\r\n               <div style={{padding:'10px'}}>\r\n                 <h2 className='dialog_title'> are you sure you want to leave this group?</h2>\r\n                 <div className='dialog_options_buttons'>\r\n                   <button className='dialog_button' onClick={()=>removeFromGroup()} >yes</button>\r\n                   <button className='dialog_button' onClick={()=>setDialogOpen(false)}>no</button>\r\n                 </div>\r\n                </div>\r\n            </Dialog>\r\n\r\n\r\n            <Dialog className='exit_group_dialog' onClose={()=> setDeleteUserDialog(false)}  open={deleteUserDialog}>\r\n               <div style={{padding:'10px'}}>\r\n                 <h2 className='dialog_title'> are you sure you want to delete this user?</h2>\r\n                 <div className='dialog_options_buttons'>\r\n                   <button className='dialog_button' onClick={()=>removeUserFromGroup()} >yes</button>\r\n                   <button className='dialog_button' onClick={()=>setDeleteUserDialog(false)}>no</button>\r\n                 </div>\r\n                </div>\r\n            </Dialog>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ShowGroupDetails\r\n"]},"metadata":{},"sourceType":"module"}