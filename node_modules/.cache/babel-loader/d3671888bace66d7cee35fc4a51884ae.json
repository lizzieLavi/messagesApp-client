{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useRef,useEffect}from'react';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";var SocketContext=/*#__PURE__*/React.createContext();export function useSocket(){return useContext(SocketContext);}export function SocketProvider(_ref){var userId=_ref.userId,children=_ref.children;var socket=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ConnectedUsers=_useState2[0],setConnectedUsers=_useState2[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:socket.current=io(\"wss://messagesapp1.herokuapp.com:443/\");case 1:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);useEffect(function(){function fetchData(){return _fetchData2.apply(this,arguments);}function _fetchData2(){_fetchData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:socket.current.emit(\"AddUser\",sessionStorage['id']);socket.current.on(\"getConnectedUsers\",function(users){setConnectedUsers(users);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchData2.apply(this,arguments);}fetchData();},[userId]);return/*#__PURE__*/_jsx(SocketContext.Provider,{value:{socket:socket,ConnectedUsers:ConnectedUsers},children:children});}","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/contexts/socketprovider.js"],"names":["React","useState","useContext","useRef","useEffect","io","SocketContext","createContext","useSocket","SocketProvider","userId","children","socket","ConnectedUsers","setConnectedUsers","fetchData","current","emit","sessionStorage","on","users"],"mappings":"kfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAAyBC,UAAzB,CAAoCC,MAApC,CAA2CC,SAA3C,KAA2D,OAA3D,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,C,2CAEA,GAAMC,CAAAA,aAAa,cAAGN,KAAK,CAACO,aAAN,EAAtB,CAEA,MAAO,SAASC,CAAAA,SAAT,EACP,CACE,MAAON,CAAAA,UAAU,CAACI,aAAD,CAAjB,CACD,CAED,MAAO,SAASG,CAAAA,cAAT,MACP,IADiCC,CAAAA,MACjC,MADiCA,MACjC,CADyCC,QACzC,MADyCA,QACzC,CAEE,GAAMC,CAAAA,MAAM,CAAGT,MAAM,EAArB,CACA,cAA0CF,QAAQ,CAAC,EAAD,CAAlD,wCAAOY,cAAP,eAAsBC,iBAAtB,eAEAV,SAAS,CAAC,UACV,SACiBW,CAAAA,SADjB,qIACE,mIACGH,MAAM,CAACI,OAAP,CAAiBX,EAAE,CAAC,uCAAD,CAAnB,CADH,sDADF,4CAKEU,SAAS,GAEV,CARQ,CAQP,EARO,CAAT,CAUFX,SAAS,CAAC,UACV,SACiBW,CAAAA,SADjB,wIACE,wIAEEH,MAAM,CAACI,OAAP,CAAeC,IAAf,CAAoB,SAApB,CAA8BC,cAAc,CAAC,IAAD,CAA5C,EACAN,MAAM,CAACI,OAAP,CAAeG,EAAf,CAAkB,mBAAlB,CAAuC,SAAAC,KAAK,CAC5C,CACEN,iBAAiB,CAACM,KAAD,CAAjB,CACD,CAHD,EAHF,wDADF,6CAUEL,SAAS,GAEV,CAbQ,CAaP,CAACL,MAAD,CAbO,CAAT,CAeE,mBACE,KAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAE,CAACE,MAAM,CAANA,MAAD,CAAQC,cAAc,CAAdA,cAAR,CAA/B,UACGF,QADH,EADF,CAKD","sourcesContent":["import React, { useState,useContext,useRef,useEffect} from 'react'\r\nimport io from 'socket.io-client'\r\n\r\nconst SocketContext = React.createContext()\r\n\r\nexport function useSocket() \r\n{\r\n  return useContext(SocketContext)\r\n}\r\n\r\nexport function SocketProvider({ userId, children }) \r\n{\r\n\r\n  const socket = useRef()\r\n  const [ConnectedUsers,setConnectedUsers] =useState([])\r\n\r\n  useEffect(()=>\r\n  {\r\n    async function fetchData() {\r\n       socket.current = io(\"wss://messagesapp1.herokuapp.com:443/\");\r\n    }\r\n\r\n    fetchData()\r\n\r\n  },[])\r\n\r\nuseEffect(()=>\r\n{\r\n  async function fetchData() \r\n  {\r\n    socket.current.emit(\"AddUser\",sessionStorage['id'])\r\n    socket.current.on(\"getConnectedUsers\", users =>\r\n    {\r\n      setConnectedUsers(users)\r\n    })\r\n  }\r\n\r\n  fetchData();\r\n\r\n},[userId])\r\n\r\n  return (\r\n    <SocketContext.Provider value={{socket,ConnectedUsers}}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}