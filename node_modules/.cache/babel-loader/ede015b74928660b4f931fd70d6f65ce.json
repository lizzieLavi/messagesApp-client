{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\whatsapp\\\\myclient\\\\src\\\\components\\\\login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport '../css/login.css';\nimport { v4 as uuidV4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LogIn(props) {\n  _s();\n\n  const [phone, setPhone] = useState('');\n  const [UserName, setUserName] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    sessionStorage['id'] = Id;\n    sessionStorage['name'] = UserName;\n    props.GetLoginID(Id);\n  }\n  /*get user information and token from DB*/\n\n\n  async function handleSubmit(e) {\n    let obj = {\n      name: userName,\n      phone: phone\n    };\n    let user = await axios.post(\"http://localhost:5000//api/logIn\", obj);\n\n    if (user.data !== \"not found\") {\n      sessionStorage[\"token\"] = user.data.token;\n      sessionStorage[\"userName\"] = user.data.User.UserName;\n      sessionStorage[\"authenticate\"] = true;\n      let UserDetails = await axios.get(\"https://cinemaws.herokuapp.com/api/users/CurrentUserData/\" + user.data.User._id, {\n        'headers': {\n          'x-access-token': user.data.token\n        }\n      });\n      let allData = {\n        UserDetails: UserDetails.data.UserData,\n        UserLogin: user.data.User,\n        UserPermissions: UserDetails.data.UserPermissions\n      };\n      if (user.data.User.UserName === 'ADMIN') sessionStorage['type'] = 'ADMIN';else sessionStorage['type'] = 'REGULAR';\n      props.LogInCallback(allData);\n\n      if (sessionStorage[\"type\"] === 'ADMIN') {\n        history.push('/AdminMenu');\n      } else if (sessionStorage[\"type\"] === 'REGULAR') {\n        history.push('/Menu');\n      }\n    } else setError(\"One or more of your identification details is incorrect.\");\n  }\n\n  function pictureUpload() {}\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"LogInPage\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"logInBorder\",\n      children: [\"enter your phone:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setPhone(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }, this), \"enter your name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setUserName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \" Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: pictureUpload,\n        children: \" Upload Picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LogIn, \"4lKmaXcLUA0J5MlpT9CT2E9GQ6E=\");\n\n_c = LogIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"LogIn\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/components/login.js"],"names":["React","useState","v4","uuidV4","LogIn","props","phone","setPhone","UserName","setUserName","handleSubmit","e","preventDefault","sessionStorage","Id","GetLoginID","obj","name","userName","user","axios","post","data","token","User","UserDetails","get","_id","allData","UserData","UserLogin","UserPermissions","LogInCallback","history","push","setError","pictureUpload","target","value"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport '../css/login.css'\r\nimport {v4 as uuidV4} from 'uuid'\r\n\r\n\r\nexport default function LogIn(props) {\r\n\r\n    const [phone,setPhone] = useState('');\r\n    const [UserName,setUserName] = useState('');\r\n\r\n    function handleSubmit(e) \r\n    {\r\n       e.preventDefault()\r\n       sessionStorage['id'] = Id\r\n       sessionStorage['name'] =UserName\r\n       props.GetLoginID(Id)\r\n    }\r\n    \r\n\r\n\r\n    /*get user information and token from DB*/\r\n    async function handleSubmit(e)\r\n    {\r\n        let obj = {name: userName,phone: phone}\r\n        let user = await axios.post(\"http://localhost:5000//api/logIn\",obj)\r\n\r\n \r\n        if(user.data !== \"not found\")\r\n        {\r\n           sessionStorage[\"token\"]  =user.data.token\r\n           sessionStorage[\"userName\"]=user.data.User.UserName\r\n           sessionStorage[\"authenticate\"] = true\r\n              \r\n           let UserDetails = await axios.get(\"https://cinemaws.herokuapp.com/api/users/CurrentUserData/\"+ user.data.User._id,{'headers': {'x-access-token': user.data.token}})\r\n           let allData = {UserDetails:UserDetails.data.UserData,UserLogin:user.data.User,UserPermissions:UserDetails.data.UserPermissions }\r\n           if(user.data.User.UserName === 'ADMIN')\r\n             sessionStorage['type'] = 'ADMIN'\r\n           else \r\n             sessionStorage['type'] = 'REGULAR'\r\n\r\n\r\n           props.LogInCallback(allData)\r\n\r\n\r\n           if(sessionStorage[\"type\"]  === 'ADMIN')\r\n           {\r\n              history.push('/AdminMenu')\r\n           }\r\n\r\n           else if(sessionStorage[\"type\"]  === 'REGULAR')\r\n           {\r\n              history.push('/Menu')\r\n           }\r\n\r\n        }\r\n        \r\n        else\r\n           setError(\"One or more of your identification details is incorrect.\")\r\n\r\n\r\n\r\n    }\r\n\r\n    function pictureUpload()\r\n    {\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"LogInPage\">\r\n            <form onSubmit={handleSubmit} className='logInBorder'>\r\n             enter your phone:  \r\n              <input type='text' onChange={(e)=> setPhone(e.target.value)}/> \r\n              enter your name: \r\n              <input type='text' onChange={(e)=> setUserName(e.target.value)}/>  \r\n              <button type='submit'> Login</button>\r\n              <button onClick={pictureUpload}> Upload Picture</button>\r\n            </form>     \r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}