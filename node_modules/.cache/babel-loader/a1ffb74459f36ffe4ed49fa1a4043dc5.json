{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Desktop\\\\whatsapp\\\\myclient\\\\src\\\\contexts\\\\socketprovider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useContext, useRef, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SocketContext = /*#__PURE__*/React.createContext();\nexport function useSocket() {\n  _s();\n\n  return useContext(SocketContext);\n}\n\n_s(useSocket, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function SocketProvider({\n  userId,\n  children\n}) {\n  _s2();\n\n  const socket = useRef();\n  const [ConnectedUsers, setConnectedUsers] = useState([]);\n  useEffect(() => {\n    async function fetchData() {\n      socket.current = io(\"wss://messagesapp1.herokuapp.com:443/\");\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      socket.current.emit(\"AddUser\", sessionStorage['id']);\n      socket.current.on(\"getConnectedUsers\", users => {\n        console.log(users);\n        setConnectedUsers(users);\n      });\n    }\n\n    fetchData();\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: {\n      socket,\n      ConnectedUsers\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(SocketProvider, \"h7/nhGhkBWbq9QQttHQA44bay84=\");\n\n_c = SocketProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/contexts/socketprovider.js"],"names":["React","useState","useContext","useRef","useEffect","io","SocketContext","createContext","useSocket","SocketProvider","userId","children","socket","ConnectedUsers","setConnectedUsers","fetchData","current","emit","sessionStorage","on","users","console","log"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAAyBC,UAAzB,EAAoCC,MAApC,EAA2CC,SAA3C,QAA2D,OAA3D;AACA,OAAOC,EAAP,MAAe,kBAAf;;AAEA,MAAMC,aAAa,gBAAGN,KAAK,CAACO,aAAN,EAAtB;AAEA,OAAO,SAASC,SAAT,GACP;AAAA;;AACE,SAAON,UAAU,CAACI,aAAD,CAAjB;AACD;;GAHeE,S;;AAKhB,OAAO,SAASC,cAAT,CAAwB;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAxB,EACP;AAAA;;AAEE,QAAMC,MAAM,GAAGT,MAAM,EAArB;AACA,QAAM,CAACU,cAAD,EAAgBC,iBAAhB,IAAoCb,QAAQ,CAAC,EAAD,CAAlD;AAEAG,EAAAA,SAAS,CAAC,MACV;AACE,mBAAeW,SAAf,GAA2B;AACxBH,MAAAA,MAAM,CAACI,OAAP,GAAiBX,EAAE,CAAC,uCAAD,CAAnB;AACF;;AAEDU,IAAAA,SAAS;AAEV,GARQ,EAQP,EARO,CAAT;AAUFX,EAAAA,SAAS,CAAC,MACV;AACE,mBAAeW,SAAf,GACA;AACEH,MAAAA,MAAM,CAACI,OAAP,CAAeC,IAAf,CAAoB,SAApB,EAA8BC,cAAc,CAAC,IAAD,CAA5C;AACAN,MAAAA,MAAM,CAACI,OAAP,CAAeG,EAAf,CAAkB,mBAAlB,EAAuCC,KAAK,IAC5C;AACEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAN,QAAAA,iBAAiB,CAACM,KAAD,CAAjB;AACD,OAJD;AAKD;;AAEDL,IAAAA,SAAS;AAEV,GAdQ,EAcP,CAACL,MAAD,CAdO,CAAT;AAgBE,sBACE,QAAC,aAAD,CAAe,QAAf;AAAwB,IAAA,KAAK,EAAE;AAACE,MAAAA,MAAD;AAAQC,MAAAA;AAAR,KAA/B;AAAA,cACGF;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;IArCeF,c;;KAAAA,c","sourcesContent":["import React, { useState,useContext,useRef,useEffect} from 'react'\r\nimport io from 'socket.io-client'\r\n\r\nconst SocketContext = React.createContext()\r\n\r\nexport function useSocket() \r\n{\r\n  return useContext(SocketContext)\r\n}\r\n\r\nexport function SocketProvider({ userId, children }) \r\n{\r\n\r\n  const socket = useRef()\r\n  const [ConnectedUsers,setConnectedUsers] =useState([])\r\n\r\n  useEffect(()=>\r\n  {\r\n    async function fetchData() {\r\n       socket.current = io(\"wss://messagesapp1.herokuapp.com:443/\");\r\n    }\r\n\r\n    fetchData()\r\n\r\n  },[])\r\n\r\nuseEffect(()=>\r\n{\r\n  async function fetchData() \r\n  {\r\n    socket.current.emit(\"AddUser\",sessionStorage['id'])\r\n    socket.current.on(\"getConnectedUsers\", users =>\r\n    {\r\n      console.log(users)\r\n      setConnectedUsers(users)\r\n    })\r\n  }\r\n\r\n  fetchData();\r\n\r\n},[userId])\r\n\r\n  return (\r\n    <SocketContext.Provider value={{socket,ConnectedUsers}}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}