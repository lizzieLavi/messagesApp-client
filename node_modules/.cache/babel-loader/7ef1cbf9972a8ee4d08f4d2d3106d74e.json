{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/User/OneDrive/Desktop/whatsapp/myclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import'../css/login.css';import axios from'axios';import{Link,useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),phone=_useState2[0],setPhone=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),Picture=_useState6[0],setPicture=_useState6[1];var history=useHistory();/*get user information and token from DB*/function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var picturePath,data,response,obj,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();picturePath='';data=new FormData();data.append('file',Picture);data.append(\"upload_preset\",\"whatsApp_clone\");data.append(\"cloud_name\",\"dsrgpqnyv\");_context.prev=6;_context.next=9;return axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",data);case 9:response=_context.sent;picturePath=response.data.url;_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);console.log(_context.t0);case 16:obj={name:name,phone:phone,imageName:picturePath,contacts:[],LastSeen:'last seen at...'};_context.prev=17;_context.next=20;return axios.post(\"https://messagesapp1.herokuapp.com/api/logIn/Register\",obj);case 20:_response=_context.sent;sessionStorage['config']=_response.data.token;sessionStorage['id']=_response.data.User._id;sessionStorage['name']=_response.data.User.name;props.CanLogIn(_response.data.User._id);history.push('/App');_context.next=31;break;case 28:_context.prev=28;_context.t1=_context[\"catch\"](17);console.log(_context.t1);case 31:case\"end\":return _context.stop();}}},_callee,null,[[6,13],[17,28]]);}));return _handleSubmit.apply(this,arguments);}function handleFileUpload(e){setPicture(e.target.files[0]);}return/*#__PURE__*/_jsxs(\"div\",{className:\"overlay\",children:[/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:\"http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css\"}),/*#__PURE__*/_jsx(\"form\",{className:\"login_form\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"con\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"head-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsx(\"p\",{children:\"welcome to  my whatsApp\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field-set\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"input-item\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-user-circle\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",id:\"txt-input\",type:\"text\",placeholder:\"@UserName\",onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"input-item\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-key\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",placeholder:\"Password\",id:\"pwd\",name:\"password\",onChange:function onChange(e){return setPhone(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{id:\"fileupload\",children:/*#__PURE__*/_jsx(\"div\",{className:\"myfileupload-buttonbar \",children:/*#__PURE__*/_jsxs(\"label\",{className:\"myui-button\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-upload\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:\"Add Picture\"}),/*#__PURE__*/_jsx(\"input\",{id:\"file\",type:\"file\",name:\"file\",onChange:handleFileUpload})]})})}),/*#__PURE__*/_jsx(\"button\",{className:\"log-in\",type:\"submit\",children:\" Register \"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn submits sign-up\",children:[/*#__PURE__*/_jsx(Link,{className:\"defaultLink\",to:\"/\",children:\"back to Log In\"}),/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-user-plus\",\"aria-hidden\":\"true\"})]})})]})})]});/*      <div className=\"LogInPage\">\r\n             <form onSubmit={handleSubmit} className='logInBorder'>\r\n             enter your phone:  \r\n              <input type='text' onChange={(e)=> setPhone(e.target.value)}/> \r\n              enter your name: \r\n              <input type='text' onChange={(e)=> setName(e.target.value)}/>  \r\n              \r\n              <input type=\"file\" onChange={handleFileUpload} />\r\n                <button type='submit'> Sign Up</button>\r\n            </form>     \r\n        </div>*/}export default Register;","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/whatsapp/myclient/src/components/register.js"],"names":["useState","axios","Link","useHistory","Register","props","phone","setPhone","name","setName","Picture","setPicture","history","handleSubmit","e","preventDefault","picturePath","data","FormData","append","post","response","url","console","log","obj","imageName","contacts","LastSeen","sessionStorage","token","User","_id","CanLogIn","push","handleFileUpload","target","files","value"],"mappings":"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","sourcesContent":["import {useState} from 'react'\r\nimport '../css/login.css'\r\nimport axios from 'axios'\r\nimport {Link,useHistory} from 'react-router-dom'\r\n\r\n \r\n\r\nfunction Register(props) {\r\n   \r\n    const[phone,setPhone] =useState('')\r\n    const[name,setName] =useState('')\r\n    const [Picture,setPicture] =useState()\r\n    const history=useHistory();\r\n\r\n\r\n    /*get user information and token from DB*/\r\n    async function handleSubmit(e)\r\n    {\r\n\r\n        e.preventDefault();\r\n\r\n        let picturePath=''\r\n        const data = new FormData()\r\n        data.append('file',Picture)\r\n        data.append(\"upload_preset\",\"whatsApp_clone\")\r\n        data.append(\"cloud_name\",\"dsrgpqnyv\")\r\n        try{\r\n        let response = await axios.post(\"https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload\",data)\r\n        picturePath =response.data.url\r\n        }catch(err){console.log(err)}\r\n\r\n\r\n\r\n        \r\n        \r\n        let obj = {name: name,phone: phone,imageName:picturePath,contacts:[],LastSeen:'last seen at...'}\r\n\r\n\r\n       try{\r\n            const response = await axios.post(\"https://messagesapp1.herokuapp.com/api/logIn/Register\",obj)\r\n   \r\n            sessionStorage['config']= response.data.token \r\n            sessionStorage['id'] = response.data.User._id\r\n            sessionStorage['name'] = response.data.User.name\r\n            props.CanLogIn(response.data.User._id)\r\n\r\n            history.push('/App')\r\n        }\r\n       catch(err){console.log(err)}\r\n\r\n          \r\n    }\r\n        \r\n\r\n    function handleFileUpload(e) {\r\n        setPicture(e.target.files[0])\r\n      }\r\n\r\n    return (\r\n\r\n        <div className=\"overlay\">\r\n        <link rel=\"stylesheet\" href=\"http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css\"></link>\r\n     <form className='login_form' onSubmit={handleSubmit}>\r\n       <div className=\"con\">\r\n         <header className=\"head-form\">\r\n           <h2>Register</h2>\r\n           <p>welcome to  my whatsApp</p>\r\n         </header>\r\n       <div className=\"field-set\">\r\n         <span className=\"input-item\">\r\n           <i class=\"fa fa-user-circle\"></i>\r\n         \r\n         <input className=\"form-input\" id=\"txt-input\" type=\"text\" placeholder=\"@UserName\" onChange={(e)=> setName(e.target.value)} required />\r\n\r\n         </span>\r\n         <span className=\"input-item\">\r\n         <i class=\"fa fa-key\"></i>\r\n       \r\n         <input className=\"form-input\" type=\"password\" placeholder=\"Password\" id=\"pwd\"  name=\"password\" onChange={(e)=> setPhone(e.target.value)} required/>\r\n         </span>\r\n        \r\n           \r\n         <div id=\"fileupload\" >\r\n        <div className=\"myfileupload-buttonbar \">\r\n            <label className=\"myui-button\">\r\n            <i class=\"fa fa-upload\" aria-hidden=\"true\"></i>\r\n                <span className='text' >Add Picture</span>\r\n                <input id=\"file\" type=\"file\" name=\"file\" onChange={handleFileUpload}/>\r\n            </label>\r\n        </div>\r\n    </div>\r\n   \r\n         <button className=\"log-in\" type='submit'> Register </button>\r\n        </div>\r\n\r\n        <div>\r\n\r\n       <button className=\"btn submits sign-up\"><Link className='defaultLink' to={`/`}>back to Log In</Link>\r\n       <i class=\"fa fa-user-plus\" aria-hidden=\"true\"></i>\r\n       </button>\r\n       </div>\r\n     </div>\r\n\r\n</form>\r\n</div>\r\n  \r\n    )\r\n\r\n    /*      <div className=\"LogInPage\">\r\n             <form onSubmit={handleSubmit} className='logInBorder'>\r\n             enter your phone:  \r\n              <input type='text' onChange={(e)=> setPhone(e.target.value)}/> \r\n              enter your name: \r\n              <input type='text' onChange={(e)=> setName(e.target.value)}/>  \r\n              \r\n              <input type=\"file\" onChange={handleFileUpload} />\r\n                <button type='submit'> Sign Up</button>\r\n            </form>     \r\n        </div>*/\r\n\r\n}\r\n\r\n\r\nexport default Register\r\n"]},"metadata":{},"sourceType":"module"}