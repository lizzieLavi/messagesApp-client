(this.webpackJsonpmyclient=this.webpackJsonpmyclient||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},136:function(e,t,n){},160:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(16),r=n.n(c),i=n(3),o=(n(136),n(4)),l=n.n(o),d=n(6),u=(n(79),n(12)),j=n.n(u),p=n(10),b=n(41),h=(n(89),n(0));function m(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],m=o[1],x=Object(a.useState)(""),f=Object(i.a)(x,2),O=f[0],g=f[1],v=Object(p.g)();function y(){return(y=Object(d.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(""),n.preventDefault(),a={name:u,phone:s},t.next=5,j.a.post("https://messagesapp1.herokuapp.com/api/logIn",a);case 5:"not found"!==(c=t.sent).data?(sessionStorage.config=c.data.token,sessionStorage.id=c.data.User._id,sessionStorage.name=c.data.User.name,e.CanLogIn(c.data.User._id),v.push("/App")):g("One or more of your identification details is incorrect.");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsx)("div",{class:"overlay",children:Object(h.jsx)("form",{className:"login_form",onSubmit:function(e){return y.apply(this,arguments)},children:Object(h.jsxs)("div",{class:"con",children:[Object(h.jsxs)("header",{class:"head-form",children:[Object(h.jsx)("h2",{children:"Log In"}),Object(h.jsx)("p",{children:"welcome to  my whatsApp"})]}),Object(h.jsxs)("div",{class:"field-set",children:[Object(h.jsxs)("span",{class:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-user-circle"}),Object(h.jsx)("input",{class:"form-input",id:"txt-input",type:"text",placeholder:"@UserName",onChange:function(e){return m(e.target.value)},required:!0})]}),Object(h.jsxs)("span",{class:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-key"}),Object(h.jsx)("input",{class:"form-input",type:"password",placeholder:"Password",id:"pwd",name:"password",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(h.jsx)("button",{className:"log-in",type:"submit",children:" Log In "})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(b.b,{className:"submits sign-up defaultLink",to:"/Register",children:["     Sign Up",Object(h.jsx)("i",{style:{margin:"7px"},class:"fa fa-user-plus","aria-hidden":"true"})]})}),O]})})})}n(160),n(91);var x=n(115),f=n.n(x),O=n(118),g=n.n(O),v=n(220),y=n(216),_=n(215),N=n(219),w=n(116),S=n.n(w),C=n(117),k=n.n(C),I=n(25),L=n(7),M=s.a.createContext();function R(){return Object(a.useContext)(M)}function z(e){var t=e.children,n=Object(a.useState)([]),s=Object(i.a)(n,2),c=s[0],r=s[1],o=Object(a.useState)({}),u=Object(i.a)(o,2),p=u[0],b=u[1],m={headers:{"x-access-token":sessionStorage.config}};function x(){return f.apply(this,arguments)}function f(){return(f=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,m);case 2:return t=e.sent,b({id:t.data._id,name:t.data.name,phone:t.data.phone,imageName:t.data.imageName,LastSeen:t.data.LastSeen}),e.abrupt("return",t.data.contacts);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x().then((function(e){return r(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b]);var O=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==p.phone){e.next=2;break}return e.abrupt("return",{status:"error",message:"cant Add yourself"});case 2:if(0===c.filter((function(e){return e.phone===t})).length){e.next=5;break}return e.abrupt("return",{status:"error",message:"already exists"});case 5:return e.prev=5,e.next=8,j.a.get("https://messagesapp1.herokuapp.com/api/logIn/getByPhone/"+t,m);case 8:if("no such user"===(n=e.sent).data){e.next=24;break}return a={id:n.data._id,phone:n.data.phone,name:n.data.name,imageName:n.data.imageName},s=[].concat(Object(I.a)(c),[a]),r(s),i=Object(L.a)(Object(L.a)({},p),{},{contacts:s}),e.prev=14,e.next=17,j.a.put("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,i,{headers:{"x-access-token":sessionStorage.config}});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),console.log(e.t0);case 22:e.next=25;break;case 24:return e.abrupt("return",{status:"error",message:"user doesnt exist"});case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(5),console.log(e.t1);case 30:return e.abrupt("return",{status:"ok"});case 31:case"end":return e.stop()}}),e,null,[[5,27],[14,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(M.Provider,{value:{setContacts:r,setInfo:b,info:p,config:m,contacts:c,createContact:O,getSearchContacts:function(e){x().then((function(t){var n=t.filter((function(t){return!0===t.name.includes(e)}));r(n)}))}},children:t})}var U=n(111),D=n.n(U),P=s.a.createContext();function A(){return Object(a.useContext)(P)}function G(e){var t=e.userId,n=e.children,s=Object(a.useRef)(),c=Object(a.useState)([]),r=Object(i.a)(c,2),o=r[0],u=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.current=D()("wss://messagesapp1.herokuapp.com:443/");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.current.emit("AddUser",sessionStorage.id),s.current.on("getConnectedUsers",(function(e){u(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(h.jsx)(P.Provider,{value:{socket:s,ConnectedUsers:o},children:n})}var E=s.a.createContext();function q(){return Object(a.useContext)(E)}function B(e){e.id;var t=e.children,n=R(),s=n.contacts,c=n.info,r=Object(a.useState)([]),o=Object(i.a)(r,2),u=o[0],p=o[1],b=Object(a.useState)(),m=Object(i.a)(b,2),x=m[0],f=m[1],O=Object(a.useRef)(u),g=Object(a.useRef)(x),v=A(),y=v.socket,_=v.ConnectedUsers,N=Object(a.useState)(""),w=Object(i.a)(N,2),S=w[0],C=w[1],k=Object(a.useState)(""),M=Object(i.a)(k,2),z=M[0],U=M[1],D={headers:{"x-access-token":sessionStorage.config}},P=Object(a.useState)(!1),G=Object(i.a)(P,2),q=G[0],B=G[1],T=new Audio("https://res.cloudinary.com/dsrgpqnyv/video/upload/v1630680168/juntos-607_qsfc7i.mp3");function F(){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("https://messagesapp1.herokuapp.com/api/conversations/UserConversations/"+sessionStorage.id,D);case 3:return t=e.sent,n=t.data.map((function(e){var t=e;return e.Participants.isGroup||e.Name!==sessionStorage.name||(t=Object(L.a)(Object(L.a)({},t),{},{Name:e.Participants[0].name,ConversationImage:e.Participants[0].image})),x&&x._id===t._id&&f(t),t})),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function J(){return(J=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F().then((function(e){var n=e.filter((function(e){return!0===e.Name.includes(t)}));p(n)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(d.a)(l.a.mark((function e(t,n,a,r){var i,o,d,b,h,m,x,O,g,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a,o=r,0!==t.length){e.next=4;break}return e.abrupt("return",{status:"error",message:"no participants choosen"});case 4:if(d=null,1!==t.length||o||(d=u.find((function(e){return e.Name===n}))),!d){e.next=10;break}f(d),e.next=42;break;case 10:if((b=t.map((function(e){return s.filter((function(t){return e===t.id}))[0]}))).push({id:c.id,name:c.name,phone:c.phone,imageName:c.imageName,LastSeen:c.LastSeen}),h="",!o){e.next=30;break}return m=new Intl.DateTimeFormat("en",{hc:"h12",year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"Asia/Jerusalem"}).formatToParts(new Date).reduce((function(e,t){return e[t.type]=t.value,e}),Object.create(null)),h="".concat(m.day,"/").concat(m.month,"/").concat(m.year," ").concat(m.hour,":").concat(m.minute),(x=new FormData).append("file",i),x.append("upload_preset","whatsApp_clone"),x.append("cloud_name","dsrgpqnyv"),e.prev=20,e.next=23,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",x);case 23:O=e.sent,i=O.data.url,e.next=30;break;case 27:e.prev=27,e.t0=e.catch(20),console.log(e.t0);case 30:return g={Name:n,creatorId:sessionStorage.id,Participants:b,Messages:[],LastMessage:{id:"",sender:"",message:""},ConversationImage:i,isGroup:o,createdDate:h,description:"Add Description"},e.prev=31,console.log(g),e.next=35,j.a.post("https://messagesapp1.herokuapp.com/api/conversations",g,D);case 35:"created"===(v=e.sent).data.status&&(f(v.data.conversation),v.data.conversation.Messages.length>0&&p((function(e){return[].concat(Object(I.a)(e),[v.data.conversation])}))),e.next=42;break;case 39:e.prev=39,e.t1=e.catch(31),console.log(e.t1);case 42:case"end":return e.stop()}}),e,null,[[20,27],[31,39]])})))).apply(this,arguments)}function Y(){return(Y=Object(d.a)(l.a.mark((function e(t){var n,a,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(L.a)({},t),t.LastMessage.message.includes("left")||(a={id:c.id,phone:c.phone,name:c.name,image:c.imageName},s=[].concat(Object(I.a)(t.Participants),[a]),n=Object(L.a)(Object(L.a)({},n),{},{Participants:s})),delete n._id,e.prev=3,e.next=6,j.a.put("https://messagesapp1.herokuapp.com/api/conversations/"+x._id,n,D);case 6:"Updated"===e.sent.data.status&&(r=[],t.LastMessage.message.includes("left")?(y.current.emit("conversation-changed",x),console.log(u),r=u.filter((function(e){return e._id!=x._id})),f()):(console.log("in update conversations"),y.current.emit("conversation-changed",t),f(t),u.forEach((function(e){e._id===t._id?r.push(t):r.push(e)}))),y.current.emit("conversation-changed",t),p(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=y.current){e.next=2;break}return e.abrupt("return");case 2:y.current.on("user-typing",(function(e){var t=e.user,n=e.conversationId;x&&x._id===n&&C(t.name)})),y.current.on("update-conversation",Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F().then((function(e){return p(e)}));case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x]),Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=10;break}if(x.isGroup){e.next=10;break}if(!_.some((function(e){return e.userId===x.Participants[0].id}))){e.next=6;break}U(""),e.next=10;break;case 6:return e.next=8,j.a.get("https://messagesapp1.herokuapp.com/api/logIn/"+x.Participants[0].id,D);case 8:t=e.sent,U(t.data.LastSeen);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[_,x]),Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F().then((function(e){return p(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var Z=Object(a.useCallback)(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.UpdatedConv,T.play(),a=!1,s=O.current.map((function(e){if(e._id===n._id){a=!0;var t=Object(L.a)(Object(L.a)({},e),{},{Messages:n.Messages,LastMessage:n.LastMessage});return g.current&&g.current._id===n._id&&f(t),t}return e})),a?p(s):n.isGroup?p((function(e){return[].concat(Object(I.a)(e),[n])})):(c=Object(L.a)(Object(L.a)({},n),{},{Name:n.Participants[0].name,ConversationImage:n.Participants[0].imageName}),p((function(e){return[].concat(Object(I.a)(e),[c])})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);Object(a.useEffect)((function(){if(null!=y.current)return O.current=u,g.current=x,y.current.on("receive-message",Z),function(){return y.current.off("receive-message",Z)}}),[u,x]);return Object(h.jsx)(E.Provider,{value:{sendMessage:function(e,t,n,a){var s=new Intl.DateTimeFormat("en",{hc:"h12",year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"Asia/Jerusalem"}).formatToParts(new Date).reduce((function(e,t){return e[t.type]=t.value,e}),Object.create(null)),r="".concat(s.day,"/").concat(s.month,"/").concat(s.year,"  ").concat(s.hour,":").concat(s.minute),i=!1;null!=a&&(i=!0);var o={id:c.id,name:c.name,message:e,timeSent:r,containsImage:t,containsRecord:i,recordURL:a};!0===t&&(o=Object(L.a)(Object(L.a)({},o),{},{imageURL:n}));var l={id:c.id,phone:c.phone,name:c.name,image:c.imageName},d=Object(L.a)(Object(L.a)({},x),{},{Messages:[].concat(Object(I.a)(x.Messages),[o]),LastMessage:o});y.current.emit("send-message",{sender:l,UpdatedConversation:d,conversationId:x._id}),function(e){var t=!1;f(e);var n=u.map((function(n){return n._id===e._id?(t=!0,e):n}));p(t?n:function(t){return[].concat(Object(I.a)(t),[e])})}(d)},conversations:u,createConversation:function(e,t,n,a){return V.apply(this,arguments)},setConversations:p,setSelectedConversation:f,selectedConversation:x,currentConversationIsConnected:z,typingFlag:S,setTypingFlag:C,getSearchConverastions:function(e){return J.apply(this,arguments)},showDetails:q,setShowDetails:B,UpdateConversation:function(e){return Y.apply(this,arguments)}},children:t})}n(107);function T(){var e=q(),t=e.setSelectedConversation,n=(e.selectedConversation,e.conversations),a=e.setShowDetails;R().info;function s(){return(s=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!1),t(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"Chats",children:Object(h.jsx)("div",{className:"contacts_list",children:n.map((function(e,t){return Object(h.jsxs)("div",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},className:"ChatsListItem",children:[Object(h.jsx)(v.a,{src:""+e.ConversationImage}),Object(h.jsxs)("div",{className:"chatInfo",children:[Object(h.jsxs)("span",{className:"chatName",children:[Object(h.jsx)("h2",{children:e.Name})," "]}),Object(h.jsxs)("span",{children:[" ",e.LastMessage.message.slice(0,25),"... "]})]})]},t)}))})})}function F(e){var t=e.newConversationCallback,n=e.openModalCallback,a=R().contacts,s=q().createConversation;return Object(h.jsxs)("div",{className:"Chats",children:[Object(h.jsx)("h4",{className:"new_chat_title",children:"Start New Chat:"}),Object(h.jsx)(_.a,{style:{height:"30px",margin:"5px 0px",fontSize:"10px"},onClick:function(){return n()},className:"add_new_Button",children:"Create Group"}),Object(h.jsx)("div",{className:"contacts_list",children:a.map((function(e){return Object(h.jsxs)("div",{className:"ChatsListItem",onClick:function(){return function(e){var n=e.id,a=e.name,c=e.image;s([n],a,c,!1),t()}({id:e.id,name:e.name,image:e.imageName})},children:[Object(h.jsx)(v.a,{src:e.imageName}),Object(h.jsxs)("div",{className:"chatInfo",children:[" ",Object(h.jsxs)("h2",{children:[e.name," "]})," "]})]})}))})]})}n(108);var W=n(23),J=n.n(W);function V(e){var t=e.closeModal,n=Object(a.useRef)(),s=R().createContact,c=Object(a.useState)(""),r=Object(i.a)(c,2),o=r[0],u=r[1];function j(){return(j=Object(d.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n.current.value);case 2:a=e.sent,console.log(a),"ok"===a.status?(t(),u("")):u(a.message);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"add_new",children:Object(h.jsx)("div",{className:"add_new_contact_border",children:Object(h.jsxs)("div",{className:"add_contact_model",children:[Object(h.jsxs)("div",{className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",children:"Add New Contact"}),Object(h.jsx)(y.a,{className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(J.a,{fontSize:"large"})})]}),Object(h.jsxs)("div",{className:"add_new_contact",children:[Object(h.jsx)("h3",{className:"enter_phone",children:"Phone :"}),Object(h.jsx)("input",{className:"add_new_input",type:"text",ref:n,required:!0}),Object(h.jsx)("button",{className:"add_new_button",onClick:function(){return j.apply(this,arguments)},children:" Add Contact"})]}),Object(h.jsx)("span",{className:"show_error",children:o})]})})})}var Y=n(66),Z=n.n(Y),H=n(77),K=n.n(H),Q=n(76),X=n.n(Q);var $=function(e){var t=e.closeModal,n=Object(a.useState)([]),s=Object(i.a)(n,2),c=s[0],r=s[1],o=R().contacts,l=q().createConversation,d=Object(a.useState)(""),u=Object(i.a)(d,2),j=u[0],p=u[1],b=Object(a.useState)(),m=Object(i.a)(b,2),x=m[0],f=m[1],O=Object(a.useState)(),g=Object(i.a)(O,2),_=g[0],N=g[1],w=Object(a.useState)(!1),S=Object(i.a)(w,2),C=S[0],k=S[1];function L(e){f(e.target.files[0]),N(window.URL.createObjectURL(e.target.files[0]))}return Object(h.jsx)("div",{className:"add_new",children:Object(h.jsx)("div",{className:"add_new_group_border",children:Object(h.jsx)("div",{className:"new_conversation new_group",children:!0!==C?Object(h.jsxs)("div",{className:"top_new_group",children:[Object(h.jsxs)("div",{style:{flex:"1"},className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",style:{marginLeft:"85px",paddingRight:"0px"},children:"Create New Group:"}),Object(h.jsx)(y.a,{style:{marginLeft:"45px"},className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(J.a,{fontSize:"large"})})]}),_?Object(h.jsxs)("div",{className:"change_group_image",children:[Object(h.jsx)(v.a,{src:_,style:{height:"110px",width:"110px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:" "}),Object(h.jsxs)("div",{className:"change_image_on_hover",style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white"},children:[Object(h.jsx)(X.a,{style:{position:"absolute",zIndex:"0",opacity:"0.1",height:"80px",width:"80px"}}),Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:L}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"Change Image "})]})]}):Object(h.jsx)("div",{className:"add_group_image",children:Object(h.jsxs)(v.a,{style:{height:"110px",width:"110px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:[Object(h.jsx)(X.a,{style:{position:"absolute",zIndex:"0",opacity:"0.1",height:"80px",width:"80px"}}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:L}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"add group image"})]})]})}),Object(h.jsxs)("div",{className:"group_name",children:[Object(h.jsx)("span",{style:{padding:"5px",margin:"5px",fontSize:"13px",color:"#fcfcfc"},children:" Group Name:"}),Object(h.jsx)("input",{style:{borderRadius:"10px",border:"none",outline:"none"},onChange:function(e){return p(e.target.value)}})]}),Object(h.jsxs)("button",{style:{display:"flex",alignItems:"center",width:"180px",justifyContent:"center"},className:"add_new_button",onClick:function(){return k(!0)},children:[Object(h.jsx)(Z.a,{style:{margin:"5px"}})," Add Members"]})]}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{flex:"1"},className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",style:{marginLeft:"80px",paddingRight:"0px"},children:"Select Members:"}),Object(h.jsx)(y.a,{style:{marginLeft:"40px"},className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(J.a,{fontSize:"large"})})]}),Object(h.jsx)("div",{style:{overflowY:"overlay",height:"200px"},children:o.map((function(e){return Object(h.jsxs)("div",{className:"contact_item",children:[Object(h.jsx)("input",{type:"checkbox",value:c.includes(e.id),id:e.id,onChange:function(){return t=e.id,void(c.includes(t)?r((function(e){return e.filter((function(e){return e!==t}))})):r((function(e){return[].concat(Object(I.a)(e),[t])})));var t}}),Object(h.jsxs)("label",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},for:e.id,children:[Object(h.jsx)(v.a,{style:{margin:"5px"},src:""+e.imageName,fontSize:"large"}),Object(h.jsxs)("h3",{className:"enter_phone",style:{marginLeft:"10px",fontWeight:"400"},children:[e.name," "]})]})]})}))}),Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(h.jsx)("button",{className:"add_new_button",type:"submit",onClick:function(){return l(c,j,x,!0),void t()},children:"Create"})})]})})})})};function ee(e){e.id;var t=Object(a.useState)("conversations"),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),o=Object(i.a)(r,2),l=o[0],d=o[1],u=R(),j=u.info,p=u.getSearchContacts,b=Object(a.useState)(!1),m=Object(i.a)(b,2),x=m[0],O=m[1],w=q().getSearchConverastions,C=Object(a.useState)(""),I=Object(i.a)(C,2),L=I[0],M=I[1];function z(){d(!1)}function U(e){d(!0),M(e)}return Object(h.jsxs)("div",{className:"sideBar",children:[Object(h.jsxs)("div",{className:"sidebar_top",children:[Object(h.jsx)(v.a,{src:j.imageName,fontSize:"large"}),Object(h.jsxs)("div",{className:"sidebar_top_right",children:[Object(h.jsx)(y.a,{onClick:function(){return c("conversations")},children:Object(h.jsx)(f.a,{fontSize:"large"})}),Object(h.jsx)(y.a,{fontSize:"large",onClick:function(){return c("contacts")},children:Object(h.jsx)(S.a,{fontSize:"large"})}),Object(h.jsx)(y.a,{children:Object(h.jsx)(k.a,{})})]})]}),x?Object(h.jsxs)("div",{className:"activeSearch",children:[Object(h.jsx)("div",{className:"arrowButton",children:Object(h.jsx)(y.a,{onClick:function(){return O(!1)},children:Object(h.jsx)(Z.a,{fontSize:"large"})})}),Object(h.jsx)("input",{className:"searchBlock",type:"text",onChange:function(e){"conversations"===s?w(e.target.value):p(e.target.value)}})," "]}):Object(h.jsx)("div",{className:"searchBar",children:Object(h.jsxs)("div",{className:"searchContainer",children:[Object(h.jsx)(g.a,{}),Object(h.jsx)("input",{placeholder:"search",type:"text",onClick:function(){return O(!0)}})]})}),"contacts"===s?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"sidebar_middle",children:Object(h.jsx)(_.a,{style:{fontSize:"10px"},onClick:function(){return U("NEW_CONTACT")},className:"add_new_Button",children:"Add New Contact"})}),Object(h.jsx)("div",{className:"sidebar_bottom",children:Object(h.jsx)(F,{newConversationCallback:function(){return c("conversations")},openModalCallback:function(){return U("NEW_GROUP")}})})]}):Object(h.jsx)("div",{className:"sidebar_bottom",children:Object(h.jsx)(T,{})}),Object(h.jsx)(N.a,{className:"Modal",open:l,onClose:z,children:"NEW_GROUP"===L?Object(h.jsx)($,{closeModal:z}):Object(h.jsx)(V,{closeModal:z})})]})}n(109);var te=n(217),ne=n(56),ae=n.n(ne),se=n(121),ce=n.n(se),re=n(120),ie=n.n(re),oe=n(55),le=n.n(oe),de=n(54),ue=n.n(de),je=n(119),pe=n(218);var be=function(e){var t=e.sender,n=e.message,s=Object(a.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1],l=Object(a.useState)(null),d=Object(i.a)(l,2),u=d[0],j=d[1];return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"message",children:[Object(h.jsxs)("div",{className:"image_and_sender",children:[Object(h.jsx)("div",{className:"sender",children:n.name}),n.containsImage?Object(h.jsx)("img",{className:"image_in_message",src:n.imageURL,alt:"",onClick:function(){return e=n.imageURL,o(!0),void j(e);var e},width:"200px",height:"200px"}):""]}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"message_and_time",children:[Object(h.jsx)("div",{className:"message_content",children:n.message}),Object(h.jsx)("div",{className:"message_time_border",children:Object(h.jsx)("div",{className:"message_time",children:n.timeSent.substring(11,17)})})]})}),Object(h.jsx)(pe.a,{onClose:function(){return o(!1)},open:r,children:Object(h.jsx)("img",{src:u,alt:"",height:"500px",width:"500px"})})]})})};n(192);var he=function(e){var t=e.message,n=e.sender,a=e.image,s=n.includes("chat_reciever")?"reciever":"sender";return Object(h.jsx)("div",{className:n,children:Object(h.jsxs)("div",{className:"message_with_audio",children:[Object(h.jsxs)("div",{className:"audio_and_time",children:[Object(h.jsx)("div",{className:s,children:Object(h.jsx)("audio",{controls:!0,controlsList:"nodownload",children:Object(h.jsx)("source",{src:t.recordURL,type:"audio/mp3"})})}),Object(h.jsx)("span",{className:"message_time",children:t.timeSent.substring(11,17)})]}),Object(h.jsx)(v.a,{src:a,style:{height:"50px",width:"50px"}})]})})};var me=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),s=n[0],c=n[1],r=A().socket,o=R().info,u=q(),p=u.sendMessage,b=u.selectedConversation,m=Object(a.useRef)(null),x=Object(a.useState)(!1),f=Object(i.a)(x,2),O=f[0],g=f[1],v=Object(a.useState)(!1),_=Object(i.a)(v,2),N=_[0],w=_[1],S=Object(je.useReactMediaRecorder)({audio:!0}),C=S.startRecording,k=S.stopRecording,I=S.mediaBlobUrl,L=S.clearBlobUrl,M=Object(a.useState)(null),z=Object(i.a)(M,2),U=z[0],D=z[1];Object(a.useEffect)((function(){g(!1)}),[b]);var P=Object(a.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]);function G(){return(G=Object(d.a)(l.a.mark((function t(n){var a,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("file",n.target.files[0]),a.append("upload_preset","whatsApp_clone"),a.append("cloud_name","dsrgpqnyv"),t.prev=4,t.next=7,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",a);case 7:s=t.sent,e.imageCallback(s.data.url),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}function E(){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(),e.next=3,fetch(I);case 3:t=e.sent,D(t.blob());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){k(),L(),w(!1)}return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==U){e.next=25;break}return e.next=3,fetch(I).then((function(e){return e.blob()}));case 3:return t=e.sent,(n=new FormData).append("file",t),n.append("resource_type","video"),n.append("upload_preset","whatsApp_clone"),n.append("cloud_name","dsrgpqnyv"),e.prev=9,e.next=12,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/video/upload",n);case 12:a=e.sent,c=(c=a.data.url).slice(0,-4),c+="mp3",w(!1),L(),p(s,null,null,c),w(!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[9,22]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[U]),Object(h.jsxs)("div",{className:"body_and_footer",children:[Object(h.jsxs)("div",{className:"chat_body",children:[console.log(b),b.Messages.map((function(e,t){var n,a=b.Messages.length-1===t;n="manager"===e.name?"manager":e.id===sessionStorage.id?"message_out":"message_in";var s=e.id===sessionStorage.id?o.imageName:b.ConversationImage,c="message_in"===n?"chat_message chat_sender":" chat_message chat_reciever";return Object(h.jsx)("div",{children:"manager"==n?Object(h.jsx)("div",{className:"around_message",ref:a?P:null,children:Object(h.jsx)("div",{className:"manager_message",children:Object(h.jsx)("span",{className:"message_content",children:e.message})})}):Object(h.jsx)("div",{className:c,ref:a?P:null,children:e.containsRecord?Object(h.jsx)(he,{message:e,sender:n,image:s}):Object(h.jsx)(be,{sender:n,message:e})},t)})}))]}),Object(h.jsxs)("div",{className:"chat_footer_with_stickers",children:[O?Object(h.jsx)(ue.a,{onEmojiClick:function(e,t){return function(e,t){c(s+t.emoji)}(0,t)},pickerStyle:{width:"100%"}}):"",Object(h.jsxs)("div",{className:"chat_footer",children:[O?Object(h.jsxs)(y.a,{onClick:function(){return g(!1)},children:[Object(h.jsx)(J.a,{fontSize:"large"})," "]}):"",Object(h.jsx)(y.a,{onClick:function(){return g(!0)},children:Object(h.jsx)(ae.a,{fontSize:"large"})}),Object(h.jsx)("input",{accept:"image/*",className:"invisibleInput",id:"icon-button-file",type:"file",style:{visibility:"hidden"},onChange:function(e){return G.apply(this,arguments)}}),Object(h.jsx)("label",{htmlFor:"icon-button-file",children:Object(h.jsx)(y.a,{component:"span",children:Object(h.jsx)(ie.a,{fontSize:"large"})})}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(s,!1,null,null),c(" ")},className:"message_section",children:[Object(h.jsx)("input",{className:"message_input",ref:m,value:s,onChange:function(e){c(e.target.value),null!=r.current&&r.current.emit("typing",{user:o,Conversation:b})},type:"text",placeholder:"type a message"}),Object(h.jsx)("button",{type:"submit",children:" send "})]}),N?Object(h.jsxs)("div",{children:[Object(h.jsx)(y.a,{children:Object(h.jsx)(J.a,{fontSize:"large",style:{color:"red"},onClick:T})}),Object(h.jsx)(y.a,{children:Object(h.jsx)(le.a,{fontSize:"large",style:{color:"green"},onClick:E})})]}):Object(h.jsx)(y.a,{onClick:function(){w(!0),C()},children:Object(h.jsx)(ce.a,{fontSize:"large"})})]})]})]})},xe=(n(193),n(122)),fe=n.n(xe);var Oe=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(""),s=Object(i.a)(n,2),c=s[0],r=s[1],o=A().socket,l=R().info,d=q(),u=d.sendMessage,j=d.selectedConversation;function p(t){!0===t&&u(c,!0,e.imageURL),r(" "),e.backToChat()}return Object(h.jsxs)("div",{className:"SendImage",children:[Object(h.jsx)("div",{className:"sendImageHeader"}),Object(h.jsx)(y.a,{type:"submit",onClick:function(){return p(!1)},children:Object(h.jsx)(J.a,{fontSize:"large"})}),Object(h.jsx)("img",{src:e.imageURL,alt:"",height:"300px",width:"300px"}),Object(h.jsx)("div",{className:"add_message",children:Object(h.jsxs)("form",{onSubmit:function(){return p(!0)},className:"message_section",children:[Object(h.jsx)(y.a,{type:"submit",style:{flex:"0.1"},children:Object(h.jsx)(fe.a,{fontSize:"large"})}),Object(h.jsx)("input",{className:"message_input",ref:t,value:c,onChange:function(e){r(e.target.value),null!=o.current&&o.current.emit("typing",{user:l,Conversation:j})},type:"text",placeholder:"type a message"})]})})]})},ge=n(78),ve=n.n(ge),ye=n(123),_e=n.n(ye),Ne=n(124),we=n.n(Ne);var Se=function(e){var t=e.closeModal,n=Object(a.useState)([]),s=Object(i.a)(n,2),c=s[0],r=s[1],o=R(),l=o.contacts,d=o.info,u=q(),j=u.UpdateConversation,p=u.selectedConversation,b=Object(a.useState)([]),m=Object(i.a)(b,2),x=m[0],f=m[1];return Object(a.useEffect)((function(){var e=[];console.log(p),p.Participants.forEach((function(t){e.push(t.id)})),console.log(e),f(e)}),[]),Object(h.jsx)("div",{className:"add_new",children:Object(h.jsx)("div",{className:"add_new_group_border",children:Object(h.jsxs)("div",{className:"new_conversation new_group",children:[Object(h.jsxs)("div",{style:{flex:"1"},className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",style:{marginLeft:"80px",paddingRight:"0px"},children:"Select Members:"}),Object(h.jsx)(y.a,{style:{marginLeft:"40px"},className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(J.a,{fontSize:"large"})})]}),Object(h.jsx)("div",{style:{overflowY:"overlay",height:"200px"},children:l.map((function(e){if(!x.includes(e.id))return Object(h.jsxs)("div",{className:"contact_item",children:[Object(h.jsx)("input",{type:"checkbox",value:c.includes(e.id),id:e.id,onChange:function(){return t=e.id,void(c.includes(t)?r((function(e){return e.filter((function(e){return e!==t}))})):r((function(e){return[].concat(Object(I.a)(e),[t])})));var t}}),Object(h.jsxs)("label",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},for:e.id,children:[Object(h.jsx)(v.a,{style:{margin:"5px"},src:""+e.imageName,fontSize:"large"}),Object(h.jsxs)("h3",{className:"enter_phone",style:{marginLeft:"10px",fontWeight:"400"},children:[e.name," "]})]})]})}))}),Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(h.jsx)("button",{className:"add_new_button",type:"submit",onClick:function(){return function(){var e=[];e=p.Participants;var n=p.Messages;console.log(n);var a="";l.forEach((function(t){c.includes(t.id)&&(console.log(t),e.push(t),a={name:"manager",message:d.name+" added "+t.name+" to the group",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},n.push(a),console.log(e))}));var s=Object(L.a)(Object(L.a)({},p),{},{Participants:e,Messages:n,LastMessage:a});j(s),t()}()},children:"Add"})})]})})})},Ce=Object(te.a)({root:{"&:hover":{backgroundColor:"transparent"}}});function ke(){var e=q(),t=e.selectedConversation,n=e.currentConversationIsConnected,s=e.typingFlag,c=e.setTypingFlag,r=e.showDetails,o=e.setShowDetails,l=e.UpdateConversation,d=Object(a.useState)(!1),u=Object(i.a)(d,2),j=u[0],p=u[1],b=Object(a.useState)(!1),m=Object(i.a)(b,2),x=m[0],f=m[1],O=Object(a.useState)(!1),g=Object(i.a)(O,2),_=g[0],w=g[1],S=Object(a.useState)(!1),C=Object(i.a)(S,2),k=C[0],I=C[1],M=Object(a.useState)(!1),z=Object(i.a)(M,2),U=z[0],D=z[1],P=Object(a.useState)(t.Name),A=Object(i.a)(P,2),G=A[0],E=A[1],B=Object(a.useState)(t.description),T=Object(i.a)(B,2),F=T[0],W=T[1],V=R().info,Y=Ce(),Z=Object(a.useState)(!1),H=Object(i.a)(Z,2),K=H[0],Q=H[1],X=Object(a.useState)(!1),$=Object(i.a)(X,2),ee=$[0],te=$[1];Object(a.useEffect)((function(){w(!1),I(!1),D(!1)}),[t]);var ne=function(){var e="";return""===n?""!==s?(e=Object(h.jsx)("div",{className:"lastSeen",children:" typing..."}),setTimeout((function(){return c("")}),1e3)):e=Object(h.jsxs)("div",{className:"connected",children:[Object(h.jsx)("div",{className:"circle"})," online "]}):e=Object(h.jsx)("div",{className:"lastSeen",children:n}),e};function se(){Q(!1)}var ce=Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"chat_header",onClick:function(){return o(!0)},children:[Object(h.jsx)(v.a,{src:t.ConversationImage}),Object(h.jsxs)("div",{className:"chat_header_info",children:[Object(h.jsxs)("h2",{children:[" ",t.Name," "]}),t.isGroup?function(){var e="";if(""!==s)e=Object(h.jsxs)("div",{className:"lastSeen",children:[" ",s," is typing..."]}),setTimeout((function(){return c("")}),1e3);else{var n="";t.Participants.forEach((function(e,a){a===t.Participants.length-1?n+=e.name:n=n+e.name+", "})),e=Object(h.jsxs)("div",{className:"lastSeen",children:[n," "]})}return e}():ne()]})]}),j?Object(h.jsx)(Oe,{imageURL:x,backToChat:function(){f(null),p(!1)}}):Object(h.jsx)(me,{imageCallback:function(e){f(e),p(!0)}})]});return r?Object(h.jsxs)("div",{className:"chat_with_details",children:[Object(h.jsx)("div",{className:"chat narrow_chat",children:ce}),Object(h.jsxs)("div",{className:"chat_details",children:[Object(h.jsxs)("div",{className:"chat_details_top",children:[Object(h.jsx)(y.a,{onClick:function(){return o(!1)},children:Object(h.jsx)(J.a,{fontSize:"large"})}),Object(h.jsx)("h2",{style:{paddingLeft:"10px"},children:t.isGroup?"Group Details:":"Contact Details:"})]}),Object(h.jsxs)("span",{className:"chat_details_body",children:[Object(h.jsxs)("div",{className:"user_info",children:[Object(h.jsx)(v.a,{src:t.ConversationImage,style:{margin:"20px",height:"140px",width:"140px"}}),Object(h.jsxs)("span",{className:"name_and_lastSeen",children:[t.isGroup&&_?Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[U?Object(h.jsx)(ue.a,{onEmojiClick:function(e,t){return function(e,t){E(G+t.emoji)}(0,t)},pickerStyle:{width:"100%",height:"200px"}}):"",Object(h.jsxs)("div",{className:"edit_group_name",children:[Object(h.jsx)(y.a,{className:Y.root,style:{padding:"3px"},onClick:function(){return function(){var e={name:"manager",message:sessionStorage.name+" changed group name to "+G,timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},n=t.Messages;n.push(e);var a=Object(L.a)(Object(L.a)({},t),{},{Name:G,Messages:n,LastMasage:e});l(a),w(!1)}()},children:Object(h.jsx)(le.a,{fontSize:"large"})}),Object(h.jsx)(y.a,{className:Y.root,style:{padding:"3px"},onClick:function(){return D(!U)},children:Object(h.jsx)(ae.a,{fontSize:"large"})}),Object(h.jsx)("input",{defaultValue:G,onChange:function(e){return E(e.target.value)},style:{border:"none",outline:"none",width:"100%",backgroundColor:"transparent",padding:"5px"}})]})]}):Object(h.jsxs)("span",{className:"group_title",children:[Object(h.jsx)("h3",{children:t.Name}),t.isGroup?Object(h.jsx)(y.a,{onClick:function(){return w(!0)},children:Object(h.jsx)(ve.a,{style:{fontSize:"large",marginLeft:"10px"}})}):""]}),Object(h.jsxs)("span",{className:"lastSeen",style:{padding:"10px",paddingLeft:"0px"},children:[" ",t.isGroup?Object(h.jsxs)("span",{children:[" created at:  ",t.createdDate," "]}):ne()]})]})]}),t.isGroup?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"group_details_container",children:[Object(h.jsx)("h2",{className:"group_title",style:{padding:"5px"},children:" Description "}),k?Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[U?Object(h.jsx)(ue.a,{onEmojiClick:function(e,t){return function(e,t){W(F+t.emoji)}(0,t)},pickerStyle:{width:"100%",height:"200px"}}):"",Object(h.jsxs)("div",{className:"edit_group_name",style:{padding:"5px"},children:[Object(h.jsx)(y.a,{className:Y.root,style:{padding:"3px"},onClick:function(){return function(){var e={name:"manager",message:sessionStorage.name+" changed group Description",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},n=t.Messages;n.push(e);var a=Object(L.a)(Object(L.a)({},t),{},{description:F,Messages:n,LastMessage:e});l(a),I(!1)}()},children:Object(h.jsx)(le.a,{fontSize:"large"})}),Object(h.jsx)(y.a,{className:Y.root,style:{padding:"3px"},onClick:function(){return D(!U)},children:Object(h.jsx)(ae.a,{fontSize:"large"})}),Object(h.jsx)("input",{defaultValue:F,onChange:function(e){return W(e.target.value)},style:{border:"none",outline:"none",width:"100%",backgroundColor:"transparent",padding:"5px"}})]})]}):Object(h.jsxs)("div",{className:"group_description_edit",children:[Object(h.jsx)("span",{style:{fontSize:"15px",marginRight:"5px"},children:t.description}),Object(h.jsx)(y.a,{onClick:function(){return I(!0)},children:Object(h.jsx)(ve.a,{style:{fontSize:"large"}})})]})]}),Object(h.jsxs)("div",{className:"group_details_container",children:[Object(h.jsxs)("h2",{className:"group_title",style:{padding:"10px",borderBottom:"1px solid #B0B0B0"},children:[t.Participants.length+1," participants"]}),Object(h.jsx)(N.a,{className:"Modal",open:K,onClose:se,children:Object(h.jsx)(Se,{closeModal:se})}),t.creatorId===sessionStorage.id?Object(h.jsxs)("div",{className:"participant",style:{cursor:"pointer",fontSize:"15px"},onClick:function(){return Q(!0)},children:[Object(h.jsx)(v.a,{children:Object(h.jsx)(y.a,{className:Y.root,style:{padding:"3px"},children:Object(h.jsx)(_e.a,{fontSize:"large"})})}),Object(h.jsx)("h3",{className:"group_participant_name",children:"Add Member"})]}):"",t.Participants.map((function(e,n){return Object(h.jsx)("div",{className:"participant",children:Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)(v.a,{src:e.imageName}),Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)("h3",{className:"group_participant_name",children:e.name}),e.id===t.creatorId?Object(h.jsx)("div",{className:"group_admin",children:Object(h.jsx)("h3",{style:{fontSize:"13px"},children:"Group Manager"})}):""]})]})},n)})),Object(h.jsx)("div",{className:"participant",children:Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)(v.a,{src:V.imageName}),Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)("h3",{className:"group_participant_name",children:V.name}),sessionStorage.id===t.creatorId?Object(h.jsx)("div",{className:"group_admin",children:Object(h.jsx)("h3",{style:{fontSize:"13px"},children:"Group Manager"})}):""]})]})})]}),Object(h.jsx)("div",{className:"group_details_container leave",onClick:function(){return te(!0)},children:Object(h.jsxs)("div",{className:"leaveGroup",children:[Object(h.jsx)(y.a,{className:Y.root,style:{padding:"3px"},children:Object(h.jsx)(we.a,{style:{color:"darkred"},fontSize:"large"})}),Object(h.jsx)("h3",{className:"group_participant_name",style:{color:"darkRed",fontSize:"17px"},children:"leave Group"})]})})]}):""]})]}),Object(h.jsx)(pe.a,{className:"exit_group_dialog",onClose:function(){return te(!1)},open:ee,children:Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("h2",{className:"dialog_title",children:" are you sure you want to leave this group?"}),Object(h.jsxs)("div",{className:"dialog_options_buttons",children:[Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return function(){var e={name:"manager",message:sessionStorage.name+" left the group",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},n=t.Messages;n.push(e);var a=Object(L.a)(Object(L.a)({},t),{},{Messages:n,LastMessage:e});l(a),te(!1)}()},children:"yes"}),Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return te(!1)},children:"no"})]})]})})]}):Object(h.jsx)("div",{className:"chat",children:ce})}var Ie=Object(p.h)((function(e){var t=e.id,n=q().selectedConversation;return Object(h.jsx)("div",{className:"dashboard",children:Object(h.jsxs)("div",{className:"dashboard_body",children:[Object(h.jsx)(ee,{id:t}),void 0!==n?Object(h.jsx)(ke,{id:t}):""]})})}));var Le=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],m=o[1],x=Object(a.useState)(),f=Object(i.a)(x,2),O=f[0],g=f[1],v=Object(p.g)();function y(){return(y=Object(d.a)(l.a.mark((function t(n){var a,c,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a="",(c=new FormData).append("file",O),c.append("upload_preset","whatsApp_clone"),c.append("cloud_name","dsrgpqnyv"),t.prev=6,t.next=9,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",c);case 9:r=t.sent,a=r.data.url,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:return i={name:u,phone:s,imageName:a,contacts:[],LastSeen:"last seen at..."},t.prev=17,t.next=20,j.a.post("https://messagesapp1.herokuapp.com/api/logIn/Register",i);case 20:o=t.sent,sessionStorage.config=o.data.token,sessionStorage.id=o.data.User._id,sessionStorage.name=o.data.User.name,e.CanLogIn(o.data.User._id),v.push("/App"),t.next=31;break;case 28:t.prev=28,t.t1=t.catch(17),console.log(t.t1);case 31:case"end":return t.stop()}}),t,null,[[6,13],[17,28]])})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"overlay",children:Object(h.jsx)("form",{className:"login_form",onSubmit:function(e){return y.apply(this,arguments)},children:Object(h.jsxs)("div",{className:"con",children:[Object(h.jsxs)("header",{className:"head-form",children:[Object(h.jsx)("h2",{children:"Register"}),Object(h.jsx)("p",{children:"welcome to  my whatsApp"})]}),Object(h.jsxs)("div",{className:"field-set",children:[Object(h.jsxs)("span",{className:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-user-circle"}),Object(h.jsx)("input",{className:"form-input",id:"txt-input",type:"text",placeholder:"@UserName",onChange:function(e){return m(e.target.value)},required:!0})]}),Object(h.jsxs)("span",{className:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-key"}),Object(h.jsx)("input",{className:"form-input",type:"password",placeholder:"Password",id:"pwd",name:"password",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(h.jsx)("div",{id:"fileupload",children:Object(h.jsx)("div",{className:"myfileupload-buttonbar ",children:Object(h.jsxs)("label",{className:"myui-button",children:[Object(h.jsx)("i",{class:"fa fa-upload","aria-hidden":"true"}),Object(h.jsx)("span",{className:"text",children:"Add Picture"}),Object(h.jsx)("input",{id:"file",type:"file",name:"file",onChange:function(e){g(e.target.files[0])}})]})})}),Object(h.jsx)("button",{className:"log-in",type:"submit",children:" Register "})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(b.b,{className:"submits sign-up defaultLink",to:"/",children:["    ",Object(h.jsx)("i",{style:{margin:"7px"},class:"fa fa-user-plus","aria-hidden":"true"}),"back to Log In"]})})]})})})};var Me=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(h.jsx)(G,{userId:n,children:Object(h.jsx)(z,{id:n,children:Object(h.jsx)(B,{children:Object(h.jsx)(Ie,{id:n})})})});return Object(h.jsx)(b.a,{children:Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(p.d,{children:[sessionStorage.id,Object(h.jsxs)(p.b,{exact:!0,path:"/",children:[" ",Object(h.jsx)(m,{CanLogIn:s})]}),Object(h.jsxs)(p.b,{path:"/Register",children:[" ",Object(h.jsx)(Le,{CanLogIn:s})]}),sessionStorage.id?Object(h.jsxs)(p.b,{exact:!0,path:"/App",children:[" ",c," "]}):Object(h.jsx)(p.a,{to:"/"})]})})})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(Me,{})}),document.getElementById("root"))},79:function(e,t,n){},91:function(e,t,n){}},[[194,1,2]]]);
//# sourceMappingURL=main.0a194b3a.chunk.js.map