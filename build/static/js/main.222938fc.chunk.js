(this.webpackJsonpmyclient=this.webpackJsonpmyclient||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},159:function(e,t,a){},190:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(16),r=a.n(c),i=a(3),o=a(4),l=a.n(o),d=a(7),u=(a(81),a(9)),j=a.n(u),p=a(11),b=a(45),h=(a(91),a(0));function m(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),u=o[0],m=o[1],x=Object(n.useState)(""),O=Object(i.a)(x,2),f=O[0],g=O[1],v=Object(p.g)();function _(){return(_=Object(d.a)(l.a.mark((function t(a){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(""),a.preventDefault(),n={name:u,phone:s},t.next=5,j.a.post("https://messagesapp1.herokuapp.com/api/logIn",n);case 5:"not found"!==(c=t.sent).data?(sessionStorage.config=c.data.token,sessionStorage.id=c.data.User._id,sessionStorage.name=c.data.User.name,e.CanLogIn(c.data.User._id),v.push("/App")):g("One or more of your identification details is incorrect.");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsx)("div",{class:"overlay",children:Object(h.jsx)("form",{className:"login_form",onSubmit:function(e){return _.apply(this,arguments)},children:Object(h.jsxs)("div",{class:"con",children:[Object(h.jsxs)("header",{class:"head-form",children:[Object(h.jsx)("h2",{children:"Log In"}),Object(h.jsx)("p",{children:"welcome to  my whatsApp"})]}),Object(h.jsxs)("div",{class:"field-set",children:[Object(h.jsxs)("span",{class:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-user-circle"}),Object(h.jsx)("input",{class:"form-input",id:"txt-input",type:"text",placeholder:"@UserName",onChange:function(e){return m(e.target.value)},required:!0})]}),Object(h.jsxs)("span",{class:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-key"}),Object(h.jsx)("input",{class:"form-input",type:"password",placeholder:"Password",id:"pwd",name:"password",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(h.jsx)("button",{className:"log-in",type:"submit",children:" Log In "})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(b.b,{className:"submits sign-up defaultLink",to:"/Register",children:["     Sign Up",Object(h.jsx)("i",{style:{margin:"7px"},class:"fa fa-user-plus","aria-hidden":"true"})]})}),f]})})})}a(159),a(74);var x=a(116),O=a.n(x),f=a(119),g=a.n(f),v=a(221),_=a(217),y=a(216),N=a(220),S=a(117),w=a.n(S),C=a(118),k=a.n(C),I=a(24),L=a(6),z=s.a.createContext();function R(){return Object(n.useContext)(z)}function M(e){var t=e.children,a=Object(n.useState)([]),s=Object(i.a)(a,2),c=s[0],r=s[1],o=Object(n.useState)({}),u=Object(i.a)(o,2),p=u[0],b=u[1],m={headers:{"x-access-token":sessionStorage.config}};function x(){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,m);case 2:return t=e.sent,b({id:t.data._id,name:t.data.name,phone:t.data.phone,imageName:t.data.imageName,LastSeen:t.data.LastSeen,Status:t.data.Status}),e.abrupt("return",t.data.contacts);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x().then((function(e){return r(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b]);var f=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==p.name){e.next=2;break}return e.abrupt("return",{status:"error",message:"cant Add yourself"});case 2:if(0===c.filter((function(e){return e.name===t})).length){e.next=5;break}return e.abrupt("return",{status:"error",message:"already exists"});case 5:return e.prev=5,e.next=8,j.a.get("https://messagesapp1.herokuapp.com/api/logIn/getByName/"+t,m);case 8:if("no such user"===(a=e.sent).data){e.next=24;break}return n={id:a.data._id,phone:a.data.phone,name:a.data.name,imageName:a.data.imageName,Status:a.data.Status},s=[].concat(Object(I.a)(c),[n]),r(s),i=Object(L.a)(Object(L.a)({},p),{},{contacts:s}),e.prev=14,e.next=17,j.a.put("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,i,{headers:{"x-access-token":sessionStorage.config}});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),console.log(e.t0);case 22:e.next=25;break;case 24:return e.abrupt("return",{status:"error",message:"user doesnt exist"});case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(5),console.log(e.t1);case 30:return e.abrupt("return",{status:"ok"});case 31:case"end":return e.stop()}}),e,null,[[5,27],[14,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(z.Provider,{value:{setContacts:r,setInfo:b,info:p,config:m,contacts:c,createContact:f,getSearchContacts:function(e){x().then((function(t){var a=t.filter((function(t){return!0===t.name.includes(e)}));r(a)}))}},children:t})}var U=a(112),D=a.n(U),P=s.a.createContext();function A(){return Object(n.useContext)(P)}function G(e){var t=e.userId,a=e.children,s=Object(n.useRef)(),c=Object(n.useState)([]),r=Object(i.a)(c,2),o=r[0],u=r[1];return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.current=D()("wss://messagesapp1.herokuapp.com:443/");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.current.emit("AddUser",sessionStorage.id),s.current.on("getConnectedUsers",(function(e){u(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(h.jsx)(P.Provider,{value:{socket:s,ConnectedUsers:o},children:a})}var E=s.a.createContext();function F(){return Object(n.useContext)(E)}function T(e){var t=e.children,a=R(),s=a.contacts,c=a.info,r=Object(n.useState)([]),o=Object(i.a)(r,2),u=o[0],p=o[1],b=Object(n.useState)(),m=Object(i.a)(b,2),x=m[0],O=m[1],f=Object(n.useRef)(u),g=Object(n.useRef)(x),v=A(),_=v.socket,y=v.ConnectedUsers,N=Object(n.useState)(""),S=Object(i.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(""),z=Object(i.a)(k,2),M=z[0],U=z[1],D={headers:{"x-access-token":sessionStorage.config}},P=Object(n.useState)(!1),G=Object(i.a)(P,2),F=G[0],T=G[1],q=Object(n.useState)(!1),B=Object(i.a)(q,2),V=B[0],W=B[1],J=new Audio("https://res.cloudinary.com/dsrgpqnyv/video/upload/v1630680168/juntos-607_qsfc7i.mp3"),H=Object(n.useState)(!0),Y=Object(i.a)(H,2),Z=Y[0],K=Y[1];function Q(){return X.apply(this,arguments)}function X(){return(X=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("https://messagesapp1.herokuapp.com/api/conversations/UserConversations/"+sessionStorage.id,D);case 3:return t=e.sent,a=t.data.map((function(e){var t=e;return e.isGroup||e.Name!==sessionStorage.name||(t=Object(L.a)(Object(L.a)({},t),{},{Name:e.Participants[0].name,ConversationImage:e.Participants[0].image})),x&&x._id===t._id&&O(t),t})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function $(){return($=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q().then((function(e){var a=e.filter((function(e){return!0===e.Name.includes(t)}));p(a)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(d.a)(l.a.mark((function e(t,a,n,r){var i,o,d,b,h,m,x,f,g,v,y,N;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n,o=r,d=[],b="",0!==t.length){e.next=6;break}return e.abrupt("return",{status:"error",message:"no participants choosen"});case 6:if(h=null,1!==t.length||o||(h=u.find((function(e){return e.Name===a}))),!h){e.next=12;break}O(h),e.next=45;break;case 12:if((m=t.map((function(e){return s.filter((function(t){return e===t.id}))[0]}))).push({id:c.id,name:c.name,phone:c.phone,imageName:c.imageName,LastSeen:c.LastSeen}),x="",!o){e.next=34;break}return f=new Intl.DateTimeFormat("en",{hc:"h12",year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"Asia/Jerusalem"}).formatToParts(new Date).reduce((function(e,t){return e[t.type]=t.value,e}),Object.create(null)),x="".concat(f.day,"/").concat(f.month,"/").concat(f.year," ").concat(f.hour,":").concat(f.minute),b={name:"manager",message:c.name+" created this group",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},d.push(b),(g=new FormData).append("file",i),g.append("upload_preset","whatsApp_clone"),g.append("cloud_name","dsrgpqnyv"),e.prev=24,e.next=27,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",g);case 27:v=e.sent,i=v.data.url,e.next=34;break;case 31:e.prev=31,e.t0=e.catch(24),console.log(e.t0);case 34:return y={Name:a,creatorId:sessionStorage.id,Participants:m,Messages:d,LastMessage:b,ConversationImage:i,isGroup:o,createdDate:x,description:"Add Description"},e.prev=35,e.next=38,j.a.post("https://messagesapp1.herokuapp.com/api/conversations",y,D);case 38:"created"===(N=e.sent).data.status&&(O(N.data.conversation),(N.data.conversation.Messages.length>0||!0===N.data.conversation.isGroup)&&(p((function(e){return[].concat(Object(I.a)(e),[N.data.conversation])})),_.current.emit("conversation-changed",N.data.conversation))),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(35),console.log(e.t1);case 45:case"end":return e.stop()}}),e,null,[[24,31],[35,42]])})))).apply(this,arguments)}function te(){return(te=Object(d.a)(l.a.mark((function e(t){var a,n,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(L.a)({},t),t.LastMessage.message.includes("left")||(n={id:c.id,phone:c.phone,name:c.name,image:c.imageName},s=[].concat(Object(I.a)(t.Participants),[n]),a=Object(L.a)(Object(L.a)({},a),{},{Participants:s})),delete a._id,e.prev=3,e.next=6,j.a.put("https://messagesapp1.herokuapp.com/api/conversations/"+x._id,a,D);case 6:"Updated"===e.sent.data.status&&(r=[],t.LastMessage.message.includes("left")?(r=u.filter((function(e){return e._id!==x._id})),O()):(O(t),u.forEach((function(e){e._id===t._id?r.push(t):r.push(e)}))),t.LastMessage.message.includes("removed")?_.current.emit("user-deleted",x):_.current.emit("conversation-changed",x),p(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=_.current){e.next=2;break}return e.abrupt("return");case 2:_.current.on("update-conversation",Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(!0);case 1:case"end":return e.stop()}}),e)})))),_.current.on("removed-user",Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q().then((function(e){(p(e),x)&&(0===e.filter((function(e){return e._id===x._id})).length&&W(!0))}));case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=10;break}if(x.isGroup){e.next=10;break}if(!y.some((function(e){return e.userId===x.Participants[0].id}))){e.next=6;break}U(""),e.next=10;break;case 6:return e.next=8,j.a.get("https://messagesapp1.herokuapp.com/api/logIn/"+x.Participants[0].id,D);case 8:t=e.sent,U(t.data.LastSeen);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[y,x]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q().then((function(e){return p(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Z&&(K(!1),function(){e.apply(this,arguments)}())}),[Z]),Object(n.useEffect)((function(){null!=_.current&&_.current.on("user-typing",(function(e){var t=e.user,a=e.conversationId;x&&x._id===a&&C(t.name)}))}),[x]);var ae=Object(n.useCallback)(function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.UpdatedConv,J.play(),n=!1,s=f.current.map((function(e){if(e._id===a._id){n=!0;var t=Object(L.a)(Object(L.a)({},e),{},{Messages:a.Messages,LastMessage:a.LastMessage});return g.current&&g.current._id===a._id&&O(t),t}return e})),n?p(s):a.isGroup?p((function(e){return[].concat(Object(I.a)(e),[a])})):(c=Object(L.a)(Object(L.a)({},a),{},{Name:a.Participants[0].name,ConversationImage:a.Participants[0].imageName}),p((function(e){return[].concat(Object(I.a)(e),[c])})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);Object(n.useEffect)((function(){if(null!=_.current)return f.current=u,g.current=x,_.current.on("receive-message",ae),function(){return _.current.off("receive-message",ae)}}),[u,x]);return Object(h.jsx)(E.Provider,{value:{sendMessage:function(e,t,a,n){var s=new Intl.DateTimeFormat("en",{hc:"h12",year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZone:"Asia/Jerusalem"}).formatToParts(new Date).reduce((function(e,t){return e[t.type]=t.value,e}),Object.create(null)),r="".concat(s.day,"/").concat(s.month,"/").concat(s.year,"  ").concat(s.hour,":").concat(s.minute),i=!1;null!=n&&(i=!0);var o={id:c.id,name:c.name,message:e,timeSent:r,containsImage:t,containsRecord:i,recordURL:n};!0===t&&(o=Object(L.a)(Object(L.a)({},o),{},{imageURL:a}));var l={id:c.id,phone:c.phone,name:c.name,image:c.imageName},d=Object(L.a)(Object(L.a)({},x),{},{Messages:[].concat(Object(I.a)(x.Messages),[o]),LastMessage:o});_.current.emit("send-message",{sender:l,UpdatedConversation:d,conversationId:x._id}),function(e){var t=!1;O(e);var a=u.map((function(a){return a._id===e._id?(t=!0,e):a}));p(t?a:function(t){return[].concat(Object(I.a)(t),[e])})}(d)},conversations:u,createConversation:function(e,t,a,n){return ee.apply(this,arguments)},setConversations:p,setSelectedConversation:O,selectedConversation:x,currentConversationIsConnected:M,typingFlag:w,setTypingFlag:C,getSearchConverastions:function(e){return $.apply(this,arguments)},showDetails:F,setShowDetails:T,UpdateConversation:function(e){return te.apply(this,arguments)},removedFromGroupFlag:V,setRemovedFromGroupFlag:W},children:t})}a(108);function q(){var e=F(),t=e.setSelectedConversation,a=e.conversations,n=e.setShowDetails;function s(){return(s=Object(d.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!1),t(a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"Chats",children:Object(h.jsx)("div",{className:"contacts_list",children:a.map((function(e,t){return Object(h.jsxs)("div",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},className:"ChatsListItem",children:[Object(h.jsx)(v.a,{src:e.ConversationImage}),Object(h.jsxs)("div",{className:"chatInfo",children:[Object(h.jsx)("h2",{className:"user_name",children:e.Name}),Object(h.jsxs)("span",{className:"user_status",children:[" ",e.LastMessage.message.slice(0,28),"... "]})]})]},t)}))})})}function B(e){var t=e.newConversationCallback,a=e.openModalCallback,n=R(),s=n.info,c=n.contacts,r=F().createConversation;return Object(h.jsxs)("div",{className:"Chats contacts",children:[Object(h.jsx)("h4",{className:"new_chat_title",children:"Start New Chat:"}),Object(h.jsx)(y.a,{style:{height:"30px",margin:"5px 0px",fontSize:"10px"},onClick:function(){return a()},className:"add_new_Button",children:" Create Group "}),Object(h.jsx)("div",{className:"contacts_list",children:c.map((function(e){return Object(h.jsxs)("div",{className:"ChatsListItem",onClick:function(){return function(e){var a=e.id,n=e.name,s=e.image;r([a],n,s,!1),t()}({id:e.id,name:e.name,image:e.imageName})},children:[Object(h.jsx)(v.a,{src:e.imageName}),Object(h.jsxs)("div",{className:"chatInfo",children:[Object(h.jsxs)("h2",{className:"user_name",children:[e.name," "]}),Object(h.jsxs)("span",{className:"user_status",children:[" ",s.Status.slice(0,25),"... "]})]})]})}))})]})}var V=a(20),W=a.n(V);a(109);function J(e){var t=e.closeModal,a=Object(n.useRef)(),s=R().createContact,c=Object(n.useState)(""),r=Object(i.a)(c,2),o=r[0],u=r[1];function j(){return(j=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(a.current.value);case 2:"ok"===(n=e.sent).status?(t(),u("")):u(n.message);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"add_new",children:Object(h.jsx)("div",{className:"add_new_contact_border",children:Object(h.jsxs)("div",{className:"add_contact_model",children:[Object(h.jsxs)("div",{className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",children:"Add New Contact"}),Object(h.jsx)(_.a,{className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(W.a,{fontSize:"large"})})]}),Object(h.jsxs)("div",{className:"add_new_contact",children:[Object(h.jsx)("h3",{className:"enter_phone",children:"userName:"}),Object(h.jsx)("input",{className:"add_new_input",type:"text",ref:a,required:!0}),Object(h.jsx)("button",{className:"add_new_button",onClick:function(){return j.apply(this,arguments)},children:" Add Contact"})]}),Object(h.jsx)("span",{className:"show_error",children:o})]})})})}var H=a(48),Y=a.n(H),Z=a(37),K=a.n(Z),Q=a(69),X=a.n(Q);var $=function(e){var t=e.closeModal,a=Object(n.useState)([]),s=Object(i.a)(a,2),c=s[0],r=s[1],o=R().contacts,l=F().createConversation,d=Object(n.useState)(""),u=Object(i.a)(d,2),j=u[0],p=u[1],b=Object(n.useState)(),m=Object(i.a)(b,2),x=m[0],O=m[1],f=Object(n.useState)(),g=Object(i.a)(f,2),y=g[0],N=g[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),C=w[0],k=w[1];function L(e){O(e.target.files[0]),N(window.URL.createObjectURL(e.target.files[0]))}return Object(h.jsx)("div",{className:"add_new",children:Object(h.jsx)("div",{className:"add_new_group_border",children:Object(h.jsx)("div",{className:"new_conversation new_group",children:!0!==C?Object(h.jsxs)("div",{className:"top_new_group",children:[Object(h.jsxs)("div",{style:{flex:"1"},className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",style:{marginLeft:"85px",paddingRight:"0px"},children:"Create New Group:"}),Object(h.jsx)(_.a,{style:{marginLeft:"45px"},className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(W.a,{fontSize:"large"})})]}),y?Object(h.jsxs)("div",{className:"change_group_image",children:[Object(h.jsx)(v.a,{src:y,style:{height:"110px",width:"110px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:"  "}),Object(h.jsxs)("div",{className:"change_image_on_hover",style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:L}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"Change Image "})]})]}):Object(h.jsx)("div",{className:"add_group_image",children:Object(h.jsxs)(v.a,{style:{height:"110px",width:"110px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:[Object(h.jsx)(X.a,{style:{position:"absolute",zIndex:"0",opacity:"0.1",height:"80px",width:"80px"}}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:L}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"add group image"})]})]})}),Object(h.jsxs)("div",{className:"group_name",children:[Object(h.jsx)("span",{style:{padding:"5px",margin:"5px",fontSize:"13px",color:"#fcfcfc"},children:" Group Name:"}),Object(h.jsx)("input",{style:{borderRadius:"10px",border:"none",outline:"none"},onChange:function(e){return p(e.target.value)}})]}),Object(h.jsxs)("button",{style:{display:"flex",alignItems:"center",width:"180px",justifyContent:"center"},className:"add_new_button",onClick:function(){return k(!0)},children:[Object(h.jsx)(Y.a,{style:{margin:"5px"}})," Add Members"]})]}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{flex:"1"},className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",style:{marginLeft:"80px",paddingRight:"0px"},children:"Select Members:"}),Object(h.jsx)(_.a,{style:{marginLeft:"40px"},className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(W.a,{fontSize:"large"})})]}),Object(h.jsx)("div",{style:{overflowY:"overlay",height:"200px"},children:o.map((function(e){return Object(h.jsxs)("div",{className:"contact_item",children:[Object(h.jsx)("input",{type:"checkbox",value:c.includes(e.id),id:e.id,onChange:function(){return t=e.id,void(c.includes(t)?r((function(e){return e.filter((function(e){return e!==t}))})):r((function(e){return[].concat(Object(I.a)(e),[t])})));var t}}),Object(h.jsxs)("label",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},for:e.id,children:[Object(h.jsx)(v.a,{style:{margin:"5px"},src:""+e.imageName,fontSize:"large"}),Object(h.jsxs)("h3",{className:"enter_phone",style:{marginLeft:"10px",fontWeight:"400"},children:[e.name," "]})]})]})}))}),Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(h.jsx)("button",{className:"add_new_button",type:"submit",onClick:function(){return l(c,j,x,!0),void t()},children:"Create"})})]})})})})},ee=(a(190),a(218)),te=a(52),ae=a.n(te),ne=a(43),se=a.n(ne),ce=a(44),re=a.n(ce),ie=a(42),oe=a.n(ie),le=Object(ee.a)({root:{"&:hover":{backgroundColor:"transparent"}}});var de=function(e){var t=e.backToConversations,a=R(),s=a.info,c=a.contacts,r=a.setInfo,o=a.config,u=F(),p=u.conversations,b=u.setConversations,m=A().socket,x=Object(n.useState)(s.imageName),O=Object(i.a)(x,2),f=O[0],g=O[1],y=Object(n.useState)(!1),N=Object(i.a)(y,2),S=N[0],w=N[1],C=Object(n.useState)(!1),k=Object(i.a)(C,2),z=k[0],M=k[1],U=Object(n.useState)(!1),D=Object(i.a)(U,2),P=D[0],G=D[1],E=Object(n.useState)(s.name),T=Object(i.a)(E,2),q=T[0],B=T[1],V=Object(n.useState)(s.status),W=Object(i.a)(V,2),J=W[0],H=W[1],Z=Object(n.useState)(!1),Q=Object(i.a)(Z,2),X=Q[0],$=Q[1],ee=le();function te(){return(te=Object(d.a)(l.a.mark((function e(t){var a,n,i,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","whatsApp_clone"),n.append("cloud_name","dsrgpqnyv"),e.prev=5,e.next=8,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",n);case 8:i=e.sent,a=i.data.url,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:return d={name:s.name,phone:s.phone,imageName:a,contacts:c,LastSeen:s.lastSeen,Status:s.Status},e.prev=16,e.next=19,j.a.put("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,d,o);case 19:"Updated"===e.sent.data&&r(d),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),console.log(e.t1);case 26:g(window.URL.createObjectURL(t.target.files[0]));case 27:case"end":return e.stop()}}),e,null,[[5,12],[16,23]])})))).apply(this,arguments)}function ne(){return(ne=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:q,phone:s.phone,imageName:s.imageName,contacts:c,LastSeen:s.LastSeen,Status:s.Status},e.prev=1,e.next=4,j.a.put("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,t,o);case 4:"Updated"===e.sent.data&&(r(t),a=[],p.map(function(){var e=Object(d.a)(l.a.mark((function e(n){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="",c=n.Name===s.name?Object(L.a)(Object(L.a)({},n),{},{Name:q}):Object(L.a)({},n),a.push(c),t=Object(L.a)(Object(L.a)({},t),{},{id:sessionStorage.id}),r=[].concat(Object(I.a)(n.Participants),[t]),delete(c=Object(L.a)(Object(L.a)({},c),{},{Participants:r}))._id,e.prev=7,e.next=10,j.a.put("https://messagesapp1.herokuapp.com/api/conversations/"+n._id,c,o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:m.current.emit("conversation-changed",n);case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}()),b(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:G(!1),w(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ce(){return(ce=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:s.name,phone:s.phone,imageName:s.imageName,contacts:c,LastSeen:s.LastSeen,Status:J},e.prev=1,e.next=4,j.a.put("https://messagesapp1.herokuapp.com/api/logIn/"+sessionStorage.id,t,o);case 4:"Updated"===e.sent.data&&r(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:$(!1),M(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"show_details",children:[Object(h.jsx)("header",{className:"profile_title",children:Object(h.jsxs)("div",{className:"title_and_back_to_conversations",children:[Object(h.jsx)(_.a,{onClick:function(){return t()},children:Object(h.jsx)(Y.a,{style:{height:"30px",width:"30px"}})}),Object(h.jsx)("h2",{className:"title_h2",children:" Profile "})]})}),Object(h.jsxs)("div",{className:"profile_details_body",children:[Object(h.jsxs)("div",{className:"profile_pic",children:[Object(h.jsx)(v.a,{src:f,style:{height:"170px",width:"170px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:" "}),Object(h.jsxs)("div",{className:"change_image_on_hover",style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white",curser:"pointer"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:function(e){return te.apply(this,arguments)}}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"Change Picture "})]})]}),Object(h.jsxs)("span",{className:"profile_details",children:[Object(h.jsx)("h3",{className:"edit_title",children:"your name:"}),S?Object(h.jsxs)("div",{children:[P?Object(h.jsx)(oe.a,{onEmojiClick:function(e,t){return function(e,t){B((function(e){return e+t.emoji}))}(0,t)},pickerStyle:{width:"100%",height:"200px"}}):"",Object(h.jsxs)("div",{className:"edit_group_name",style:{margin:"10px",padding:"5px"},children:[Object(h.jsx)(_.a,{className:ee.root,style:{padding:"3px"},onClick:function(){return function(){return ne.apply(this,arguments)}()},children:Object(h.jsx)(se.a,{fontSize:"large"})}),Object(h.jsx)(_.a,{className:ee.root,style:{padding:"3px"},onClick:function(){return G(!P)},children:Object(h.jsx)(re.a,{fontSize:"large"})}),Object(h.jsx)("input",{className:"input_text",defaultValue:q,onChange:function(e){return B(e.target.value)}})]})]}):Object(h.jsxs)("div",{className:"edit_details",children:[Object(h.jsx)(_.a,{onClick:function(){return w(!0)},children:Object(h.jsx)(ae.a,{style:{fontSize:"large"}})}),Object(h.jsx)("h3",{children:s.name})]})]}),Object(h.jsxs)("span",{className:"profile_details",children:[Object(h.jsx)("h3",{className:"edit_title",children:"status:"}),z?Object(h.jsxs)("div",{children:[P?Object(h.jsx)(oe.a,{onEmojiClick:function(e,t){return function(e,t){H((function(e){return e+t.emoji}))}(0,t)},pickerStyle:{width:"100%",height:"200px"}}):"",Object(h.jsxs)("div",{className:"edit_group_name",style:{margin:"10px",padding:"5px"},children:[Object(h.jsx)(_.a,{className:ee.root,style:{padding:"3px"},onClick:function(){return function(){return ce.apply(this,arguments)}()},children:Object(h.jsx)(se.a,{fontSize:"large"})}),Object(h.jsx)(_.a,{className:ee.root,style:{padding:"3px"},onClick:function(){return $(!X)},children:Object(h.jsx)(re.a,{fontSize:"large"})}),Object(h.jsx)("input",{className:"input_text",defaultValue:J,onChange:function(e){return H(e.target.value)}})]})]}):Object(h.jsxs)("div",{className:"edit_details",children:[Object(h.jsx)(_.a,{onClick:function(){return M(!0)},children:Object(h.jsx)(ae.a,{style:{fontSize:"large"}})}),Object(h.jsx)("h3",{style:{fontSize:"15px"},children:s.Status})]})]})]})]})};function ue(){var e=Object(n.useState)("conversations"),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1],d=R(),u=d.info,j=d.getSearchContacts,p=Object(n.useState)(!1),b=Object(i.a)(p,2),m=b[0],x=b[1],f=F().getSearchConverastions,S=Object(n.useState)(""),C=Object(i.a)(S,2),I=C[0],L=C[1],z=Object(n.useState)(!1),M=Object(i.a)(z,2),U=M[0],D=M[1];function P(){l(!1)}function A(e){l(!0),L(e)}return Object(h.jsx)("div",{className:"sideBar",children:U?Object(h.jsx)(de,{backToConversations:function(){D(!1)}}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"sidebar_top",children:[Object(h.jsx)("div",{className:"user_profile_pic",onClick:function(){return D(!0)},children:Object(h.jsx)(v.a,{src:u.imageName,fontSize:"large"})}),Object(h.jsxs)("div",{className:"sidebar_top_right",children:[Object(h.jsx)(_.a,{onClick:function(){return s("conversations")},children:Object(h.jsx)(O.a,{fontSize:"large"})}),Object(h.jsx)(_.a,{fontSize:"large",onClick:function(){return s("contacts")},children:Object(h.jsx)(w.a,{fontSize:"large"})}),Object(h.jsx)(_.a,{children:Object(h.jsx)(k.a,{})})]})]}),m?Object(h.jsxs)("div",{className:"activeSearch",children:[Object(h.jsx)("div",{className:"arrowButton",children:Object(h.jsx)(_.a,{onClick:function(){return x(!1)},children:Object(h.jsx)(Y.a,{fontSize:"large"})})}),Object(h.jsx)("input",{className:"searchBlock",type:"text",onChange:function(e){"conversations"===a?f(e.target.value):j(e.target.value)}})]}):Object(h.jsx)("div",{className:"searchBar",children:Object(h.jsxs)("div",{className:"searchContainer",children:[Object(h.jsx)(g.a,{}),Object(h.jsx)("input",{placeholder:"search",type:"text",onClick:function(){return x(!0)}})]})}),"contacts"===a?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"sidebar_middle",children:Object(h.jsx)(y.a,{style:{fontSize:"10px"},onClick:function(){return A("NEW_CONTACT")},className:"add_new_Button",children:"Add New Contact"})}),Object(h.jsx)("div",{className:"sidebar_bottom",children:Object(h.jsx)(B,{newConversationCallback:function(){return s("conversations")},openModalCallback:function(){return A("NEW_GROUP")}})})]}):Object(h.jsx)("div",{className:"sidebar_bottom",children:Object(h.jsx)(q,{})}),Object(h.jsx)(N.a,{className:"Modal",open:o,onClose:P,children:Object(h.jsx)("div",{children:"NEW_GROUP"===I?Object(h.jsx)($,{closeModal:P}):Object(h.jsx)(J,{closeModal:P})})})]})})}a(110);var je=a(120),pe=a.n(je),be=a(121),he=a.n(be);var me=function(e){var t=e.closeModal,a=Object(n.useState)([]),s=Object(i.a)(a,2),c=s[0],r=s[1],o=R(),l=o.contacts,d=o.info,u=F(),j=u.UpdateConversation,p=u.selectedConversation,b=Object(n.useState)([]),m=Object(i.a)(b,2),x=m[0],O=m[1];return Object(n.useEffect)((function(){var e=[];p.Participants.forEach((function(t){e.push(t.id)})),O(e)}),[p.Participants]),Object(h.jsx)("div",{className:"add_new",children:Object(h.jsx)("div",{className:"add_new_group_border",children:Object(h.jsxs)("div",{className:"new_conversation new_group",children:[Object(h.jsxs)("div",{style:{flex:"1"},className:"title_and_close",children:[Object(h.jsx)("h2",{className:"add_contact_title",style:{marginLeft:"80px",paddingRight:"0px"},children:"Select Members:"}),Object(h.jsx)(_.a,{style:{marginLeft:"40px"},className:"close_add_new",onClick:function(){return t()},children:Object(h.jsx)(W.a,{fontSize:"large"})})]}),Object(h.jsx)("div",{style:{overflowY:"overlay",height:"200px"},children:l.map((function(e){return x.includes(e.id)?"":Object(h.jsxs)("div",{className:"contact_item",children:[Object(h.jsx)("input",{type:"checkbox",value:c.includes(e.id),id:e.id,onChange:function(){return t=e.id,void(c.includes(t)?r((function(e){return e.filter((function(e){return e!==t}))})):r((function(e){return[].concat(Object(I.a)(e),[t])})));var t}}),Object(h.jsxs)("label",{style:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},for:e.id,children:[Object(h.jsx)(v.a,{style:{margin:"5px"},src:""+e.imageName,fontSize:"large"}),Object(h.jsxs)("h3",{className:"enter_phone",style:{marginLeft:"10px",fontWeight:"400"},children:[e.name," "]})]})]})}))}),Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(h.jsx)("button",{className:"add_new_button",type:"submit",onClick:function(){return function(){var e=[];e=p.Participants;var a=p.Messages,n="";l.forEach((function(t){c.includes(t.id)&&(e.push(t),n={name:"manager",message:d.name+" added "+t.name+" to the group",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},a.push(n))}));var s=Object(L.a)(Object(L.a)({},p),{},{Participants:e,Messages:a,LastMessage:n});j(s),t()}()},children:"Add"})})]})})})},xe=a(219),Oe=Object(ee.a)({root:{"&:hover":{backgroundColor:"transparent"}}});var fe=function(){var e=F(),t=e.selectedConversation,a=e.createConversation,s=e.conversations,c=e.setSelectedConversation,r=e.UpdateConversation,o=Object(n.useState)(!1),u=Object(i.a)(o,2),p=u[0],b=u[1],m=Object(n.useState)(!1),x=Object(i.a)(m,2),O=x[0],f=x[1],g=Object(n.useState)(!1),y=Object(i.a)(g,2),S=y[0],w=y[1],C=Object(n.useState)(t.Name),k=Object(i.a)(C,2),I=k[0],z=k[1],M=Object(n.useState)(t.description),U=Object(i.a)(M,2),D=U[0],P=U[1],A=R().info,G=Oe(),E=Object(n.useState)(!1),T=Object(i.a)(E,2),q=T[0],B=T[1],V=Object(n.useState)(!1),J=Object(i.a)(V,2),H=J[0],Y=J[1],Z=Object(n.useState)(!1),Q=Object(i.a)(Z,2),X=Q[0],$=Q[1],ee=Object(n.useState)(),te=Object(i.a)(ee,2),ne=te[0],ce=te[1],ie=Object(n.useState)(t.ConversationImage),le=Object(i.a)(ie,2),de=le[0],ue=le[1];function je(){B(!1)}function be(){return(be=Object(d.a)(l.a.mark((function e(a){var n,s,c,i,o,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(window.URL.createObjectURL(a.target.files[0])),n="",(s=new FormData).append("file",a.target.files[0]),s.append("upload_preset","whatsApp_clone"),s.append("cloud_name","dsrgpqnyv"),e.prev=6,e.next=9,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",s);case 9:c=e.sent,n=c.data.url,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:i=t.Messages,o={name:"manager",message:A.name+" changed group picture",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},i.push(o),d=Object(L.a)(Object(L.a)({},t),{},{ConversationImage:n,Messages:i,LastMessage:o}),r(d);case 21:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){b(!1),f(!1),w(!1)}),[t]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"user_info",children:[Object(h.jsxs)("div",{className:"change_group_image",children:[Object(h.jsx)(v.a,{src:de,style:{height:"150px",width:"150px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:" "}),Object(h.jsxs)("div",{className:"change_image_on_hover",style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white",curser:"pointer"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:function(e){return be.apply(this,arguments)}}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"Change Picture "})]})]}),Object(h.jsxs)("span",{className:"name_and_lastSeen",children:[p?Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[S?Object(h.jsx)(oe.a,{onEmojiClick:function(e,t){return function(e,t){z(I+t.emoji)}(0,t)},pickerStyle:{width:"100%",height:"200px"}}):"",Object(h.jsxs)("div",{className:"edit_group_name",children:[Object(h.jsx)(_.a,{className:G.root,style:{padding:"3px"},onClick:function(){return function(){var e={name:"manager",message:A.name+" changed group name to "+I,timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},a=t.Messages;a.push(e);var n=Object(L.a)(Object(L.a)({},t),{},{Name:I,Messages:a,LastMasage:e});r(n),b(!1)}()},children:Object(h.jsx)(se.a,{fontSize:"large"})}),Object(h.jsx)(_.a,{className:G.root,style:{padding:"3px"},onClick:function(){return w(!S)},children:Object(h.jsx)(re.a,{fontSize:"large"})}),Object(h.jsx)("input",{className:"input_text",defaultValue:I,onChange:function(e){return z(e.target.value)}})]})]}):Object(h.jsxs)("span",{className:"group_title",children:[Object(h.jsx)("h3",{children:t.Name}),Object(h.jsx)(_.a,{onClick:function(){return b(!0)},children:Object(h.jsx)(ae.a,{style:{fontSize:"large",marginLeft:"10px"}})})]}),Object(h.jsxs)("span",{className:"lastSeen",style:{padding:"10px",paddingLeft:"0px"},children:[" created at:  ",t.createdDate," "]})]})]}),Object(h.jsxs)("div",{className:"group_details_container",children:[Object(h.jsx)("h2",{className:"group_title",style:{padding:"5px"},children:" Description "}),O?Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[S?Object(h.jsx)(oe.a,{onEmojiClick:function(e,t){return function(e,t){P(D+t.emoji)}(0,t)},pickerStyle:{width:"100%",height:"200px"}}):"",Object(h.jsxs)("div",{className:"edit_group_name",style:{padding:"5px"},children:[Object(h.jsx)(_.a,{className:G.root,style:{padding:"3px"},onClick:function(){return function(){var e={name:"manager",message:A.name+" changed group Description",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},a=t.Messages;a.push(e);var n=Object(L.a)(Object(L.a)({},t),{},{description:D,Messages:a,LastMessage:e});r(n),f(!1)}()},children:Object(h.jsx)(se.a,{fontSize:"large"})}),Object(h.jsx)(_.a,{className:G.root,style:{padding:"3px"},onClick:function(){return w(!S)},children:Object(h.jsx)(re.a,{fontSize:"large"})}),Object(h.jsx)("input",{className:"input_text",defaultValue:D,onChange:function(e){return P(e.target.value)}})]})]}):Object(h.jsxs)("div",{className:"group_description_edit",children:[Object(h.jsx)("span",{style:{fontSize:"15px",marginRight:"5px"},children:t.description}),Object(h.jsx)(_.a,{onClick:function(){return f(!0)},children:Object(h.jsx)(ae.a,{style:{fontSize:"large"}})})]})]}),Object(h.jsxs)("div",{className:"group_details_container",children:[Object(h.jsxs)("h2",{className:"group_title",style:{padding:"10px",borderBottom:"1px solid #B0B0B0"},children:[t.Participants.length+1," participants"]}),Object(h.jsx)(N.a,{className:"Modal",open:q,onClose:je,children:Object(h.jsx)(me,{closeModal:je})}),t.creatorId===sessionStorage.id?Object(h.jsxs)("div",{className:"participant",style:{cursor:"pointer",fontSize:"15px"},onClick:function(){return B(!0)},children:[Object(h.jsx)(v.a,{children:Object(h.jsx)(_.a,{className:G.root,style:{padding:"3px"},children:Object(h.jsx)(pe.a,{fontSize:"large"})})}),Object(h.jsx)("h3",{className:"group_participant_name",children:"Add Member"})]}):"",t.Participants.map((function(e,n){return Object(h.jsxs)("div",{className:"participant",children:[Object(h.jsxs)("div",{onClick:function(){return function(e){var t=!1;if(s.forEach((function(a){!1===a.isGroup&&a.Participants[0].id===e.id&&(t=!0,c(a))})),!t){var n=[];n.push(e.id),a(n,e.name,e.imageName,!1)}}(e)},style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center",cursor:"pointer"},children:[Object(h.jsx)(v.a,{src:e.imageName}),Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)("h3",{className:"group_participant_name",children:e.name}),e.id===t.creatorId?Object(h.jsx)("div",{className:"group_admin",children:Object(h.jsx)("h3",{style:{fontSize:"13px"},children:"Group Manager"})}):""]})]}),sessionStorage.id===t.creatorId?Object(h.jsx)(_.a,{onClick:function(){return function(e){ce(e),$(!0)}(e)},style:{padding:"3px"},children:Object(h.jsx)(W.a,{fontSize:"medium"})}):""]},n)})),Object(h.jsx)("div",{className:"participant",children:Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)(v.a,{src:A.imageName}),Object(h.jsxs)("div",{style:{display:"flex",flexGrow:"1",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)("h3",{className:"group_participant_name",children:A.name}),sessionStorage.id===t.creatorId?Object(h.jsx)("div",{className:"group_admin",children:Object(h.jsx)("h3",{style:{fontSize:"13px"},children:"Group Manager"})}):""]})]})})]}),Object(h.jsx)("div",{className:"group_details_container leave",onClick:function(){return Y(!0)},children:Object(h.jsxs)("div",{className:"leaveGroup",children:[Object(h.jsx)(_.a,{className:G.root,style:{padding:"3px"},children:Object(h.jsx)(he.a,{style:{color:"darkred"},fontSize:"large"})}),Object(h.jsx)("h3",{className:"group_participant_name",style:{color:"darkRed",fontSize:"17px"},children:"leave Group"})]})}),Object(h.jsx)(xe.a,{className:"exit_group_dialog",onClose:function(){return Y(!1)},open:H,children:Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("h2",{className:"dialog_title",children:" are you sure you want to leave this group?"}),Object(h.jsxs)("div",{className:"dialog_options_buttons",children:[Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return function(){var e={name:"manager",message:A.name+" left the group",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null},a=t.Messages;a.push(e);var n=Object(L.a)(Object(L.a)({},t),{},{Messages:a,LastMessage:e});r(n),Y(!1)}()},children:"yes"}),Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return Y(!1)},children:"no"})]})]})}),Object(h.jsx)(xe.a,{className:"exit_group_dialog",onClose:function(){return $(!1)},open:X,children:Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("h2",{className:"dialog_title",children:" are you sure you want to delete this user?"}),Object(h.jsxs)("div",{className:"dialog_options_buttons",children:[Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return function(){var e=t.Messages,a={name:"manager",message:A.name+" removed "+ne.name+" from the group ",timeSent:"",containsImage:!1,containsRecord:!1,recordURL:null};e.push(a);var n=t.Participants.filter((function(e){return e.id!==ne.id})),s=Object(L.a)(Object(L.a)({},t),{},{Participants:n,Messages:e,LastMessage:a});r(s),ce(),$(!1)}()},children:"yes"}),Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return $(!1)},children:"no"})]})]})})]})};var ge=function(e){var t=e.privateConversationHeader,a=F().selectedConversation,s=Object(n.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1];return Object(h.jsxs)("div",{className:"user_info",children:[Object(h.jsx)("div",{onClick:function(){return o(!0)},children:Object(h.jsx)(v.a,{src:a.ConversationImage,style:{margin:"20px",height:"150px",width:"150px"}})}),Object(h.jsx)(xe.a,{className:"open_picture_dialog",onClose:function(){return o(!1)},open:r,children:Object(h.jsx)("img",{src:a.ConversationImage,alt:""})}),Object(h.jsxs)("span",{className:"name_and_lastSeen",style:{paddingBottom:"0px"},children:[console.log("here"),Object(h.jsx)("span",{className:"group_title",children:Object(h.jsx)("h3",{children:a.Name})}),Object(h.jsx)("span",{className:"lastSeen",style:{padding:"10px",paddingLeft:"0px"},children:t()})]})]})},ve=a(124),_e=a.n(ve),ye=a(123),Ne=a.n(ye),Se=a(122);var we=function(e){var t=e.sender,a=e.message,s=Object(n.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1],l=Object(n.useState)(null),d=Object(i.a)(l,2),u=d[0],j=d[1];return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"message",children:[Object(h.jsxs)("div",{className:"image_and_sender",children:[Object(h.jsx)("div",{className:"sender",children:a.name}),a.containsImage?Object(h.jsx)("img",{className:"image_in_message",src:a.imageURL,alt:"",onClick:function(){return e=a.imageURL,o(!0),void j(e);var e},width:"200px",height:"200px"}):""]}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"message_and_time",children:[Object(h.jsx)("div",{className:"message_content",children:a.message}),Object(h.jsx)("div",{className:"message_time_border",children:Object(h.jsx)("div",{className:"message_time",children:a.timeSent.substring(11,17)})})]})}),Object(h.jsx)(xe.a,{onClose:function(){return o(!1)},open:r,children:Object(h.jsx)("img",{src:u,alt:""})})]})})};a(192);var Ce=function(e){var t=e.message,a=e.sender,n=e.image,s=a.includes("chat_reciever")?"reciever":"sender";return Object(h.jsx)("div",{className:a,children:Object(h.jsx)("div",{className:"message_with_audio",children:Object(h.jsxs)("div",{className:s,children:["message_out"===a?Object(h.jsxs)("div",{className:"audio_and_avatar",children:[Object(h.jsx)("audio",{controls:!0,controlsList:"nodownload",children:Object(h.jsx)("source",{src:t.recordURL,type:"audio/mp3"})}),Object(h.jsx)(v.a,{src:n,style:{height:"50px",width:"50px",margin:"5px"}})]}):Object(h.jsxs)("div",{className:"audio_and_avatar",children:[Object(h.jsx)(v.a,{src:n,style:{height:"50px",width:"50px",margin:"5px"}}),Object(h.jsx)("audio",{controls:!0,controlsList:"nodownload",children:Object(h.jsx)("source",{src:t.recordURL,type:"audio/mp3"})})]}),Object(h.jsx)("span",{className:"message_time",children:t.timeSent.substring(11,17)})]})})})};var ke=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),s=a[0],c=a[1],r=A().socket,o=R().info,u=F(),p=u.sendMessage,b=u.selectedConversation,m=u.removedFromGroupFlag,x=u.setRemovedFromGroupFlag,O=u.setSelectedConversation,f=Object(n.useRef)(null),g=Object(n.useState)(!1),v=Object(i.a)(g,2),y=v[0],N=v[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),C=w[0],k=w[1],I=Object(Se.useReactMediaRecorder)({audio:!0}),L=I.startRecording,z=I.stopRecording,M=I.mediaBlobUrl,U=I.clearBlobUrl,D=Object(n.useState)(null),P=Object(i.a)(D,2),G=P[0],E=P[1],T=Object(n.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]);function q(){return(q=Object(d.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("file",a.target.files[0]),n.append("upload_preset","whatsApp_clone"),n.append("cloud_name","dsrgpqnyv"),t.prev=4,t.next=7,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",n);case 7:s=t.sent,e.imageCallback(s.data.url),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}function B(){return V.apply(this,arguments)}function V(){return(V=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(),e.next=3,fetch(M);case 3:t=e.sent,E(t.blob());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){z(),U(),k(!1)}return Object(n.useEffect)((function(){N(!1)}),[b]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==G){e.next=25;break}return e.next=3,fetch(M).then((function(e){return e.blob()}));case 3:return t=e.sent,(a=new FormData).append("file",t),a.append("resource_type","video"),a.append("upload_preset","whatsApp_clone"),a.append("cloud_name","dsrgpqnyv"),e.prev=9,e.next=12,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/video/upload",a);case 12:n=e.sent,c=(c=n.data.url).slice(0,-4),c+="mp3",k(!1),U(),p(s,null,null,c),k(!1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[9,22]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[G]),Object(h.jsxs)("div",{className:"body_and_footer",children:[Object(h.jsx)("div",{className:"chat_body",children:b.Messages.map((function(e,t){var a,n=b.Messages.length-1===t;a="manager"===e.name?"manager":e.id===sessionStorage.id?"message_out":"message_in";var s=e.id===sessionStorage.id?o.imageName:b.ConversationImage,c="message_in"===a?"chat_message chat_sender":" chat_message chat_reciever";return Object(h.jsx)("div",{children:"manager"===a?Object(h.jsx)("div",{className:"around_message",ref:n?T:null,children:Object(h.jsx)("div",{className:"manager_message",children:Object(h.jsx)("span",{className:"message_content",children:e.message})})}):Object(h.jsx)("div",{className:c,ref:n?T:null,children:e.containsRecord?Object(h.jsx)(Ce,{message:e,sender:a,image:s}):Object(h.jsx)(we,{sender:a,message:e})},t)},t)}))}),Object(h.jsxs)("div",{className:"chat_footer_with_stickers",children:[y?Object(h.jsx)(oe.a,{onEmojiClick:function(e,t){return function(e,t){c(s+t.emoji)}(0,t)},pickerStyle:{width:"100%"}}):"",Object(h.jsxs)("div",{className:"chat_footer",children:[y?Object(h.jsxs)(_.a,{onClick:function(){return N(!1)},children:[Object(h.jsx)(W.a,{fontSize:"large"})," "]}):"",Object(h.jsx)(_.a,{onClick:function(){return N(!0)},children:Object(h.jsx)(re.a,{fontSize:"large"})}),Object(h.jsx)("input",{accept:"image/*",className:"invisibleInput",id:"icon-button-file",type:"file",style:{visibility:"hidden"},onChange:function(e){return q.apply(this,arguments)}}),Object(h.jsx)("label",{htmlFor:"icon-button-file",children:Object(h.jsx)(_.a,{component:"span",children:Object(h.jsx)(Ne.a,{fontSize:"large"})})}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(s,!1,null,null),c(" ")},className:"message_section",children:[Object(h.jsx)("input",{className:"message_input",ref:f,value:s,onChange:function(e){c(e.target.value),null!=r.current&&r.current.emit("typing",{user:o,Conversation:b})},type:"text",placeholder:"type a message"}),Object(h.jsx)("button",{type:"submit",children:" send "})]}),C?Object(h.jsxs)("div",{children:[Object(h.jsx)(_.a,{children:Object(h.jsx)(W.a,{fontSize:"large",style:{color:"red"},onClick:J})}),Object(h.jsx)(_.a,{children:Object(h.jsx)(se.a,{fontSize:"large",style:{color:"green"},onClick:B})})]}):Object(h.jsx)(_.a,{onClick:function(){k(!0),L()},children:Object(h.jsx)(_e.a,{fontSize:"large"})})]})]}),Object(h.jsx)(xe.a,{className:"exit_group_dialog",open:m,children:Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("h2",{className:"dialog_title",children:" you where removed from this group"}),Object(h.jsx)("div",{className:"dialog_options_buttons",children:Object(h.jsx)("button",{className:"dialog_button",onClick:function(){return x(!1),void O()},children:"ok"})})]})})]})},Ie=(a(193),a(125)),Le=a.n(Ie);var ze=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(""),s=Object(i.a)(a,2),c=s[0],r=s[1],o=A().socket,l=R().info,d=F(),u=d.sendMessage,j=d.selectedConversation;function p(t){!0===t&&u(c,!0,e.imageURL),r(" "),e.backToChat()}return Object(h.jsxs)("div",{className:"SendImage",children:[Object(h.jsx)("div",{className:"sendImageHeader"}),Object(h.jsx)(_.a,{type:"submit",onClick:function(){return p(!1)},children:Object(h.jsx)(W.a,{fontSize:"large"})}),Object(h.jsx)("img",{src:e.imageURL,alt:"",height:"300px",width:"300px"}),Object(h.jsx)("div",{className:"add_message",children:Object(h.jsxs)("form",{onSubmit:function(){return p(!0)},className:"message_section",children:[Object(h.jsx)(_.a,{type:"submit",style:{flex:"0.1"},children:Object(h.jsx)(Le.a,{fontSize:"large"})}),Object(h.jsx)("input",{className:"message_input",ref:t,value:c,onChange:function(e){r(e.target.value),null!=o.current&&o.current.emit("typing",{user:l,Conversation:j})},type:"text",placeholder:"type a message"})]})})]})};function Re(){var e=F(),t=e.selectedConversation,a=e.currentConversationIsConnected,s=e.typingFlag,c=e.setTypingFlag,r=e.showDetails,o=e.setShowDetails,l=Object(n.useState)(!1),d=Object(i.a)(l,2),u=d[0],j=d[1],p=Object(n.useState)(!1),b=Object(i.a)(p,2),m=b[0],x=b[1],O=function(){var e="";return""===a?""!==s?(e=Object(h.jsx)("div",{className:"lastSeen",children:" typing..."}),setTimeout((function(){return c("")}),1e3)):e=Object(h.jsxs)("div",{className:"connected",children:[Object(h.jsx)("div",{className:"circle"})," online "]}):e=Object(h.jsx)("div",{className:"lastSeen",children:a}),e};var f=Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"chat_header",onClick:function(){return o(!0)},children:[Object(h.jsx)(v.a,{src:t.ConversationImage}),Object(h.jsxs)("div",{className:"chat_header_info",children:[Object(h.jsxs)("h2",{style:{fontSize:"20px"},children:[" ",t.Name," "]}),t.isGroup?function(){var e="";if(""!==s)e=Object(h.jsxs)("div",{className:"lastSeen",children:[" ",s," is typing..."]}),setTimeout((function(){return c("")}),1e3);else{var a="";t.Participants.forEach((function(e,n){n===t.Participants.length-1?a+=e.name:a=a+e.name+", "})),e=Object(h.jsxs)("div",{className:"lastSeen",children:[a," "]})}return e}():O()]})]}),u?Object(h.jsx)(ze,{imageURL:m,backToChat:function(){x(null),j(!1)}}):Object(h.jsx)(ke,{imageCallback:function(e){x(e),j(!0)}})]});return r?Object(h.jsxs)("div",{className:"chat_with_details",children:[Object(h.jsx)("div",{className:"chat narrow_chat",children:f}),Object(h.jsxs)("div",{className:"chat_details",children:[Object(h.jsxs)("div",{className:"chat_details_top ",children:[Object(h.jsx)(_.a,{onClick:function(){return o(!1)},children:Object(h.jsx)(W.a,{fontSize:"large"})}),Object(h.jsx)("h2",{style:{paddingLeft:"10px",fontSize:"22px"},children:t.isGroup?"Group Details:":"Contact Details:"})]}),Object(h.jsx)("span",{className:"chat_details_body",children:t.isGroup?Object(h.jsx)(fe,{}):Object(h.jsx)(ge,{privateConversationHeader:O})})]})]}):Object(h.jsx)("div",{className:"chat",children:f})}var Me=Object(p.h)((function(e){var t=e.id,a=F().selectedConversation;return Object(h.jsx)("div",{className:"dashboard",children:Object(h.jsxs)("div",{className:"dashboard_body",children:[Object(h.jsx)(ue,{}),void 0!==a?Object(h.jsx)(Re,{id:t}):""]})})}));var Ue=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),u=o[0],m=o[1],x=Object(n.useState)(null),O=Object(i.a)(x,2),f=O[0],g=O[1],_=Object(p.g)(),y=Object(n.useState)(""),N=Object(i.a)(y,2),S=N[0],w=N[1],C=Object(n.useState)(),k=Object(i.a)(C,2),I=k[0],L=k[1];function z(){return(z=Object(d.a)(l.a.mark((function t(a){var n,c,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n="",!f){t.next=17;break}return(c=new FormData).append("file",f),c.append("upload_preset","whatsApp_clone"),c.append("cloud_name","dsrgpqnyv"),t.prev=7,t.next=10,j.a.post("https://api.cloudinary.com/v1_1/dsrgpqnyv/image/upload",c);case 10:r=t.sent,n=r.data.url,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),console.log(t.t0);case 17:return i={name:u,phone:s,imageName:n,contacts:[],LastSeen:"last seen at...",Status:"hello,i'm using Message-App!"},t.prev=18,t.next=21,j.a.post("https://messagesapp1.herokuapp.com/api/logIn/Register",i);case 21:"error"===(o=t.sent).data.status?w(o.data.message):(sessionStorage.config=o.data.token,sessionStorage.id=o.data.User._id,sessionStorage.name=o.data.User.name,e.CanLogIn(o.data.User._id),_.push("/App")),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(18),console.log(t.t1);case 28:case"end":return t.stop()}}),t,null,[[7,14],[18,25]])})))).apply(this,arguments)}function R(e){g(e.target.files[0]),L(window.URL.createObjectURL(e.target.files[0]))}return Object(h.jsx)("div",{className:"overlay",children:Object(h.jsx)("form",{className:"login_form",onSubmit:function(e){return z.apply(this,arguments)},children:Object(h.jsxs)("div",{className:"con",children:[Object(h.jsxs)("header",{className:"head-form",style:{marginBottom:"0px",paddingBottom:"0px"},children:[Object(h.jsx)("h2",{children:"Register"}),Object(h.jsx)("p",{children:"welcome to  my whatsApp"})]}),Object(h.jsxs)("div",{className:"field-set",children:[I?Object(h.jsxs)("div",{className:"change_group_image",children:[Object(h.jsx)(v.a,{src:I,style:{height:"110px",width:"110px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:" "}),Object(h.jsxs)("div",{className:"change_image_on_hover",style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white",curser:"pointer"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:R}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"Change Picture "})]})]}):Object(h.jsx)("div",{className:"add_Profile_Picture",children:Object(h.jsxs)(v.a,{style:{height:"140px",width:"140px",backgroundColor:"gray",margin:"15px",marginTop:"30px"},children:[Object(h.jsx)(X.a,{style:{position:"absolute",zIndex:"0",opacity:"0.1",height:"80px",width:"80px"}}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",zIndex:"1",color:"white",curser:"pointer"},children:[Object(h.jsx)(K.a,{style:{height:"30px",width:"30px",color:"white"}}),Object(h.jsx)("input",{accept:"image/*",id:"file",type:"file",name:"file",onChange:R}),Object(h.jsx)("span",{style:{fontSize:"10px"},children:"Add Profile Picture"})]})]})}),Object(h.jsxs)("span",{className:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-user-circle"}),Object(h.jsx)("input",{className:"form-input",id:"txt-input",type:"text",placeholder:"@UserName",onChange:function(e){return m(e.target.value)},required:!0})]}),Object(h.jsxs)("span",{className:"input-item",children:[Object(h.jsx)("i",{class:"fa fa-key"}),Object(h.jsx)("input",{className:"form-input",type:"password",placeholder:"Password",id:"pwd",name:"password",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(h.jsx)("button",{className:"log-in",type:"submit",children:" Register "})]}),Object(h.jsx)("div",{children:Object(h.jsxs)(b.b,{className:"submits sign-up defaultLink",to:"/",children:["    ",Object(h.jsx)("i",{style:{margin:"7px"},class:"fa fa-user-plus","aria-hidden":"true"}),"back to Log In"]})}),Object(h.jsx)("span",{style:{fontSize:"15px"},children:S})]})})})};a(194);var De=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(h.jsx)(G,{userId:a,children:Object(h.jsx)(M,{id:a,children:Object(h.jsx)(T,{children:Object(h.jsx)(Me,{id:a})})})});return Object(h.jsx)(b.a,{children:Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(p.d,{children:[sessionStorage.id,Object(h.jsxs)(p.b,{exact:!0,path:"/",children:[" ",Object(h.jsx)(m,{CanLogIn:s})]}),Object(h.jsxs)(p.b,{path:"/Register",children:[" ",Object(h.jsx)(Ue,{CanLogIn:s})]}),sessionStorage.id?Object(h.jsxs)(p.b,{exact:!0,path:"/App",children:[" ",c," "]}):Object(h.jsx)(p.a,{to:"/"})]})})})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(De,{})}),document.getElementById("root"))},74:function(e,t,a){},81:function(e,t,a){}},[[195,1,2]]]);
//# sourceMappingURL=main.222938fc.chunk.js.map